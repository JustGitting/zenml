
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sdkdocs.zenml.io/0.71.0/core_code_docs/core-steps/">
      
      <link rel="icon" href="../../_assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-8.5.10">
    
    
      
        <title>Steps - ZenML API Reference</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    

<script>
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="CaE5VaNjhyaUt48qXK4rLwwKJ0PdAOFM";;analytics.SNIPPET_VERSION="4.15.3";
  analytics.load("CaE5VaNjhyaUt48qXK4rLwwKJ0PdAOFM");
  analytics.page();
  }}();
</script>
<script defer data-domain="apidocs.zenml.io" src="https://plausible.io/js/plausible.js"></script>


  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#steps" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ZenML API Reference" class="md-header__button md-logo" aria-label="ZenML API Reference" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ZenML API Reference
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Steps
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/zenml-io/zenml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ZenML API Reference" class="md-nav__button md-logo" aria-label="ZenML API Reference" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ZenML API Reference
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zenml-io/zenml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        ZenML
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        CLI docs
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Core code docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Core code docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Core code docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-actions/" class="md-nav__link">
        Actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-alerter/" class="md-nav__link">
        Alerter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-analytics/" class="md-nav__link">
        Analytics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-annotators/" class="md-nav__link">
        Annotators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-artifact_stores/" class="md-nav__link">
        Artifact Stores
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-artifacts/" class="md-nav__link">
        Artifacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-client/" class="md-nav__link">
        Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-client_lazy_loader/" class="md-nav__link">
        Client Lazy Loader
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-code_repositories/" class="md-nav__link">
        Code Repositories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-config/" class="md-nav__link">
        Config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-console/" class="md-nav__link">
        Console
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-constants/" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-container_registries/" class="md-nav__link">
        Container Registries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-data_validators/" class="md-nav__link">
        Data Validators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-entrypoints/" class="md-nav__link">
        Entrypoints
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-enums/" class="md-nav__link">
        Enums
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-environment/" class="md-nav__link">
        Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-event_hub/" class="md-nav__link">
        Event Hub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-event_sources/" class="md-nav__link">
        Event Sources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-exceptions/" class="md-nav__link">
        Exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-experiment_trackers/" class="md-nav__link">
        Experiment Trackers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-feature_stores/" class="md-nav__link">
        Feature Stores
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-hooks/" class="md-nav__link">
        Hooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-image_builders/" class="md-nav__link">
        Image Builders
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-io/" class="md-nav__link">
        Io
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-logger/" class="md-nav__link">
        Logger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-login/" class="md-nav__link">
        Login
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-materializers/" class="md-nav__link">
        Materializers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-metadata/" class="md-nav__link">
        Metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-model/" class="md-nav__link">
        Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-model_deployers/" class="md-nav__link">
        Model Deployers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-model_registries/" class="md-nav__link">
        Model Registries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-models/" class="md-nav__link">
        Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-orchestrators/" class="md-nav__link">
        Orchestrators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-pipelines/" class="md-nav__link">
        Pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-plugins/" class="md-nav__link">
        Plugins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-secret/" class="md-nav__link">
        Secret
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-service_connectors/" class="md-nav__link">
        Service Connectors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-services/" class="md-nav__link">
        Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-stack/" class="md-nav__link">
        Stack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-stack_deployments/" class="md-nav__link">
        Stack Deployments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-step_operators/" class="md-nav__link">
        Step Operators
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Steps
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Steps
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zenml.steps" class="md-nav__link">
    steps
  </a>
  
    <nav class="md-nav" aria-label="steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step" class="md-nav__link">
    base_step
  </a>
  
    <nav class="md-nav" aria-label="base_step">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep" class="md-nav__link">
    BaseStep
  </a>
  
    <nav class="md-nav" aria-label="BaseStep">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.caching_parameters" class="md-nav__link">
    caching_parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.configuration" class="md-nav__link">
    configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.docstring" class="md-nav__link">
    docstring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.enable_cache" class="md-nav__link">
    enable_cache
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.source_code" class="md-nav__link">
    source_code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.source_object" class="md-nav__link">
    source_object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.__call__" class="md-nav__link">
    __call__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.call_entrypoint" class="md-nav__link">
    call_entrypoint()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.configure" class="md-nav__link">
    configure()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.copy" class="md-nav__link">
    copy()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.entrypoint" class="md-nav__link">
    entrypoint()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.load_from_source" class="md-nav__link">
    load_from_source()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.resolve" class="md-nav__link">
    resolve()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.with_options" class="md-nav__link">
    with_options()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.decorated_step" class="md-nav__link">
    decorated_step
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils" class="md-nav__link">
    entrypoint_function_utils
  </a>
  
    <nav class="md-nav" aria-label="entrypoint_function_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.EntrypointFunctionDefinition" class="md-nav__link">
    EntrypointFunctionDefinition
  </a>
  
    <nav class="md-nav" aria-label="EntrypointFunctionDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.EntrypointFunctionDefinition.__getnewargs__" class="md-nav__link">
    __getnewargs__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.EntrypointFunctionDefinition.__new__" class="md-nav__link">
    __new__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.EntrypointFunctionDefinition.__repr__" class="md-nav__link">
    __repr__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.EntrypointFunctionDefinition.validate_input" class="md-nav__link">
    validate_input()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.StepArtifact" class="md-nav__link">
    StepArtifact
  </a>
  
    <nav class="md-nav" aria-label="StepArtifact">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.StepArtifact.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.StepArtifact.__iter__" class="md-nav__link">
    __iter__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.validate_entrypoint_function" class="md-nav__link">
    validate_entrypoint_function()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.validate_reserved_arguments" class="md-nav__link">
    validate_reserved_arguments()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context" class="md-nav__link">
    step_context
  </a>
  
    <nav class="md-nav" aria-label="step_context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext" class="md-nav__link">
    StepContext
  </a>
  
    <nav class="md-nav" aria-label="StepContext">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.inputs" class="md-nav__link">
    inputs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.model" class="md-nav__link">
    model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.pipeline" class="md-nav__link">
    pipeline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.add_output_metadata" class="md-nav__link">
    add_output_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.add_output_tags" class="md-nav__link">
    add_output_tags()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.get_output_artifact_uri" class="md-nav__link">
    get_output_artifact_uri()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.get_output_materializer" class="md-nav__link">
    get_output_materializer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.get_output_metadata" class="md-nav__link">
    get_output_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.get_output_tags" class="md-nav__link">
    get_output_tags()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContextOutput" class="md-nav__link">
    StepContextOutput
  </a>
  
    <nav class="md-nav" aria-label="StepContextOutput">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContextOutput.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.get_step_context" class="md-nav__link">
    get_step_context()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_decorator" class="md-nav__link">
    step_decorator
  </a>
  
    <nav class="md-nav" aria-label="step_decorator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_decorator.step" class="md-nav__link">
    step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_invocation" class="md-nav__link">
    step_invocation
  </a>
  
    <nav class="md-nav" aria-label="step_invocation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_invocation.StepInvocation" class="md-nav__link">
    StepInvocation
  </a>
  
    <nav class="md-nav" aria-label="StepInvocation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_invocation.StepInvocation.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_invocation.StepInvocation.finalize" class="md-nav__link">
    finalize()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils" class="md-nav__link">
    utils
  </a>
  
    <nav class="md-nav" aria-label="utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.OnlyNoneReturnsVisitor" class="md-nav__link">
    OnlyNoneReturnsVisitor
  </a>
  
    <nav class="md-nav" aria-label="OnlyNoneReturnsVisitor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.OnlyNoneReturnsVisitor.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.OnlyNoneReturnsVisitor.visit_Return" class="md-nav__link">
    visit_Return()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.OutputSignature" class="md-nav__link">
    OutputSignature
  </a>
  
    <nav class="md-nav" aria-label="OutputSignature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.OutputSignature.get_output_types" class="md-nav__link">
    get_output_types()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.ReturnVisitor" class="md-nav__link">
    ReturnVisitor
  </a>
  
    <nav class="md-nav" aria-label="ReturnVisitor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.ReturnVisitor.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.ReturnVisitor.visit_AsyncFunctionDef" class="md-nav__link">
    visit_AsyncFunctionDef()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.ReturnVisitor.visit_FunctionDef" class="md-nav__link">
    visit_FunctionDef()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.TupleReturnVisitor" class="md-nav__link">
    TupleReturnVisitor
  </a>
  
    <nav class="md-nav" aria-label="TupleReturnVisitor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.TupleReturnVisitor.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.TupleReturnVisitor.visit_Return" class="md-nav__link">
    visit_Return()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.get_args" class="md-nav__link">
    get_args()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.get_artifact_config_from_annotation_metadata" class="md-nav__link">
    get_artifact_config_from_annotation_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.has_only_none_returns" class="md-nav__link">
    has_only_none_returns()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.has_tuple_return" class="md-nav__link">
    has_tuple_return()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.log_step_metadata" class="md-nav__link">
    log_step_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.parse_return_type_annotations" class="md-nav__link">
    parse_return_type_annotations()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.resolve_type_annotation" class="md-nav__link">
    resolve_type_annotation()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.run_as_single_step_pipeline" class="md-nav__link">
    run_as_single_step_pipeline()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-types/" class="md-nav__link">
        Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-zen_server/" class="md-nav__link">
        Zen Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-zen_stores/" class="md-nav__link">
        Zen Stores
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Integration code docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Integration code docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Integration code docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-airflow/" class="md-nav__link">
        Airflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-argilla/" class="md-nav__link">
        Argilla
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-aws/" class="md-nav__link">
        Aws
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-azure/" class="md-nav__link">
        Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-bentoml/" class="md-nav__link">
        Bentoml
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-bitbucket/" class="md-nav__link">
        Bitbucket
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-comet/" class="md-nav__link">
        Comet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-constants/" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-databricks/" class="md-nav__link">
        Databricks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-deepchecks/" class="md-nav__link">
        Deepchecks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-discord/" class="md-nav__link">
        Discord
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-evidently/" class="md-nav__link">
        Evidently
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-facets/" class="md-nav__link">
        Facets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-feast/" class="md-nav__link">
        Feast
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-gcp/" class="md-nav__link">
        Gcp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-github/" class="md-nav__link">
        Github
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-gitlab/" class="md-nav__link">
        Gitlab
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-great_expectations/" class="md-nav__link">
        Great Expectations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-huggingface/" class="md-nav__link">
        Huggingface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-hyperai/" class="md-nav__link">
        Hyperai
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-integration/" class="md-nav__link">
        Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-kaniko/" class="md-nav__link">
        Kaniko
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-kubeflow/" class="md-nav__link">
        Kubeflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-kubernetes/" class="md-nav__link">
        Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-label_studio/" class="md-nav__link">
        Label Studio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-langchain/" class="md-nav__link">
        Langchain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-lightgbm/" class="md-nav__link">
        Lightgbm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-lightning/" class="md-nav__link">
        Lightning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-llama_index/" class="md-nav__link">
        Llama Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-mlflow/" class="md-nav__link">
        Mlflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-modal/" class="md-nav__link">
        Modal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-neptune/" class="md-nav__link">
        Neptune
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-neural_prophet/" class="md-nav__link">
        Neural Prophet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-numpy/" class="md-nav__link">
        Numpy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-openai/" class="md-nav__link">
        Openai
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-pandas/" class="md-nav__link">
        Pandas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-pigeon/" class="md-nav__link">
        Pigeon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-pillow/" class="md-nav__link">
        Pillow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-polars/" class="md-nav__link">
        Polars
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-prodigy/" class="md-nav__link">
        Prodigy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-pycaret/" class="md-nav__link">
        Pycaret
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-pytorch/" class="md-nav__link">
        Pytorch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-pytorch_lightning/" class="md-nav__link">
        Pytorch Lightning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-registry/" class="md-nav__link">
        Registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-s3/" class="md-nav__link">
        S3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-scipy/" class="md-nav__link">
        Scipy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-seldon/" class="md-nav__link">
        Seldon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-sklearn/" class="md-nav__link">
        Sklearn
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-skypilot/" class="md-nav__link">
        Skypilot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-skypilot_aws/" class="md-nav__link">
        Skypilot Aws
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-skypilot_azure/" class="md-nav__link">
        Skypilot Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-skypilot_gcp/" class="md-nav__link">
        Skypilot Gcp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-skypilot_kubernetes/" class="md-nav__link">
        Skypilot Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-skypilot_lambda/" class="md-nav__link">
        Skypilot Lambda
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-slack/" class="md-nav__link">
        Slack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-spark/" class="md-nav__link">
        Spark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-tekton/" class="md-nav__link">
        Tekton
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-tensorboard/" class="md-nav__link">
        Tensorboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-tensorflow/" class="md-nav__link">
        Tensorflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-vllm/" class="md-nav__link">
        Vllm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-wandb/" class="md-nav__link">
        Wandb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-whylogs/" class="md-nav__link">
        Whylogs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-xgboost/" class="md-nav__link">
        Xgboost
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zenml.steps" class="md-nav__link">
    steps
  </a>
  
    <nav class="md-nav" aria-label="steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step" class="md-nav__link">
    base_step
  </a>
  
    <nav class="md-nav" aria-label="base_step">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep" class="md-nav__link">
    BaseStep
  </a>
  
    <nav class="md-nav" aria-label="BaseStep">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.caching_parameters" class="md-nav__link">
    caching_parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.configuration" class="md-nav__link">
    configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.docstring" class="md-nav__link">
    docstring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.enable_cache" class="md-nav__link">
    enable_cache
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.name" class="md-nav__link">
    name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.source_code" class="md-nav__link">
    source_code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.source_object" class="md-nav__link">
    source_object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.__call__" class="md-nav__link">
    __call__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.call_entrypoint" class="md-nav__link">
    call_entrypoint()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.configure" class="md-nav__link">
    configure()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.copy" class="md-nav__link">
    copy()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.entrypoint" class="md-nav__link">
    entrypoint()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.load_from_source" class="md-nav__link">
    load_from_source()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.resolve" class="md-nav__link">
    resolve()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.base_step.BaseStep.with_options" class="md-nav__link">
    with_options()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.decorated_step" class="md-nav__link">
    decorated_step
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils" class="md-nav__link">
    entrypoint_function_utils
  </a>
  
    <nav class="md-nav" aria-label="entrypoint_function_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.EntrypointFunctionDefinition" class="md-nav__link">
    EntrypointFunctionDefinition
  </a>
  
    <nav class="md-nav" aria-label="EntrypointFunctionDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.EntrypointFunctionDefinition.__getnewargs__" class="md-nav__link">
    __getnewargs__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.EntrypointFunctionDefinition.__new__" class="md-nav__link">
    __new__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.EntrypointFunctionDefinition.__repr__" class="md-nav__link">
    __repr__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.EntrypointFunctionDefinition.validate_input" class="md-nav__link">
    validate_input()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.StepArtifact" class="md-nav__link">
    StepArtifact
  </a>
  
    <nav class="md-nav" aria-label="StepArtifact">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.StepArtifact.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.StepArtifact.__iter__" class="md-nav__link">
    __iter__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.validate_entrypoint_function" class="md-nav__link">
    validate_entrypoint_function()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.entrypoint_function_utils.validate_reserved_arguments" class="md-nav__link">
    validate_reserved_arguments()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context" class="md-nav__link">
    step_context
  </a>
  
    <nav class="md-nav" aria-label="step_context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext" class="md-nav__link">
    StepContext
  </a>
  
    <nav class="md-nav" aria-label="StepContext">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.inputs" class="md-nav__link">
    inputs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.model" class="md-nav__link">
    model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.pipeline" class="md-nav__link">
    pipeline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.add_output_metadata" class="md-nav__link">
    add_output_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.add_output_tags" class="md-nav__link">
    add_output_tags()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.get_output_artifact_uri" class="md-nav__link">
    get_output_artifact_uri()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.get_output_materializer" class="md-nav__link">
    get_output_materializer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.get_output_metadata" class="md-nav__link">
    get_output_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContext.get_output_tags" class="md-nav__link">
    get_output_tags()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContextOutput" class="md-nav__link">
    StepContextOutput
  </a>
  
    <nav class="md-nav" aria-label="StepContextOutput">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.StepContextOutput.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_context.get_step_context" class="md-nav__link">
    get_step_context()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_decorator" class="md-nav__link">
    step_decorator
  </a>
  
    <nav class="md-nav" aria-label="step_decorator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_decorator.step" class="md-nav__link">
    step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_invocation" class="md-nav__link">
    step_invocation
  </a>
  
    <nav class="md-nav" aria-label="step_invocation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_invocation.StepInvocation" class="md-nav__link">
    StepInvocation
  </a>
  
    <nav class="md-nav" aria-label="StepInvocation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_invocation.StepInvocation.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.step_invocation.StepInvocation.finalize" class="md-nav__link">
    finalize()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils" class="md-nav__link">
    utils
  </a>
  
    <nav class="md-nav" aria-label="utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.OnlyNoneReturnsVisitor" class="md-nav__link">
    OnlyNoneReturnsVisitor
  </a>
  
    <nav class="md-nav" aria-label="OnlyNoneReturnsVisitor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.OnlyNoneReturnsVisitor.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.OnlyNoneReturnsVisitor.visit_Return" class="md-nav__link">
    visit_Return()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.OutputSignature" class="md-nav__link">
    OutputSignature
  </a>
  
    <nav class="md-nav" aria-label="OutputSignature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.OutputSignature.get_output_types" class="md-nav__link">
    get_output_types()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.ReturnVisitor" class="md-nav__link">
    ReturnVisitor
  </a>
  
    <nav class="md-nav" aria-label="ReturnVisitor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.ReturnVisitor.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.ReturnVisitor.visit_AsyncFunctionDef" class="md-nav__link">
    visit_AsyncFunctionDef()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.ReturnVisitor.visit_FunctionDef" class="md-nav__link">
    visit_FunctionDef()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.TupleReturnVisitor" class="md-nav__link">
    TupleReturnVisitor
  </a>
  
    <nav class="md-nav" aria-label="TupleReturnVisitor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.TupleReturnVisitor.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.TupleReturnVisitor.visit_Return" class="md-nav__link">
    visit_Return()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.get_args" class="md-nav__link">
    get_args()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.get_artifact_config_from_annotation_metadata" class="md-nav__link">
    get_artifact_config_from_annotation_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.has_only_none_returns" class="md-nav__link">
    has_only_none_returns()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.has_tuple_return" class="md-nav__link">
    has_tuple_return()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.log_step_metadata" class="md-nav__link">
    log_step_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.parse_return_type_annotations" class="md-nav__link">
    parse_return_type_annotations()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.resolve_type_annotation" class="md-nav__link">
    resolve_type_annotation()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.steps.utils.run_as_single_step_pipeline" class="md-nav__link">
    run_as_single_step_pipeline()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/zenml-io/zenml/docs/core_code_docs/core-steps.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="steps">Steps</h1>


  <div class="doc doc-object doc-module">



<h2 id="zenml.steps" class="doc doc-heading">
        <code>zenml.steps</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h2>

    <div class="doc doc-contents first">

      <p>Initializer for ZenML steps.</p>
<p>A step is a single piece or stage of a ZenML pipeline. Think of each step as
being one of the nodes of a Directed Acyclic Graph (or DAG). Steps are
responsible for one aspect of processing or interacting with the data /
artifacts in the pipeline.</p>
<p>Conceptually, a Step is a discrete and independent part of a pipeline that is
responsible for one particular aspect of data manipulation inside a ZenML
pipeline.</p>
<p>Steps can be subclassed from the <code>BaseStep</code> class, or used via our <code>@step</code>
decorator.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-module">



<h3 id="zenml.steps.base_step" class="doc doc-heading">
        <code>base_step</code>



</h3>

    <div class="doc doc-contents ">

      <p>Base Step for ZenML.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h4 id="zenml.steps.base_step.BaseStep" class="doc doc-heading">
        <code>
BaseStep        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Abstract base class for all ZenML steps.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/steps/base_step.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseStep</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract base class for all ZenML steps.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enable_cache</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enable_artifact_metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enable_artifact_visualization</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enable_step_logs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">experiment_tracker</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">step_operator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">output_materializers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="s2">&quot;OutputMaterializersSpecification&quot;</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">settings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;SettingsOrDict&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">extra</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">on_failure</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;HookSpecification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">on_success</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;HookSpecification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">retry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">StepRetryConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">substitutions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initializes a step.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: The name of the step.</span>
<span class="sd">            enable_cache: If caching should be enabled for this step.</span>
<span class="sd">            enable_artifact_metadata: If artifact metadata should be enabled</span>
<span class="sd">                for this step.</span>
<span class="sd">            enable_artifact_visualization: If artifact visualization should be</span>
<span class="sd">                enabled for this step.</span>
<span class="sd">            enable_step_logs: Enable step logs for this step.</span>
<span class="sd">            experiment_tracker: The experiment tracker to use for this step.</span>
<span class="sd">            step_operator: The step operator to use for this step.</span>
<span class="sd">            parameters: Function parameters for this step</span>
<span class="sd">            output_materializers: Output materializers for this step. If</span>
<span class="sd">                given as a dict, the keys must be a subset of the output names</span>
<span class="sd">                of this step. If a single value (type or string) is given, the</span>
<span class="sd">                materializer will be used for all outputs.</span>
<span class="sd">            settings: settings for this step.</span>
<span class="sd">            extra: Extra configurations for this step.</span>
<span class="sd">            on_failure: Callback function in event of failure of the step. Can</span>
<span class="sd">                be a function with a single argument of type `BaseException`, or</span>
<span class="sd">                a source path to such a function (e.g. `module.my_function`).</span>
<span class="sd">            on_success: Callback function in event of success of the step. Can</span>
<span class="sd">                be a function with no arguments, or a source path to such a</span>
<span class="sd">                function (e.g. `module.my_function`).</span>
<span class="sd">            model: configuration of the model version in the Model Control Plane.</span>
<span class="sd">            retry: Configuration for retrying the step in case of failure.</span>
<span class="sd">            substitutions: Extra placeholders to use in the name template.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.config.step_configurations</span><span class="w"> </span><span class="kn">import</span> <span class="n">PartialStepConfiguration</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_definition</span> <span class="o">=</span> <span class="n">validate_entrypoint_function</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint</span><span class="p">,</span>
            <span class="n">reserved_arguments</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;after&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">],</span>
        <span class="p">)</span>

        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Step `</span><span class="si">%s</span><span class="s2">`: Caching </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;enabled&quot;</span> <span class="k">if</span> <span class="n">enable_cache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span> <span class="k">else</span> <span class="s2">&quot;disabled&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Step `</span><span class="si">%s</span><span class="s2">`: Artifact metadata </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;enabled&quot;</span> <span class="k">if</span> <span class="n">enable_artifact_metadata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span> <span class="k">else</span> <span class="s2">&quot;disabled&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Step `</span><span class="si">%s</span><span class="s2">`: Artifact visualization </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;enabled&quot;</span>
            <span class="k">if</span> <span class="n">enable_artifact_visualization</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span>
            <span class="k">else</span> <span class="s2">&quot;disabled&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Step `</span><span class="si">%s</span><span class="s2">`: logs </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;enabled&quot;</span> <span class="k">if</span> <span class="n">enable_step_logs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span> <span class="k">else</span> <span class="s2">&quot;disabled&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Step `</span><span class="si">%s</span><span class="s2">`: Is in Model context </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span>
                <span class="n">name</span><span class="p">,</span>
                <span class="p">{</span>
                    <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_configuration</span> <span class="o">=</span> <span class="n">PartialStepConfiguration</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">enable_cache</span><span class="o">=</span><span class="n">enable_cache</span><span class="p">,</span>
            <span class="n">enable_artifact_metadata</span><span class="o">=</span><span class="n">enable_artifact_metadata</span><span class="p">,</span>
            <span class="n">enable_artifact_visualization</span><span class="o">=</span><span class="n">enable_artifact_visualization</span><span class="p">,</span>
            <span class="n">enable_step_logs</span><span class="o">=</span><span class="n">enable_step_logs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
            <span class="n">experiment_tracker</span><span class="o">=</span><span class="n">experiment_tracker</span><span class="p">,</span>
            <span class="n">step_operator</span><span class="o">=</span><span class="n">step_operator</span><span class="p">,</span>
            <span class="n">output_materializers</span><span class="o">=</span><span class="n">output_materializers</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
            <span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">,</span>
            <span class="n">extra</span><span class="o">=</span><span class="n">extra</span><span class="p">,</span>
            <span class="n">on_failure</span><span class="o">=</span><span class="n">on_failure</span><span class="p">,</span>
            <span class="n">on_success</span><span class="o">=</span><span class="n">on_success</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
            <span class="n">retry</span><span class="o">=</span><span class="n">retry</span><span class="p">,</span>
            <span class="n">substitutions</span><span class="o">=</span><span class="n">substitutions</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">notebook_utils</span><span class="o">.</span><span class="n">try_to_save_notebook_cell_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_object</span><span class="p">)</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">entrypoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Abstract method for core step logic.</span>

<span class="sd">        Args:</span>
<span class="sd">            *args: Positional arguments passed to the step.</span>
<span class="sd">            **kwargs: Keyword arguments passed to the step.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The output of the step.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load_from_source</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Source</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;BaseStep&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Loads a step from source.</span>

<span class="sd">        Args:</span>
<span class="sd">            source: The path to the step source.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The loaded step.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the source is not a valid step source.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">source_utils</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">BaseStep</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">BaseStep</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid step source.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Source</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resolves the step.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The step source.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">source_utils</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">source_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The source object of this step.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The source object of this step.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">source_code</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The source code of this step.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The source code of this step.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getsource</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_object</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The docstring of this step.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The docstring of this step.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">caching_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Caching parameters for this step.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary containing the caching parameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">CODE_HASH_PARAMETER_NAME</span><span class="p">:</span> <span class="n">source_code_utils</span><span class="o">.</span><span class="n">get_hashed_source_code</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">source_object</span>
            <span class="p">)</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">output</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">output</span><span class="o">.</span><span class="n">materializer_source</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">_materializer_source&quot;</span>
                <span class="n">hash_</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>  <span class="c1"># nosec</span>

                <span class="k">for</span> <span class="n">source</span> <span class="ow">in</span> <span class="n">output</span><span class="o">.</span><span class="n">materializer_source</span><span class="p">:</span>
                    <span class="n">materializer_class</span> <span class="o">=</span> <span class="n">source_utils</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
                    <span class="n">code_hash</span> <span class="o">=</span> <span class="n">source_code_utils</span><span class="o">.</span><span class="n">get_hashed_source_code</span><span class="p">(</span>
                        <span class="n">materializer_class</span>
                    <span class="p">)</span>
                    <span class="n">hash_</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">code_hash</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>

                <span class="n">parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">hash_</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">parameters</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_call_args</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span>
        <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;StepArtifact&quot;</span><span class="p">],</span>
        <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;ExternalArtifact&quot;</span><span class="p">,</span> <span class="s2">&quot;ArtifactVersionResponse&quot;</span><span class="p">]],</span>
        <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ModelVersionDataLazyLoader&quot;</span><span class="p">],</span>
        <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ClientLazyLoader&quot;</span><span class="p">],</span>
        <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parses the call args for the step entrypoint.</span>

<span class="sd">        Args:</span>
<span class="sd">            *args: Entrypoint function arguments.</span>
<span class="sd">            **kwargs: Entrypoint function keyword arguments.</span>

<span class="sd">        Raises:</span>
<span class="sd">            StepInterfaceError: If invalid function arguments were passed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The artifacts, external artifacts, model version artifacts/metadata and parameters for the step.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.artifacts.external_artifact</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExternalArtifact</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.metadata.lazy_load</span><span class="w"> </span><span class="kn">import</span> <span class="n">LazyRunMetadataResponse</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.model.lazy_load</span><span class="w"> </span><span class="kn">import</span> <span class="n">ModelVersionDataLazyLoader</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.models.v2.core.artifact_version</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
            <span class="n">ArtifactVersionResponse</span><span class="p">,</span>
            <span class="n">LazyArtifactVersionResponse</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">signature</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entrypoint</span><span class="p">,</span> <span class="n">follow_wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">bound_args</span> <span class="o">=</span> <span class="n">signature</span><span class="o">.</span><span class="n">bind_partial</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">StepInterfaceError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Wrong arguments when calling step &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="n">artifacts</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">external_artifacts</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;ExternalArtifact&quot;</span><span class="p">,</span> <span class="s2">&quot;ArtifactVersionResponse&quot;</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">model_artifacts_or_metadata</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">client_lazy_loaders</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">default_parameters</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">bound_args</span><span class="o">.</span><span class="n">arguments</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_definition</span><span class="o">.</span><span class="n">validate_input</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">StepArtifact</span><span class="p">):</span>
                <span class="n">artifacts</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">parameters</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="s2">&quot;Got duplicate value for step input </span><span class="si">%s</span><span class="s2">, using value &quot;</span>
                        <span class="s2">&quot;provided as artifact.&quot;</span><span class="p">,</span>
                        <span class="n">key</span><span class="p">,</span>
                    <span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ExternalArtifact</span><span class="p">):</span>
                <span class="n">external_artifacts</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                    <span class="c1"># If the external artifact references a fixed artifact by</span>
                    <span class="c1"># ID, caching behaves as expected.</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="s2">&quot;Using an external artifact as step input currently &quot;</span>
                        <span class="s2">&quot;invalidates caching for the step and all downstream &quot;</span>
                        <span class="s2">&quot;steps. Future releases will introduce hashing of &quot;</span>
                        <span class="s2">&quot;artifacts which will improve this behavior.&quot;</span>
                    <span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">LazyArtifactVersionResponse</span><span class="p">):</span>
                <span class="n">model_artifacts_or_metadata</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">ModelVersionDataLazyLoader</span><span class="p">(</span>
                    <span class="n">model_name</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">lazy_load_model_name</span><span class="p">,</span>
                    <span class="n">model_version</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">lazy_load_model_version</span><span class="p">,</span>
                    <span class="n">artifact_name</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">lazy_load_name</span><span class="p">,</span>
                    <span class="n">artifact_version</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">lazy_load_version</span><span class="p">,</span>
                    <span class="n">metadata_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ArtifactVersionResponse</span><span class="p">):</span>
                <span class="n">external_artifacts</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">LazyRunMetadataResponse</span><span class="p">):</span>
                <span class="n">model_artifacts_or_metadata</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">ModelVersionDataLazyLoader</span><span class="p">(</span>
                    <span class="n">model_name</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">lazy_load_model_name</span><span class="p">,</span>
                    <span class="n">model_version</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">lazy_load_model_version</span><span class="p">,</span>
                    <span class="n">artifact_name</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">lazy_load_artifact_name</span><span class="p">,</span>
                    <span class="n">artifact_version</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">lazy_load_artifact_version</span><span class="p">,</span>
                    <span class="n">metadata_name</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">lazy_load_metadata_name</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ClientLazyLoader</span><span class="p">):</span>
                <span class="n">client_lazy_loaders</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="c1"># Above we iterated over the provided arguments which should overwrite</span>
        <span class="c1"># any parameters previously defined on the step instance. Now we apply</span>
        <span class="c1"># the default values on the entrypoint function and add those as</span>
        <span class="c1"># parameters for any argument that has no value yet. If we were to do</span>
        <span class="c1"># that in the above loop, we would overwrite previously configured</span>
        <span class="c1"># parameters with the default values.</span>
        <span class="n">bound_args</span><span class="o">.</span><span class="n">apply_defaults</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">bound_args</span><span class="o">.</span><span class="n">arguments</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_definition</span><span class="o">.</span><span class="n">validate_input</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">artifacts</span>
                <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">external_artifacts</span>
                <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">model_artifacts_or_metadata</span>
                <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">parameters</span>
                <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">client_lazy_loaders</span>
            <span class="p">):</span>
                <span class="n">default_parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="n">artifacts</span><span class="p">,</span>
            <span class="n">external_artifacts</span><span class="p">,</span>
            <span class="n">model_artifacts_or_metadata</span><span class="p">,</span>
            <span class="n">client_lazy_loaders</span><span class="p">,</span>
            <span class="n">parameters</span><span class="p">,</span>
            <span class="n">default_parameters</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">after</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a call of the step.</span>

<span class="sd">        This method does one of two things:</span>
<span class="sd">        * If there is an active pipeline context, it adds an invocation of the</span>
<span class="sd">          step instance to the pipeline.</span>
<span class="sd">        * If no pipeline is active, it calls the step entrypoint function.</span>

<span class="sd">        Args:</span>
<span class="sd">            *args: Entrypoint function arguments.</span>
<span class="sd">            id: Invocation ID to use.</span>
<span class="sd">            after: Upstream steps for the invocation.</span>
<span class="sd">            **kwargs: Entrypoint function keyword arguments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The outputs of the entrypoint function call.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.pipelines.pipeline_definition</span><span class="w"> </span><span class="kn">import</span> <span class="n">Pipeline</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">Pipeline</span><span class="o">.</span><span class="n">ACTIVE_PIPELINE</span><span class="p">:</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">zenml</span><span class="w"> </span><span class="kn">import</span> <span class="n">constants</span><span class="p">,</span> <span class="n">get_step_context</span>

            <span class="c1"># If the environment variable was set to explicitly not run on the</span>
            <span class="c1"># stack, we do that.</span>
            <span class="n">run_without_stack</span> <span class="o">=</span> <span class="n">handle_bool_env_var</span><span class="p">(</span>
                <span class="n">ENV_ZENML_RUN_SINGLE_STEPS_WITHOUT_STACK</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">run_without_stack</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">call_entrypoint</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">get_step_context</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># We&#39;re currently inside the execution of a different step</span>
                <span class="c1"># -&gt; We don&#39;t want to launch another single step pipeline here,</span>
                <span class="c1"># but instead just call the step function</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">call_entrypoint</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">constants</span><span class="o">.</span><span class="n">SHOULD_PREVENT_PIPELINE_EXECUTION</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;Preventing execution of step &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">return</span>

            <span class="k">return</span> <span class="n">run_as_single_step_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="p">(</span>
            <span class="n">input_artifacts</span><span class="p">,</span>
            <span class="n">external_artifacts</span><span class="p">,</span>
            <span class="n">model_artifacts_or_metadata</span><span class="p">,</span>
            <span class="n">client_lazy_loaders</span><span class="p">,</span>
            <span class="n">parameters</span><span class="p">,</span>
            <span class="n">default_parameters</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_call_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="n">upstream_steps</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">artifact</span><span class="o">.</span><span class="n">invocation_id</span> <span class="k">for</span> <span class="n">artifact</span> <span class="ow">in</span> <span class="n">input_artifacts</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">after</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">upstream_steps</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">after</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">after</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">):</span>
            <span class="n">upstream_steps</span> <span class="o">=</span> <span class="n">upstream_steps</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">after</span><span class="p">)</span>

        <span class="n">invocation_id</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="o">.</span><span class="n">ACTIVE_PIPELINE</span><span class="o">.</span><span class="n">add_step_invocation</span><span class="p">(</span>
            <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">input_artifacts</span><span class="o">=</span><span class="n">input_artifacts</span><span class="p">,</span>
            <span class="n">external_artifacts</span><span class="o">=</span><span class="n">external_artifacts</span><span class="p">,</span>
            <span class="n">model_artifacts_or_metadata</span><span class="o">=</span><span class="n">model_artifacts_or_metadata</span><span class="p">,</span>
            <span class="n">client_lazy_loaders</span><span class="o">=</span><span class="n">client_lazy_loaders</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
            <span class="n">default_parameters</span><span class="o">=</span><span class="n">default_parameters</span><span class="p">,</span>
            <span class="n">upstream_steps</span><span class="o">=</span><span class="n">upstream_steps</span><span class="p">,</span>
            <span class="n">custom_id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
            <span class="n">allow_id_suffix</span><span class="o">=</span><span class="ow">not</span> <span class="nb">id</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">outputs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_definition</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">StepArtifact</span><span class="p">(</span>
                <span class="n">invocation_id</span><span class="o">=</span><span class="n">invocation_id</span><span class="p">,</span>
                <span class="n">output_name</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                <span class="n">annotation</span><span class="o">=</span><span class="n">annotation</span><span class="p">,</span>
                <span class="n">pipeline</span><span class="o">=</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">ACTIVE_PIPELINE</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">outputs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">outputs</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">call_entrypoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calls the entrypoint function of the step.</span>

<span class="sd">        Args:</span>
<span class="sd">            *args: Entrypoint function arguments.</span>
<span class="sd">            **kwargs: Entrypoint function keyword arguments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The return value of the entrypoint function.</span>

<span class="sd">        Raises:</span>
<span class="sd">            StepInterfaceError: If the arguments to the entrypoint function are</span>
<span class="sd">                invalid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">validated_args</span> <span class="o">=</span> <span class="n">pydantic_utils</span><span class="o">.</span><span class="n">validate_function_args</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint</span><span class="p">,</span>
                <span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                <span class="o">*</span><span class="n">args</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">StepInterfaceError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid step function entrypoint arguments. Check out the &quot;</span>
                <span class="s2">&quot;pydantic error above for more details.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint</span><span class="p">(</span><span class="o">**</span><span class="n">validated_args</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The name of the step.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The name of the step.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">name</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">enable_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;If caching is enabled for the step.</span>

<span class="sd">        Returns:</span>
<span class="sd">            If caching is enabled for the step.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">enable_cache</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PartialStepConfiguration&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The configuration of the step.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The configuration of the step.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configuration</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span>
        <span class="n">enable_cache</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enable_artifact_metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enable_artifact_visualization</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enable_step_logs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">experiment_tracker</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">step_operator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">output_materializers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="s2">&quot;OutputMaterializersSpecification&quot;</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">settings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;SettingsOrDict&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">extra</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">on_failure</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;HookSpecification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">on_success</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;HookSpecification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">merge</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">retry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">StepRetryConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">substitutions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Configures the step.</span>

<span class="sd">        Configuration merging example:</span>
<span class="sd">        * `merge==True`:</span>
<span class="sd">            step.configure(extra={&quot;key1&quot;: 1})</span>
<span class="sd">            step.configure(extra={&quot;key2&quot;: 2}, merge=True)</span>
<span class="sd">            step.configuration.extra # {&quot;key1&quot;: 1, &quot;key2&quot;: 2}</span>
<span class="sd">        * `merge==False`:</span>
<span class="sd">            step.configure(extra={&quot;key1&quot;: 1})</span>
<span class="sd">            step.configure(extra={&quot;key2&quot;: 2}, merge=False)</span>
<span class="sd">            step.configuration.extra # {&quot;key2&quot;: 2}</span>

<span class="sd">        Args:</span>
<span class="sd">            enable_cache: If caching should be enabled for this step.</span>
<span class="sd">            enable_artifact_metadata: If artifact metadata should be enabled</span>
<span class="sd">                for this step.</span>
<span class="sd">            enable_artifact_visualization: If artifact visualization should be</span>
<span class="sd">                enabled for this step.</span>
<span class="sd">            enable_step_logs: If step logs should be enabled for this step.</span>
<span class="sd">            experiment_tracker: The experiment tracker to use for this step.</span>
<span class="sd">            step_operator: The step operator to use for this step.</span>
<span class="sd">            parameters: Function parameters for this step</span>
<span class="sd">            output_materializers: Output materializers for this step. If</span>
<span class="sd">                given as a dict, the keys must be a subset of the output names</span>
<span class="sd">                of this step. If a single value (type or string) is given, the</span>
<span class="sd">                materializer will be used for all outputs.</span>
<span class="sd">            settings: settings for this step.</span>
<span class="sd">            extra: Extra configurations for this step.</span>
<span class="sd">            on_failure: Callback function in event of failure of the step. Can</span>
<span class="sd">                be a function with a single argument of type `BaseException`, or</span>
<span class="sd">                a source path to such a function (e.g. `module.my_function`).</span>
<span class="sd">            on_success: Callback function in event of success of the step. Can</span>
<span class="sd">                be a function with no arguments, or a source path to such a</span>
<span class="sd">                function (e.g. `module.my_function`).</span>
<span class="sd">            model: configuration of the model version in the Model Control Plane.</span>
<span class="sd">            merge: If `True`, will merge the given dictionary configurations</span>
<span class="sd">                like `parameters` and `settings` with existing</span>
<span class="sd">                configurations. If `False` the given configurations will</span>
<span class="sd">                overwrite all existing ones. See the general description of this</span>
<span class="sd">                method for an example.</span>
<span class="sd">            retry: Configuration for retrying the step in case of failure.</span>
<span class="sd">            substitutions: Extra placeholders to use in the name template.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The step instance that this method was called on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.config.step_configurations</span><span class="w"> </span><span class="kn">import</span> <span class="n">StepConfigurationUpdate</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.hooks.hook_validators</span><span class="w"> </span><span class="kn">import</span> <span class="n">resolve_and_validate_hook</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">_resolve_if_necessary</span><span class="p">(</span>
            <span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Source</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Source</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">Source</span><span class="o">.</span><span class="n">from_import_path</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Source</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">source_utils</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">_convert_to_tuple</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Source</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">(</span><span class="n">_resolve_if_necessary</span><span class="p">(</span><span class="n">value</span><span class="p">),)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">_resolve_if_necessary</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="p">)</span>

        <span class="n">outputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Source</span><span class="p">,</span> <span class="o">...</span><span class="p">]]]</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
        <span class="n">allowed_output_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_definition</span><span class="o">.</span><span class="n">outputs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">output_materializers</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">output_materializers</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
                <span class="n">sources</span> <span class="o">=</span> <span class="n">_convert_to_tuple</span><span class="p">(</span><span class="n">output_materializers</span><span class="p">)</span>
                <span class="n">output_materializers</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="n">output_name</span><span class="p">:</span> <span class="n">sources</span>
                    <span class="k">for</span> <span class="n">output_name</span> <span class="ow">in</span> <span class="n">allowed_output_names</span>
                <span class="p">}</span>

            <span class="k">for</span> <span class="n">output_name</span><span class="p">,</span> <span class="n">materializer</span> <span class="ow">in</span> <span class="n">output_materializers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">sources</span> <span class="o">=</span> <span class="n">_convert_to_tuple</span><span class="p">(</span><span class="n">materializer</span><span class="p">)</span>
                <span class="n">outputs</span><span class="p">[</span><span class="n">output_name</span><span class="p">][</span><span class="s2">&quot;materializer_source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sources</span>

        <span class="n">failure_hook_source</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">on_failure</span><span class="p">:</span>
            <span class="c1"># string of on_failure hook function to be used for this step</span>
            <span class="n">failure_hook_source</span> <span class="o">=</span> <span class="n">resolve_and_validate_hook</span><span class="p">(</span><span class="n">on_failure</span><span class="p">)</span>

        <span class="n">success_hook_source</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">on_success</span><span class="p">:</span>
            <span class="c1"># string of on_success hook function to be used for this step</span>
            <span class="n">success_hook_source</span> <span class="o">=</span> <span class="n">resolve_and_validate_hook</span><span class="p">(</span><span class="n">on_success</span><span class="p">)</span>

        <span class="n">values</span> <span class="o">=</span> <span class="n">dict_utils</span><span class="o">.</span><span class="n">remove_none_values</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;enable_cache&quot;</span><span class="p">:</span> <span class="n">enable_cache</span><span class="p">,</span>
                <span class="s2">&quot;enable_artifact_metadata&quot;</span><span class="p">:</span> <span class="n">enable_artifact_metadata</span><span class="p">,</span>
                <span class="s2">&quot;enable_artifact_visualization&quot;</span><span class="p">:</span> <span class="n">enable_artifact_visualization</span><span class="p">,</span>
                <span class="s2">&quot;enable_step_logs&quot;</span><span class="p">:</span> <span class="n">enable_step_logs</span><span class="p">,</span>
                <span class="s2">&quot;experiment_tracker&quot;</span><span class="p">:</span> <span class="n">experiment_tracker</span><span class="p">,</span>
                <span class="s2">&quot;step_operator&quot;</span><span class="p">:</span> <span class="n">step_operator</span><span class="p">,</span>
                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="n">parameters</span><span class="p">,</span>
                <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="n">settings</span><span class="p">,</span>
                <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="n">outputs</span> <span class="ow">or</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;extra&quot;</span><span class="p">:</span> <span class="n">extra</span><span class="p">,</span>
                <span class="s2">&quot;failure_hook_source&quot;</span><span class="p">:</span> <span class="n">failure_hook_source</span><span class="p">,</span>
                <span class="s2">&quot;success_hook_source&quot;</span><span class="p">:</span> <span class="n">success_hook_source</span><span class="p">,</span>
                <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">model</span><span class="p">,</span>
                <span class="s2">&quot;retry&quot;</span><span class="p">:</span> <span class="n">retry</span><span class="p">,</span>
                <span class="s2">&quot;substitutions&quot;</span><span class="p">:</span> <span class="n">substitutions</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">StepConfigurationUpdate</span><span class="p">(</span><span class="o">**</span><span class="n">values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_configuration</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">merge</span><span class="o">=</span><span class="n">merge</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">with_options</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">enable_cache</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enable_artifact_metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enable_artifact_visualization</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enable_step_logs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">experiment_tracker</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">step_operator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">output_materializers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="s2">&quot;OutputMaterializersSpecification&quot;</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">settings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;SettingsOrDict&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">extra</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">on_failure</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;HookSpecification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">on_success</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;HookSpecification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">merge</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">substitutions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BaseStep&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Copies the step and applies the given configurations.</span>

<span class="sd">        Args:</span>
<span class="sd">            enable_cache: If caching should be enabled for this step.</span>
<span class="sd">            enable_artifact_metadata: If artifact metadata should be enabled</span>
<span class="sd">                for this step.</span>
<span class="sd">            enable_artifact_visualization: If artifact visualization should be</span>
<span class="sd">                enabled for this step.</span>
<span class="sd">            enable_step_logs: If step logs should be enabled for this step.</span>
<span class="sd">            experiment_tracker: The experiment tracker to use for this step.</span>
<span class="sd">            step_operator: The step operator to use for this step.</span>
<span class="sd">            parameters: Function parameters for this step</span>
<span class="sd">            output_materializers: Output materializers for this step. If</span>
<span class="sd">                given as a dict, the keys must be a subset of the output names</span>
<span class="sd">                of this step. If a single value (type or string) is given, the</span>
<span class="sd">                materializer will be used for all outputs.</span>
<span class="sd">            settings: settings for this step.</span>
<span class="sd">            extra: Extra configurations for this step.</span>
<span class="sd">            on_failure: Callback function in event of failure of the step. Can</span>
<span class="sd">                be a function with a single argument of type `BaseException`, or</span>
<span class="sd">                a source path to such a function (e.g. `module.my_function`).</span>
<span class="sd">            on_success: Callback function in event of success of the step. Can</span>
<span class="sd">                be a function with no arguments, or a source path to such a</span>
<span class="sd">                function (e.g. `module.my_function`).</span>
<span class="sd">            model: configuration of the model version in the Model Control Plane.</span>
<span class="sd">            merge: If `True`, will merge the given dictionary configurations</span>
<span class="sd">                like `parameters` and `settings` with existing</span>
<span class="sd">                configurations. If `False` the given configurations will</span>
<span class="sd">                overwrite all existing ones. See the general description of this</span>
<span class="sd">                method for an example.</span>
<span class="sd">            substitutions: Extra placeholders for the step name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The copied step instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">step_copy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">step_copy</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
            <span class="n">enable_cache</span><span class="o">=</span><span class="n">enable_cache</span><span class="p">,</span>
            <span class="n">enable_artifact_metadata</span><span class="o">=</span><span class="n">enable_artifact_metadata</span><span class="p">,</span>
            <span class="n">enable_artifact_visualization</span><span class="o">=</span><span class="n">enable_artifact_visualization</span><span class="p">,</span>
            <span class="n">enable_step_logs</span><span class="o">=</span><span class="n">enable_step_logs</span><span class="p">,</span>
            <span class="n">experiment_tracker</span><span class="o">=</span><span class="n">experiment_tracker</span><span class="p">,</span>
            <span class="n">step_operator</span><span class="o">=</span><span class="n">step_operator</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
            <span class="n">output_materializers</span><span class="o">=</span><span class="n">output_materializers</span><span class="p">,</span>
            <span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">,</span>
            <span class="n">extra</span><span class="o">=</span><span class="n">extra</span><span class="p">,</span>
            <span class="n">on_failure</span><span class="o">=</span><span class="n">on_failure</span><span class="p">,</span>
            <span class="n">on_success</span><span class="o">=</span><span class="n">on_success</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
            <span class="n">merge</span><span class="o">=</span><span class="n">merge</span><span class="p">,</span>
            <span class="n">substitutions</span><span class="o">=</span><span class="n">substitutions</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">step_copy</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BaseStep&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Copies the step.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The step copy.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_apply_configuration</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="s2">&quot;StepConfigurationUpdate&quot;</span><span class="p">,</span>
        <span class="n">merge</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">runtime_parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies an update to the step configuration.</span>

<span class="sd">        Args:</span>
<span class="sd">            config: The configuration update.</span>
<span class="sd">            runtime_parameters: Dictionary of parameters passed to a step from runtime</span>
<span class="sd">            merge: Whether to merge the updates with the existing configuration</span>
<span class="sd">                or not. See the `BaseStep.configure(...)` method for a detailed</span>
<span class="sd">                explanation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_configuration</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">runtime_parameters</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_configuration</span> <span class="o">=</span> <span class="n">pydantic_utils</span><span class="o">.</span><span class="n">update_model</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_configuration</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="n">merge</span>
        <span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Updated step configuration:&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_configuration</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_configuration</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="s2">&quot;StepConfigurationUpdate&quot;</span><span class="p">,</span>
        <span class="n">runtime_parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validates a configuration update.</span>

<span class="sd">        Args:</span>
<span class="sd">            config: The configuration update to validate.</span>
<span class="sd">            runtime_parameters: Dictionary of parameters passed to a step from runtime</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">settings_utils</span><span class="o">.</span><span class="n">validate_setting_keys</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_function_parameters</span><span class="p">(</span>
            <span class="n">parameters</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="n">runtime_parameters</span><span class="o">=</span><span class="n">runtime_parameters</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_outputs</span><span class="p">(</span><span class="n">outputs</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">outputs</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_function_parameters</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">runtime_parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validates step function parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            parameters: The parameters to validate.</span>
<span class="sd">            runtime_parameters: Dictionary of parameters passed to a step from runtime</span>

<span class="sd">        Raises:</span>
<span class="sd">            StepInterfaceError: If the step requires no function parameters but</span>
<span class="sd">                parameters were configured.</span>
<span class="sd">            RuntimeError: If the step has parameters configured differently in</span>
<span class="sd">                configuration file and code.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">parameters</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">conflicting_parameters</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">runtime_parameters</span><span class="p">:</span>
                <span class="n">runtime_value</span> <span class="o">=</span> <span class="n">runtime_parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">runtime_value</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
                    <span class="n">conflicting_parameters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">runtime_value</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_definition</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_definition</span><span class="o">.</span><span class="n">validate_input</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">StepInterfaceError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Unable to find parameter &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; in step function &quot;</span>
                    <span class="s2">&quot;signature.&quot;</span>
                <span class="p">)</span>
        <span class="k">if</span> <span class="n">conflicting_parameters</span><span class="p">:</span>
            <span class="n">is_plural</span> <span class="o">=</span> <span class="s2">&quot;s&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">conflicting_parameters</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Configured parameter</span><span class="si">{</span><span class="n">is_plural</span><span class="si">}</span><span class="s2"> for the step &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; conflict</span><span class="si">{</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">is_plural</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;s&#39;</span><span class="si">}</span><span class="s2"> with parameter</span><span class="si">{</span><span class="n">is_plural</span><span class="si">}</span><span class="s2"> passed in runtime:</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">conflicting_parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">`: config=`</span><span class="si">{</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">` | runtime=`</span><span class="si">{</span><span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">`</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;&quot;&quot;This happens, if you define values for step parameters in configuration file and pass same parameters from the code. Example:</span>
<span class="s2">```</span>
<span class="s2"># config.yaml</span>

<span class="s2">steps:</span>
<span class="s2">    step_name:</span>
<span class="s2">        parameters:</span>
<span class="s2">            param_name: value1</span>


<span class="s2"># pipeline.py</span>

<span class="s2">@pipeline</span>
<span class="s2">def pipeline_():</span>
<span class="s2">    step_name(param_name=&quot;other_value&quot;)</span>
<span class="s2">```</span>
<span class="s2">To avoid this consider setting step parameters only in one place (config or code).</span>
<span class="s2">&quot;&quot;&quot;</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_outputs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">outputs</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;PartialArtifactConfiguration&quot;</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validates the step output configuration.</span>

<span class="sd">        Args:</span>
<span class="sd">            outputs: The configured step outputs.</span>

<span class="sd">        Raises:</span>
<span class="sd">            StepInterfaceError: If an output for a non-existent name is</span>
<span class="sd">                configured of an output artifact/materializer source does not</span>
<span class="sd">                resolve to the correct class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">allowed_output_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_definition</span><span class="o">.</span><span class="n">outputs</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">output_name</span><span class="p">,</span> <span class="n">output</span> <span class="ow">in</span> <span class="n">outputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">output_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_output_names</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">StepInterfaceError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Got unexpected materializers for non-existent &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;output &#39;</span><span class="si">{</span><span class="n">output_name</span><span class="si">}</span><span class="s2">&#39; in step &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;. &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;Only materializers for the outputs &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">allowed_output_names</span><span class="si">}</span><span class="s2"> of this step can&quot;</span>
                    <span class="sa">f</span><span class="s2">&quot; be registered.&quot;</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">output</span><span class="o">.</span><span class="n">materializer_source</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">source</span> <span class="ow">in</span> <span class="n">output</span><span class="o">.</span><span class="n">materializer_source</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">source_utils</span><span class="o">.</span><span class="n">validate_source_class</span><span class="p">(</span>
                        <span class="n">source</span><span class="p">,</span> <span class="n">expected_class</span><span class="o">=</span><span class="n">BaseMaterializer</span>
                    <span class="p">):</span>
                        <span class="k">raise</span> <span class="n">StepInterfaceError</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Materializer source `</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2">` &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;for output &#39;</span><span class="si">{</span><span class="n">output_name</span><span class="si">}</span><span class="s2">&#39; of step &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                            <span class="s2">&quot;does not resolve to a `BaseMaterializer` subclass.&quot;</span>
                        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_inputs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">input_artifacts</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;StepArtifact&quot;</span><span class="p">],</span>
        <span class="n">external_artifacts</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ExternalArtifactConfiguration&quot;</span><span class="p">],</span>
        <span class="n">model_artifacts_or_metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ModelVersionDataLazyLoader&quot;</span><span class="p">],</span>
        <span class="n">client_lazy_loaders</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ClientLazyLoader&quot;</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validates the step inputs.</span>

<span class="sd">        This method makes sure that all inputs are provided either as an</span>
<span class="sd">        artifact or parameter.</span>

<span class="sd">        Args:</span>
<span class="sd">            input_artifacts: The input artifacts.</span>
<span class="sd">            external_artifacts: The external input artifacts.</span>
<span class="sd">            model_artifacts_or_metadata: The model artifacts or metadata.</span>
<span class="sd">            client_lazy_loaders: The client lazy loaders.</span>

<span class="sd">        Raises:</span>
<span class="sd">            StepInterfaceError: If an entrypoint input is missing.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_definition</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">key</span> <span class="ow">in</span> <span class="n">input_artifacts</span>
                <span class="ow">or</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">parameters</span>
                <span class="ow">or</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">external_artifacts</span>
                <span class="ow">or</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">model_artifacts_or_metadata</span>
                <span class="ow">or</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">client_lazy_loaders</span>
            <span class="p">):</span>
                <span class="k">continue</span>
            <span class="k">raise</span> <span class="n">StepInterfaceError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Missing entrypoint input &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; in step &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_finalize_configuration</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">input_artifacts</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;StepArtifact&quot;</span><span class="p">],</span>
        <span class="n">external_artifacts</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ExternalArtifactConfiguration&quot;</span><span class="p">],</span>
        <span class="n">model_artifacts_or_metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ModelVersionDataLazyLoader&quot;</span><span class="p">],</span>
        <span class="n">client_lazy_loaders</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ClientLazyLoader&quot;</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;StepConfiguration&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Finalizes the configuration after the step was called.</span>

<span class="sd">        Once the step was called, we know the outputs of previous steps</span>
<span class="sd">        and that no additional user configurations will be made. That means</span>
<span class="sd">        we can now collect the remaining artifact and materializer types</span>
<span class="sd">        as well as check for the completeness of the step function parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            input_artifacts: The input artifacts of this step.</span>
<span class="sd">            external_artifacts: The external artifacts of this step.</span>
<span class="sd">            model_artifacts_or_metadata: The model artifacts or metadata of</span>
<span class="sd">                this step.</span>
<span class="sd">            client_lazy_loaders: The client lazy loaders of this step.</span>

<span class="sd">        Raises:</span>
<span class="sd">            StepInterfaceError: If explicit materializers were specified for an</span>
<span class="sd">                output but they do not work for the data type(s) defined by</span>
<span class="sd">                the type annotation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The finalized step configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.config.step_configurations</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
            <span class="n">PartialArtifactConfiguration</span><span class="p">,</span>
            <span class="n">StepConfiguration</span><span class="p">,</span>
            <span class="n">StepConfigurationUpdate</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">outputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>

        <span class="k">for</span> <span class="p">(</span>
            <span class="n">output_name</span><span class="p">,</span>
            <span class="n">output_annotation</span><span class="p">,</span>
        <span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_definition</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configuration</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">output_name</span><span class="p">,</span> <span class="n">PartialArtifactConfiguration</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">artifact_config</span> <span class="o">:=</span> <span class="n">output_annotation</span><span class="o">.</span><span class="n">artifact_config</span><span class="p">:</span>
                <span class="n">outputs</span><span class="p">[</span><span class="n">output_name</span><span class="p">][</span><span class="s2">&quot;artifact_config&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">artifact_config</span>

            <span class="k">if</span> <span class="n">output</span><span class="o">.</span><span class="n">materializer_source</span><span class="p">:</span>
                <span class="c1"># The materializer source was configured by the user. We</span>
                <span class="c1"># validate that their configured materializer supports the</span>
                <span class="c1"># output type. If the output annotation is a Union, we check</span>
                <span class="c1"># that at least one of the specified materializers works with at</span>
                <span class="c1"># least one of the types in the Union. If that&#39;s not the case,</span>
                <span class="c1"># it would be a guaranteed failure at runtime and we fail early</span>
                <span class="c1"># here.</span>
                <span class="k">if</span> <span class="n">output_annotation</span><span class="o">.</span><span class="n">resolved_annotation</span> <span class="ow">is</span> <span class="n">Any</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">materializer_classes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseMaterializer&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">source_utils</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">materializer_source</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">materializer_source</span> <span class="ow">in</span> <span class="n">output</span><span class="o">.</span><span class="n">materializer_source</span>
                <span class="p">]</span>

                <span class="k">for</span> <span class="n">data_type</span> <span class="ow">in</span> <span class="n">output_annotation</span><span class="o">.</span><span class="n">get_output_types</span><span class="p">():</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">materializer_utils</span><span class="o">.</span><span class="n">select_materializer</span><span class="p">(</span>
                            <span class="n">data_type</span><span class="o">=</span><span class="n">data_type</span><span class="p">,</span>
                            <span class="n">materializer_classes</span><span class="o">=</span><span class="n">materializer_classes</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="k">break</span>
                    <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
                        <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">materializer_strings</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="n">materializer_source</span><span class="o">.</span><span class="n">import_path</span>
                        <span class="k">for</span> <span class="n">materializer_source</span> <span class="ow">in</span> <span class="n">output</span><span class="o">.</span><span class="n">materializer_source</span>
                    <span class="p">]</span>
                    <span class="k">raise</span> <span class="n">StepInterfaceError</span><span class="p">(</span>
                        <span class="s2">&quot;Invalid materializers specified for output &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">output_name</span><span class="si">}</span><span class="s2"> of step </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">. None of the &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;materializers (</span><span class="si">{</span><span class="n">materializer_strings</span><span class="si">}</span><span class="s2">) are &quot;</span>
                        <span class="s2">&quot;able to save or load data of the type that is defined &quot;</span>
                        <span class="s2">&quot;for the output &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">output_annotation</span><span class="o">.</span><span class="n">resolved_annotation</span><span class="si">}</span><span class="s2">).&quot;</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">output_annotation</span><span class="o">.</span><span class="n">resolved_annotation</span> <span class="ow">is</span> <span class="n">Any</span><span class="p">:</span>
                    <span class="n">outputs</span><span class="p">[</span><span class="n">output_name</span><span class="p">][</span><span class="s2">&quot;materializer_source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">()</span>
                    <span class="n">outputs</span><span class="p">[</span><span class="n">output_name</span><span class="p">][</span><span class="s2">&quot;default_materializer_source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">source_utils</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span>
                            <span class="n">materializer_registry</span><span class="o">.</span><span class="n">get_default_materializer</span><span class="p">()</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                    <span class="k">continue</span>

                <span class="n">materializer_sources</span> <span class="o">=</span> <span class="p">[]</span>

                <span class="k">for</span> <span class="n">output_type</span> <span class="ow">in</span> <span class="n">output_annotation</span><span class="o">.</span><span class="n">get_output_types</span><span class="p">():</span>
                    <span class="n">materializer_class</span> <span class="o">=</span> <span class="n">materializer_registry</span><span class="p">[</span><span class="n">output_type</span><span class="p">]</span>
                    <span class="n">materializer_sources</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">source_utils</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">materializer_class</span><span class="p">)</span>
                    <span class="p">)</span>

                <span class="n">outputs</span><span class="p">[</span><span class="n">output_name</span><span class="p">][</span><span class="s2">&quot;materializer_source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
                    <span class="n">materializer_sources</span>
                <span class="p">)</span>

        <span class="n">parameters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finalize_parameters</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span> <span class="n">merge</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_inputs</span><span class="p">(</span>
            <span class="n">input_artifacts</span><span class="o">=</span><span class="n">input_artifacts</span><span class="p">,</span>
            <span class="n">external_artifacts</span><span class="o">=</span><span class="n">external_artifacts</span><span class="p">,</span>
            <span class="n">model_artifacts_or_metadata</span><span class="o">=</span><span class="n">model_artifacts_or_metadata</span><span class="p">,</span>
            <span class="n">client_lazy_loaders</span><span class="o">=</span><span class="n">client_lazy_loaders</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">values</span> <span class="o">=</span> <span class="n">dict_utils</span><span class="o">.</span><span class="n">remove_none_values</span><span class="p">({</span><span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="n">outputs</span> <span class="ow">or</span> <span class="kc">None</span><span class="p">})</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">StepConfigurationUpdate</span><span class="p">(</span><span class="o">**</span><span class="n">values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_configuration</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_configuration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configuration</span><span class="o">.</span><span class="n">model_copy</span><span class="p">(</span>
            <span class="n">update</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;caching_parameters&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">caching_parameters</span><span class="p">,</span>
                <span class="s2">&quot;external_input_artifacts&quot;</span><span class="p">:</span> <span class="n">external_artifacts</span><span class="p">,</span>
                <span class="s2">&quot;model_artifacts_or_metadata&quot;</span><span class="p">:</span> <span class="n">model_artifacts_or_metadata</span><span class="p">,</span>
                <span class="s2">&quot;client_lazy_loaders&quot;</span><span class="p">:</span> <span class="n">client_lazy_loaders</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">StepConfiguration</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_configuration</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_finalize_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Finalizes the config parameters for running this step.</span>

<span class="sd">        Returns:</span>
<span class="sd">            All parameter values for running this step.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_definition</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">annotation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_definition</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">annotation</span>
            <span class="n">annotation</span> <span class="o">=</span> <span class="n">resolve_type_annotation</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span>
                <span class="n">annotation</span><span class="p">,</span> <span class="n">BaseModel</span>
            <span class="p">):</span>
                <span class="c1"># Make sure we have all necessary values to instantiate the</span>
                <span class="c1"># pydantic model later</span>
                <span class="n">model</span> <span class="o">=</span> <span class="n">annotation</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
                <span class="n">params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">return</span> <span class="n">params</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="zenml.steps.base_step.BaseStep.caching_parameters" class="doc doc-heading">
<code class="highlight language-python"><span class="n">caching_parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Caching parameters for this step.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A dictionary containing the caching parameters</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zenml.steps.base_step.BaseStep.configuration" class="doc doc-heading">
<code class="highlight language-python"><span class="n">configuration</span><span class="p">:</span> <span class="n">PartialStepConfiguration</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>The configuration of the step.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>PartialStepConfiguration</code></td>
      <td><p>The configuration of the step.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zenml.steps.base_step.BaseStep.docstring" class="doc doc-heading">
<code class="highlight language-python"><span class="n">docstring</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>The docstring of this step.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>The docstring of this step.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zenml.steps.base_step.BaseStep.enable_cache" class="doc doc-heading">
<code class="highlight language-python"><span class="n">enable_cache</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>If caching is enabled for the step.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[bool]</code></td>
      <td><p>If caching is enabled for the step.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zenml.steps.base_step.BaseStep.name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>The name of the step.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The name of the step.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zenml.steps.base_step.BaseStep.source_code" class="doc doc-heading">
<code class="highlight language-python"><span class="n">source_code</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>The source code of this step.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The source code of this step.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zenml.steps.base_step.BaseStep.source_object" class="doc doc-heading">
<code class="highlight language-python"><span class="n">source_object</span><span class="p">:</span> <span class="n">Any</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>The source object of this step.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>The source object of this step.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>






  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.base_step.BaseStep.__call__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Handle a call of the step.</p>
<p>This method does one of two things:
* If there is an active pipeline context, it adds an invocation of the
  step instance to the pipeline.
* If no pipeline is active, it calls the step entrypoint function.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>*args</code></td>
        <td><code>Any</code></td>
        <td><p>Entrypoint function arguments.</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>id</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Invocation ID to use.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>after</code></td>
        <td><code>Union[str, Sequence[str]]</code></td>
        <td><p>Upstream steps for the invocation.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Entrypoint function keyword arguments.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>The outputs of the entrypoint function call.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/base_step.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">after</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a call of the step.</span>

<span class="sd">    This method does one of two things:</span>
<span class="sd">    * If there is an active pipeline context, it adds an invocation of the</span>
<span class="sd">      step instance to the pipeline.</span>
<span class="sd">    * If no pipeline is active, it calls the step entrypoint function.</span>

<span class="sd">    Args:</span>
<span class="sd">        *args: Entrypoint function arguments.</span>
<span class="sd">        id: Invocation ID to use.</span>
<span class="sd">        after: Upstream steps for the invocation.</span>
<span class="sd">        **kwargs: Entrypoint function keyword arguments.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The outputs of the entrypoint function call.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.pipelines.pipeline_definition</span><span class="w"> </span><span class="kn">import</span> <span class="n">Pipeline</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">Pipeline</span><span class="o">.</span><span class="n">ACTIVE_PIPELINE</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml</span><span class="w"> </span><span class="kn">import</span> <span class="n">constants</span><span class="p">,</span> <span class="n">get_step_context</span>

        <span class="c1"># If the environment variable was set to explicitly not run on the</span>
        <span class="c1"># stack, we do that.</span>
        <span class="n">run_without_stack</span> <span class="o">=</span> <span class="n">handle_bool_env_var</span><span class="p">(</span>
            <span class="n">ENV_ZENML_RUN_SINGLE_STEPS_WITHOUT_STACK</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">run_without_stack</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">call_entrypoint</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">get_step_context</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># We&#39;re currently inside the execution of a different step</span>
            <span class="c1"># -&gt; We don&#39;t want to launch another single step pipeline here,</span>
            <span class="c1"># but instead just call the step function</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">call_entrypoint</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">constants</span><span class="o">.</span><span class="n">SHOULD_PREVENT_PIPELINE_EXECUTION</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Preventing execution of step &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="k">return</span> <span class="n">run_as_single_step_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="p">(</span>
        <span class="n">input_artifacts</span><span class="p">,</span>
        <span class="n">external_artifacts</span><span class="p">,</span>
        <span class="n">model_artifacts_or_metadata</span><span class="p">,</span>
        <span class="n">client_lazy_loaders</span><span class="p">,</span>
        <span class="n">parameters</span><span class="p">,</span>
        <span class="n">default_parameters</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_call_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">upstream_steps</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">artifact</span><span class="o">.</span><span class="n">invocation_id</span> <span class="k">for</span> <span class="n">artifact</span> <span class="ow">in</span> <span class="n">input_artifacts</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">after</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">upstream_steps</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">after</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">after</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">):</span>
        <span class="n">upstream_steps</span> <span class="o">=</span> <span class="n">upstream_steps</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">after</span><span class="p">)</span>

    <span class="n">invocation_id</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="o">.</span><span class="n">ACTIVE_PIPELINE</span><span class="o">.</span><span class="n">add_step_invocation</span><span class="p">(</span>
        <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="n">input_artifacts</span><span class="o">=</span><span class="n">input_artifacts</span><span class="p">,</span>
        <span class="n">external_artifacts</span><span class="o">=</span><span class="n">external_artifacts</span><span class="p">,</span>
        <span class="n">model_artifacts_or_metadata</span><span class="o">=</span><span class="n">model_artifacts_or_metadata</span><span class="p">,</span>
        <span class="n">client_lazy_loaders</span><span class="o">=</span><span class="n">client_lazy_loaders</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
        <span class="n">default_parameters</span><span class="o">=</span><span class="n">default_parameters</span><span class="p">,</span>
        <span class="n">upstream_steps</span><span class="o">=</span><span class="n">upstream_steps</span><span class="p">,</span>
        <span class="n">custom_id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
        <span class="n">allow_id_suffix</span><span class="o">=</span><span class="ow">not</span> <span class="nb">id</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">outputs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_definition</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">StepArtifact</span><span class="p">(</span>
            <span class="n">invocation_id</span><span class="o">=</span><span class="n">invocation_id</span><span class="p">,</span>
            <span class="n">output_name</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">annotation</span><span class="o">=</span><span class="n">annotation</span><span class="p">,</span>
            <span class="n">pipeline</span><span class="o">=</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">ACTIVE_PIPELINE</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">outputs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">outputs</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.base_step.BaseStep.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enable_cache</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enable_artifact_metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enable_artifact_visualization</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enable_step_logs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">experiment_tracker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">step_operator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">output_materializers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">settings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">on_failure</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">on_success</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">retry</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">substitutions</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Initializes a step.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The name of the step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>enable_cache</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>If caching should be enabled for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>enable_artifact_metadata</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>If artifact metadata should be enabled
for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>enable_artifact_visualization</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>If artifact visualization should be
enabled for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>enable_step_logs</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>Enable step logs for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>experiment_tracker</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The experiment tracker to use for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>step_operator</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The step operator to use for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>parameters</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>Function parameters for this step</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>output_materializers</code></td>
        <td><code>Optional[OutputMaterializersSpecification]</code></td>
        <td><p>Output materializers for this step. If
given as a dict, the keys must be a subset of the output names
of this step. If a single value (type or string) is given, the
materializer will be used for all outputs.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>settings</code></td>
        <td><code>Optional[Mapping[str, SettingsOrDict]]</code></td>
        <td><p>settings for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>extra</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>Extra configurations for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>on_failure</code></td>
        <td><code>Optional[HookSpecification]</code></td>
        <td><p>Callback function in event of failure of the step. Can
be a function with a single argument of type <code>BaseException</code>, or
a source path to such a function (e.g. <code>module.my_function</code>).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>on_success</code></td>
        <td><code>Optional[HookSpecification]</code></td>
        <td><p>Callback function in event of success of the step. Can
be a function with no arguments, or a source path to such a
function (e.g. <code>module.my_function</code>).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>model</code></td>
        <td><code>Optional[Model]</code></td>
        <td><p>configuration of the model version in the Model Control Plane.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>retry</code></td>
        <td><code>Optional[zenml.config.retry_config.StepRetryConfig]</code></td>
        <td><p>Configuration for retrying the step in case of failure.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>substitutions</code></td>
        <td><code>Optional[Dict[str, str]]</code></td>
        <td><p>Extra placeholders to use in the name template.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/base_step.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_cache</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_artifact_metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_artifact_visualization</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_step_logs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">experiment_tracker</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">step_operator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">output_materializers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="s2">&quot;OutputMaterializersSpecification&quot;</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">settings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;SettingsOrDict&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">extra</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">on_failure</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;HookSpecification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">on_success</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;HookSpecification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">retry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">StepRetryConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">substitutions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes a step.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: The name of the step.</span>
<span class="sd">        enable_cache: If caching should be enabled for this step.</span>
<span class="sd">        enable_artifact_metadata: If artifact metadata should be enabled</span>
<span class="sd">            for this step.</span>
<span class="sd">        enable_artifact_visualization: If artifact visualization should be</span>
<span class="sd">            enabled for this step.</span>
<span class="sd">        enable_step_logs: Enable step logs for this step.</span>
<span class="sd">        experiment_tracker: The experiment tracker to use for this step.</span>
<span class="sd">        step_operator: The step operator to use for this step.</span>
<span class="sd">        parameters: Function parameters for this step</span>
<span class="sd">        output_materializers: Output materializers for this step. If</span>
<span class="sd">            given as a dict, the keys must be a subset of the output names</span>
<span class="sd">            of this step. If a single value (type or string) is given, the</span>
<span class="sd">            materializer will be used for all outputs.</span>
<span class="sd">        settings: settings for this step.</span>
<span class="sd">        extra: Extra configurations for this step.</span>
<span class="sd">        on_failure: Callback function in event of failure of the step. Can</span>
<span class="sd">            be a function with a single argument of type `BaseException`, or</span>
<span class="sd">            a source path to such a function (e.g. `module.my_function`).</span>
<span class="sd">        on_success: Callback function in event of success of the step. Can</span>
<span class="sd">            be a function with no arguments, or a source path to such a</span>
<span class="sd">            function (e.g. `module.my_function`).</span>
<span class="sd">        model: configuration of the model version in the Model Control Plane.</span>
<span class="sd">        retry: Configuration for retrying the step in case of failure.</span>
<span class="sd">        substitutions: Extra placeholders to use in the name template.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.config.step_configurations</span><span class="w"> </span><span class="kn">import</span> <span class="n">PartialStepConfiguration</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_definition</span> <span class="o">=</span> <span class="n">validate_entrypoint_function</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint</span><span class="p">,</span>
        <span class="n">reserved_arguments</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;after&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Step `</span><span class="si">%s</span><span class="s2">`: Caching </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;enabled&quot;</span> <span class="k">if</span> <span class="n">enable_cache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span> <span class="k">else</span> <span class="s2">&quot;disabled&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Step `</span><span class="si">%s</span><span class="s2">`: Artifact metadata </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;enabled&quot;</span> <span class="k">if</span> <span class="n">enable_artifact_metadata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span> <span class="k">else</span> <span class="s2">&quot;disabled&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Step `</span><span class="si">%s</span><span class="s2">`: Artifact visualization </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;enabled&quot;</span>
        <span class="k">if</span> <span class="n">enable_artifact_visualization</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span>
        <span class="k">else</span> <span class="s2">&quot;disabled&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Step `</span><span class="si">%s</span><span class="s2">`: logs </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;enabled&quot;</span> <span class="k">if</span> <span class="n">enable_step_logs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span> <span class="k">else</span> <span class="s2">&quot;disabled&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Step `</span><span class="si">%s</span><span class="s2">`: Is in Model context </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_configuration</span> <span class="o">=</span> <span class="n">PartialStepConfiguration</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">enable_cache</span><span class="o">=</span><span class="n">enable_cache</span><span class="p">,</span>
        <span class="n">enable_artifact_metadata</span><span class="o">=</span><span class="n">enable_artifact_metadata</span><span class="p">,</span>
        <span class="n">enable_artifact_visualization</span><span class="o">=</span><span class="n">enable_artifact_visualization</span><span class="p">,</span>
        <span class="n">enable_step_logs</span><span class="o">=</span><span class="n">enable_step_logs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
        <span class="n">experiment_tracker</span><span class="o">=</span><span class="n">experiment_tracker</span><span class="p">,</span>
        <span class="n">step_operator</span><span class="o">=</span><span class="n">step_operator</span><span class="p">,</span>
        <span class="n">output_materializers</span><span class="o">=</span><span class="n">output_materializers</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
        <span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">,</span>
        <span class="n">extra</span><span class="o">=</span><span class="n">extra</span><span class="p">,</span>
        <span class="n">on_failure</span><span class="o">=</span><span class="n">on_failure</span><span class="p">,</span>
        <span class="n">on_success</span><span class="o">=</span><span class="n">on_success</span><span class="p">,</span>
        <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
        <span class="n">retry</span><span class="o">=</span><span class="n">retry</span><span class="p">,</span>
        <span class="n">substitutions</span><span class="o">=</span><span class="n">substitutions</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">notebook_utils</span><span class="o">.</span><span class="n">try_to_save_notebook_cell_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_object</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.base_step.BaseStep.call_entrypoint" class="doc doc-heading">
<code class="highlight language-python"><span class="n">call_entrypoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Calls the entrypoint function of the step.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>*args</code></td>
        <td><code>Any</code></td>
        <td><p>Entrypoint function arguments.</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Entrypoint function keyword arguments.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>The return value of the entrypoint function.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>StepInterfaceError</code></td>
        <td><p>If the arguments to the entrypoint function are
invalid.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/base_step.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">call_entrypoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calls the entrypoint function of the step.</span>

<span class="sd">    Args:</span>
<span class="sd">        *args: Entrypoint function arguments.</span>
<span class="sd">        **kwargs: Entrypoint function keyword arguments.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The return value of the entrypoint function.</span>

<span class="sd">    Raises:</span>
<span class="sd">        StepInterfaceError: If the arguments to the entrypoint function are</span>
<span class="sd">            invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">validated_args</span> <span class="o">=</span> <span class="n">pydantic_utils</span><span class="o">.</span><span class="n">validate_function_args</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint</span><span class="p">,</span>
            <span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="o">*</span><span class="n">args</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">StepInterfaceError</span><span class="p">(</span>
            <span class="s2">&quot;Invalid step function entrypoint arguments. Check out the &quot;</span>
            <span class="s2">&quot;pydantic error above for more details.&quot;</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">entrypoint</span><span class="p">(</span><span class="o">**</span><span class="n">validated_args</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.base_step.BaseStep.configure" class="doc doc-heading">
<code class="highlight language-python"><span class="n">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enable_cache</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enable_artifact_metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enable_artifact_visualization</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enable_step_logs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">experiment_tracker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">step_operator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">output_materializers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">settings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">on_failure</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">on_success</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">merge</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">retry</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">substitutions</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Configures the step.</p>
<p>Configuration merging example:
* <code>merge==True</code>:
    step.configure(extra={"key1": 1})
    step.configure(extra={"key2": 2}, merge=True)
    step.configuration.extra # {"key1": 1, "key2": 2}
* <code>merge==False</code>:
    step.configure(extra={"key1": 1})
    step.configure(extra={"key2": 2}, merge=False)
    step.configuration.extra # {"key2": 2}</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>enable_cache</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>If caching should be enabled for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>enable_artifact_metadata</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>If artifact metadata should be enabled
for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>enable_artifact_visualization</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>If artifact visualization should be
enabled for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>enable_step_logs</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>If step logs should be enabled for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>experiment_tracker</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The experiment tracker to use for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>step_operator</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The step operator to use for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>parameters</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>Function parameters for this step</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>output_materializers</code></td>
        <td><code>Optional[OutputMaterializersSpecification]</code></td>
        <td><p>Output materializers for this step. If
given as a dict, the keys must be a subset of the output names
of this step. If a single value (type or string) is given, the
materializer will be used for all outputs.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>settings</code></td>
        <td><code>Optional[Mapping[str, SettingsOrDict]]</code></td>
        <td><p>settings for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>extra</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>Extra configurations for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>on_failure</code></td>
        <td><code>Optional[HookSpecification]</code></td>
        <td><p>Callback function in event of failure of the step. Can
be a function with a single argument of type <code>BaseException</code>, or
a source path to such a function (e.g. <code>module.my_function</code>).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>on_success</code></td>
        <td><code>Optional[HookSpecification]</code></td>
        <td><p>Callback function in event of success of the step. Can
be a function with no arguments, or a source path to such a
function (e.g. <code>module.my_function</code>).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>model</code></td>
        <td><code>Optional[Model]</code></td>
        <td><p>configuration of the model version in the Model Control Plane.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>merge</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code>, will merge the given dictionary configurations
like <code>parameters</code> and <code>settings</code> with existing
configurations. If <code>False</code> the given configurations will
overwrite all existing ones. See the general description of this
method for an example.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>retry</code></td>
        <td><code>Optional[zenml.config.retry_config.StepRetryConfig]</code></td>
        <td><p>Configuration for retrying the step in case of failure.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>substitutions</code></td>
        <td><code>Optional[Dict[str, str]]</code></td>
        <td><p>Extra placeholders to use in the name template.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>~T</code></td>
      <td><p>The step instance that this method was called on.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/base_step.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span>
    <span class="n">enable_cache</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_artifact_metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_artifact_visualization</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_step_logs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">experiment_tracker</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">step_operator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">output_materializers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="s2">&quot;OutputMaterializersSpecification&quot;</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">settings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;SettingsOrDict&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">extra</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">on_failure</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;HookSpecification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">on_success</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;HookSpecification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">merge</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">retry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">StepRetryConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">substitutions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configures the step.</span>

<span class="sd">    Configuration merging example:</span>
<span class="sd">    * `merge==True`:</span>
<span class="sd">        step.configure(extra={&quot;key1&quot;: 1})</span>
<span class="sd">        step.configure(extra={&quot;key2&quot;: 2}, merge=True)</span>
<span class="sd">        step.configuration.extra # {&quot;key1&quot;: 1, &quot;key2&quot;: 2}</span>
<span class="sd">    * `merge==False`:</span>
<span class="sd">        step.configure(extra={&quot;key1&quot;: 1})</span>
<span class="sd">        step.configure(extra={&quot;key2&quot;: 2}, merge=False)</span>
<span class="sd">        step.configuration.extra # {&quot;key2&quot;: 2}</span>

<span class="sd">    Args:</span>
<span class="sd">        enable_cache: If caching should be enabled for this step.</span>
<span class="sd">        enable_artifact_metadata: If artifact metadata should be enabled</span>
<span class="sd">            for this step.</span>
<span class="sd">        enable_artifact_visualization: If artifact visualization should be</span>
<span class="sd">            enabled for this step.</span>
<span class="sd">        enable_step_logs: If step logs should be enabled for this step.</span>
<span class="sd">        experiment_tracker: The experiment tracker to use for this step.</span>
<span class="sd">        step_operator: The step operator to use for this step.</span>
<span class="sd">        parameters: Function parameters for this step</span>
<span class="sd">        output_materializers: Output materializers for this step. If</span>
<span class="sd">            given as a dict, the keys must be a subset of the output names</span>
<span class="sd">            of this step. If a single value (type or string) is given, the</span>
<span class="sd">            materializer will be used for all outputs.</span>
<span class="sd">        settings: settings for this step.</span>
<span class="sd">        extra: Extra configurations for this step.</span>
<span class="sd">        on_failure: Callback function in event of failure of the step. Can</span>
<span class="sd">            be a function with a single argument of type `BaseException`, or</span>
<span class="sd">            a source path to such a function (e.g. `module.my_function`).</span>
<span class="sd">        on_success: Callback function in event of success of the step. Can</span>
<span class="sd">            be a function with no arguments, or a source path to such a</span>
<span class="sd">            function (e.g. `module.my_function`).</span>
<span class="sd">        model: configuration of the model version in the Model Control Plane.</span>
<span class="sd">        merge: If `True`, will merge the given dictionary configurations</span>
<span class="sd">            like `parameters` and `settings` with existing</span>
<span class="sd">            configurations. If `False` the given configurations will</span>
<span class="sd">            overwrite all existing ones. See the general description of this</span>
<span class="sd">            method for an example.</span>
<span class="sd">        retry: Configuration for retrying the step in case of failure.</span>
<span class="sd">        substitutions: Extra placeholders to use in the name template.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The step instance that this method was called on.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.config.step_configurations</span><span class="w"> </span><span class="kn">import</span> <span class="n">StepConfigurationUpdate</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.hooks.hook_validators</span><span class="w"> </span><span class="kn">import</span> <span class="n">resolve_and_validate_hook</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_resolve_if_necessary</span><span class="p">(</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Source</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Source</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Source</span><span class="o">.</span><span class="n">from_import_path</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Source</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">source_utils</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_convert_to_tuple</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Source</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">_resolve_if_necessary</span><span class="p">(</span><span class="n">value</span><span class="p">),)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">_resolve_if_necessary</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="p">)</span>

    <span class="n">outputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Source</span><span class="p">,</span> <span class="o">...</span><span class="p">]]]</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">allowed_output_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entrypoint_definition</span><span class="o">.</span><span class="n">outputs</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">output_materializers</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">output_materializers</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
            <span class="n">sources</span> <span class="o">=</span> <span class="n">_convert_to_tuple</span><span class="p">(</span><span class="n">output_materializers</span><span class="p">)</span>
            <span class="n">output_materializers</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">output_name</span><span class="p">:</span> <span class="n">sources</span>
                <span class="k">for</span> <span class="n">output_name</span> <span class="ow">in</span> <span class="n">allowed_output_names</span>
            <span class="p">}</span>

        <span class="k">for</span> <span class="n">output_name</span><span class="p">,</span> <span class="n">materializer</span> <span class="ow">in</span> <span class="n">output_materializers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">sources</span> <span class="o">=</span> <span class="n">_convert_to_tuple</span><span class="p">(</span><span class="n">materializer</span><span class="p">)</span>
            <span class="n">outputs</span><span class="p">[</span><span class="n">output_name</span><span class="p">][</span><span class="s2">&quot;materializer_source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sources</span>

    <span class="n">failure_hook_source</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">on_failure</span><span class="p">:</span>
        <span class="c1"># string of on_failure hook function to be used for this step</span>
        <span class="n">failure_hook_source</span> <span class="o">=</span> <span class="n">resolve_and_validate_hook</span><span class="p">(</span><span class="n">on_failure</span><span class="p">)</span>

    <span class="n">success_hook_source</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">on_success</span><span class="p">:</span>
        <span class="c1"># string of on_success hook function to be used for this step</span>
        <span class="n">success_hook_source</span> <span class="o">=</span> <span class="n">resolve_and_validate_hook</span><span class="p">(</span><span class="n">on_success</span><span class="p">)</span>

    <span class="n">values</span> <span class="o">=</span> <span class="n">dict_utils</span><span class="o">.</span><span class="n">remove_none_values</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;enable_cache&quot;</span><span class="p">:</span> <span class="n">enable_cache</span><span class="p">,</span>
            <span class="s2">&quot;enable_artifact_metadata&quot;</span><span class="p">:</span> <span class="n">enable_artifact_metadata</span><span class="p">,</span>
            <span class="s2">&quot;enable_artifact_visualization&quot;</span><span class="p">:</span> <span class="n">enable_artifact_visualization</span><span class="p">,</span>
            <span class="s2">&quot;enable_step_logs&quot;</span><span class="p">:</span> <span class="n">enable_step_logs</span><span class="p">,</span>
            <span class="s2">&quot;experiment_tracker&quot;</span><span class="p">:</span> <span class="n">experiment_tracker</span><span class="p">,</span>
            <span class="s2">&quot;step_operator&quot;</span><span class="p">:</span> <span class="n">step_operator</span><span class="p">,</span>
            <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="n">parameters</span><span class="p">,</span>
            <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="n">settings</span><span class="p">,</span>
            <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="n">outputs</span> <span class="ow">or</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;extra&quot;</span><span class="p">:</span> <span class="n">extra</span><span class="p">,</span>
            <span class="s2">&quot;failure_hook_source&quot;</span><span class="p">:</span> <span class="n">failure_hook_source</span><span class="p">,</span>
            <span class="s2">&quot;success_hook_source&quot;</span><span class="p">:</span> <span class="n">success_hook_source</span><span class="p">,</span>
            <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">model</span><span class="p">,</span>
            <span class="s2">&quot;retry&quot;</span><span class="p">:</span> <span class="n">retry</span><span class="p">,</span>
            <span class="s2">&quot;substitutions&quot;</span><span class="p">:</span> <span class="n">substitutions</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">StepConfigurationUpdate</span><span class="p">(</span><span class="o">**</span><span class="n">values</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_apply_configuration</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">merge</span><span class="o">=</span><span class="n">merge</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.base_step.BaseStep.copy" class="doc doc-heading">
<code class="highlight language-python"><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Copies the step.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>BaseStep</code></td>
      <td><p>The step copy.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/base_step.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BaseStep&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Copies the step.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The step copy.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.base_step.BaseStep.entrypoint" class="doc doc-heading">
<code class="highlight language-python"><span class="n">entrypoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Abstract method for core step logic.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>*args</code></td>
        <td><code>Any</code></td>
        <td><p>Positional arguments passed to the step.</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Keyword arguments passed to the step.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>The output of the step.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/base_step.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">entrypoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract method for core step logic.</span>

<span class="sd">    Args:</span>
<span class="sd">        *args: Positional arguments passed to the step.</span>
<span class="sd">        **kwargs: Keyword arguments passed to the step.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The output of the step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.base_step.BaseStep.load_from_source" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_from_source</span><span class="p">(</span><span class="n">source</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Loads a step from source.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>Union[zenml.config.source.Source, str]</code></td>
        <td><p>The path to the step source.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>BaseStep</code></td>
      <td><p>The loaded step.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the source is not a valid step source.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/base_step.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">load_from_source</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Source</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;BaseStep&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Loads a step from source.</span>

<span class="sd">    Args:</span>
<span class="sd">        source: The path to the step source.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The loaded step.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the source is not a valid step source.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">source_utils</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">BaseStep</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">BaseStep</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid step source.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.base_step.BaseStep.resolve" class="doc doc-heading">
<code class="highlight language-python"><span class="n">resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Resolves the step.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Source</code></td>
      <td><p>The step source.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/base_step.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Source</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Resolves the step.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The step source.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">source_utils</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.base_step.BaseStep.with_options" class="doc doc-heading">
<code class="highlight language-python"><span class="n">with_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enable_cache</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enable_artifact_metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enable_artifact_visualization</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enable_step_logs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">experiment_tracker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">step_operator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">output_materializers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">settings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">on_failure</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">on_success</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">merge</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">substitutions</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Copies the step and applies the given configurations.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>enable_cache</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>If caching should be enabled for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>enable_artifact_metadata</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>If artifact metadata should be enabled
for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>enable_artifact_visualization</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>If artifact visualization should be
enabled for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>enable_step_logs</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>If step logs should be enabled for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>experiment_tracker</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The experiment tracker to use for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>step_operator</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The step operator to use for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>parameters</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>Function parameters for this step</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>output_materializers</code></td>
        <td><code>Optional[OutputMaterializersSpecification]</code></td>
        <td><p>Output materializers for this step. If
given as a dict, the keys must be a subset of the output names
of this step. If a single value (type or string) is given, the
materializer will be used for all outputs.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>settings</code></td>
        <td><code>Optional[Mapping[str, SettingsOrDict]]</code></td>
        <td><p>settings for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>extra</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>Extra configurations for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>on_failure</code></td>
        <td><code>Optional[HookSpecification]</code></td>
        <td><p>Callback function in event of failure of the step. Can
be a function with a single argument of type <code>BaseException</code>, or
a source path to such a function (e.g. <code>module.my_function</code>).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>on_success</code></td>
        <td><code>Optional[HookSpecification]</code></td>
        <td><p>Callback function in event of success of the step. Can
be a function with no arguments, or a source path to such a
function (e.g. <code>module.my_function</code>).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>model</code></td>
        <td><code>Optional[Model]</code></td>
        <td><p>configuration of the model version in the Model Control Plane.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>merge</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code>, will merge the given dictionary configurations
like <code>parameters</code> and <code>settings</code> with existing
configurations. If <code>False</code> the given configurations will
overwrite all existing ones. See the general description of this
method for an example.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>substitutions</code></td>
        <td><code>Optional[Dict[str, str]]</code></td>
        <td><p>Extra placeholders for the step name.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>BaseStep</code></td>
      <td><p>The copied step instance.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/base_step.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">with_options</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">enable_cache</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_artifact_metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_artifact_visualization</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_step_logs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">experiment_tracker</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">step_operator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">output_materializers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="s2">&quot;OutputMaterializersSpecification&quot;</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">settings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;SettingsOrDict&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">extra</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">on_failure</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;HookSpecification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">on_success</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;HookSpecification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">merge</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">substitutions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BaseStep&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Copies the step and applies the given configurations.</span>

<span class="sd">    Args:</span>
<span class="sd">        enable_cache: If caching should be enabled for this step.</span>
<span class="sd">        enable_artifact_metadata: If artifact metadata should be enabled</span>
<span class="sd">            for this step.</span>
<span class="sd">        enable_artifact_visualization: If artifact visualization should be</span>
<span class="sd">            enabled for this step.</span>
<span class="sd">        enable_step_logs: If step logs should be enabled for this step.</span>
<span class="sd">        experiment_tracker: The experiment tracker to use for this step.</span>
<span class="sd">        step_operator: The step operator to use for this step.</span>
<span class="sd">        parameters: Function parameters for this step</span>
<span class="sd">        output_materializers: Output materializers for this step. If</span>
<span class="sd">            given as a dict, the keys must be a subset of the output names</span>
<span class="sd">            of this step. If a single value (type or string) is given, the</span>
<span class="sd">            materializer will be used for all outputs.</span>
<span class="sd">        settings: settings for this step.</span>
<span class="sd">        extra: Extra configurations for this step.</span>
<span class="sd">        on_failure: Callback function in event of failure of the step. Can</span>
<span class="sd">            be a function with a single argument of type `BaseException`, or</span>
<span class="sd">            a source path to such a function (e.g. `module.my_function`).</span>
<span class="sd">        on_success: Callback function in event of success of the step. Can</span>
<span class="sd">            be a function with no arguments, or a source path to such a</span>
<span class="sd">            function (e.g. `module.my_function`).</span>
<span class="sd">        model: configuration of the model version in the Model Control Plane.</span>
<span class="sd">        merge: If `True`, will merge the given dictionary configurations</span>
<span class="sd">            like `parameters` and `settings` with existing</span>
<span class="sd">            configurations. If `False` the given configurations will</span>
<span class="sd">            overwrite all existing ones. See the general description of this</span>
<span class="sd">            method for an example.</span>
<span class="sd">        substitutions: Extra placeholders for the step name.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The copied step instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">step_copy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">step_copy</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
        <span class="n">enable_cache</span><span class="o">=</span><span class="n">enable_cache</span><span class="p">,</span>
        <span class="n">enable_artifact_metadata</span><span class="o">=</span><span class="n">enable_artifact_metadata</span><span class="p">,</span>
        <span class="n">enable_artifact_visualization</span><span class="o">=</span><span class="n">enable_artifact_visualization</span><span class="p">,</span>
        <span class="n">enable_step_logs</span><span class="o">=</span><span class="n">enable_step_logs</span><span class="p">,</span>
        <span class="n">experiment_tracker</span><span class="o">=</span><span class="n">experiment_tracker</span><span class="p">,</span>
        <span class="n">step_operator</span><span class="o">=</span><span class="n">step_operator</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
        <span class="n">output_materializers</span><span class="o">=</span><span class="n">output_materializers</span><span class="p">,</span>
        <span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">,</span>
        <span class="n">extra</span><span class="o">=</span><span class="n">extra</span><span class="p">,</span>
        <span class="n">on_failure</span><span class="o">=</span><span class="n">on_failure</span><span class="p">,</span>
        <span class="n">on_success</span><span class="o">=</span><span class="n">on_success</span><span class="p">,</span>
        <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
        <span class="n">merge</span><span class="o">=</span><span class="n">merge</span><span class="p">,</span>
        <span class="n">substitutions</span><span class="o">=</span><span class="n">substitutions</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">step_copy</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.steps.decorated_step" class="doc doc-heading">
        <code>decorated_step</code>



</h3>

    <div class="doc doc-contents ">

      <p>Internal BaseStep subclass used by the step decorator.</p>


    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.steps.entrypoint_function_utils" class="doc doc-heading">
        <code>entrypoint_function_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Util functions for step and pipeline entrypoint functions.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="zenml.steps.entrypoint_function_utils.EntrypointFunctionDefinition" class="doc doc-heading">
        <code>
EntrypointFunctionDefinition            (<span title="tuple">tuple</span>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Class representing a step entrypoint function.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>inputs</code></td>
        <td><code>Dict[str, inspect.Parameter]</code></td>
        <td><p>The entrypoint function inputs.</p></td>
      </tr>
      <tr>
        <td><code>outputs</code></td>
        <td><code>Dict[str, zenml.steps.utils.OutputSignature]</code></td>
        <td><p>The entrypoint function outputs. This dictionary maps output
names to output annotations.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/entrypoint_function_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">EntrypointFunctionDefinition</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class representing a step entrypoint function.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        inputs: The entrypoint function inputs.</span>
<span class="sd">        outputs: The entrypoint function outputs. This dictionary maps output</span>
<span class="sd">            names to output annotations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">inspect</span><span class="o">.</span><span class="n">Parameter</span><span class="p">]</span>
    <span class="n">outputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">OutputSignature</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">validate_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validates an input to the step entrypoint function.</span>

<span class="sd">        Args:</span>
<span class="sd">            key: The key for which the input was passed</span>
<span class="sd">            value: The input value.</span>

<span class="sd">        Raises:</span>
<span class="sd">            KeyError: If the function has no input for the given key.</span>
<span class="sd">            RuntimeError: If a parameter is passed for an input that is</span>
<span class="sd">                annotated as an `UnmaterializedArtifact`.</span>
<span class="sd">            RuntimeError: If the input value is not valid for the type</span>
<span class="sd">                annotation provided for the function parameter.</span>
<span class="sd">            StepInterfaceError: If the input is a parameter and not JSON</span>
<span class="sd">                serializable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.artifacts.external_artifact</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExternalArtifact</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.artifacts.unmaterialized_artifact</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
            <span class="n">UnmaterializedArtifact</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.client_lazy_loader</span><span class="w"> </span><span class="kn">import</span> <span class="n">ClientLazyLoader</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">ArtifactVersionResponse</span>

        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Received step entrypoint input for invalid key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

        <span class="n">parameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">value</span><span class="p">,</span>
            <span class="p">(</span>
                <span class="n">StepArtifact</span><span class="p">,</span>
                <span class="n">ExternalArtifact</span><span class="p">,</span>
                <span class="n">ArtifactVersionResponse</span><span class="p">,</span>
                <span class="n">ClientLazyLoader</span><span class="p">,</span>
                <span class="n">LazyRunMetadataResponse</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">):</span>
            <span class="c1"># If we were to do any type validation for artifacts here, we</span>
            <span class="c1"># would not be able to leverage pydantics type coercion (e.g.</span>
            <span class="c1"># providing an `int` artifact for a `float` input)</span>
            <span class="k">return</span>

        <span class="c1"># Not an artifact -&gt; This is a parameter</span>
        <span class="k">if</span> <span class="n">parameter</span><span class="o">.</span><span class="n">annotation</span> <span class="ow">is</span> <span class="n">UnmaterializedArtifact</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;Passing parameter for input of type `UnmaterializedArtifact` &quot;</span>
                <span class="s2">&quot;is not allowed.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">yaml_utils</span><span class="o">.</span><span class="n">is_json_serializable</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">StepInterfaceError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Argument type (`</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">`) for argument &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; is not JSON serializable and can not be passed as &quot;</span>
                <span class="s2">&quot;a parameter. This input can either be provided by the &quot;</span>
                <span class="s2">&quot;output of another step or as an external artifact: &quot;</span>
                <span class="s2">&quot;https://docs.zenml.io/user-guide/starter-guide/manage-artifacts#managing-artifacts-not-produced-by-zenml-pipelines&quot;</span>
            <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_validate_input_value</span><span class="p">(</span><span class="n">parameter</span><span class="o">=</span><span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Input validation failed for input &#39;</span><span class="si">{</span><span class="n">parameter</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;: &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Expected type `</span><span class="si">{</span><span class="n">parameter</span><span class="o">.</span><span class="n">annotation</span><span class="si">}</span><span class="s2">` but received type &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">`.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_input_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">:</span> <span class="n">inspect</span><span class="o">.</span><span class="n">Parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validates an input value to the step entrypoint function.</span>

<span class="sd">        Args:</span>
<span class="sd">            parameter: The function parameter for which the value was provided.</span>
<span class="sd">            value: The input value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># We allow passing None for optional annotations that would otherwise</span>
        <span class="c1"># not be allowed as a parameter</span>
        <span class="n">config_dict</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>

        <span class="c1"># Create a pydantic model with just a single required field with the</span>
        <span class="c1"># type annotation of the parameter to verify the input type including</span>
        <span class="c1"># pydantics type coercion</span>
        <span class="n">validation_model_class</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">(</span>
            <span class="s2">&quot;input_validation_model&quot;</span><span class="p">,</span>
            <span class="n">__config__</span><span class="o">=</span><span class="n">config_dict</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="p">(</span><span class="n">parameter</span><span class="o">.</span><span class="n">annotation</span><span class="p">,</span> <span class="o">...</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">validation_model_class</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">











  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.entrypoint_function_utils.EntrypointFunctionDefinition.__getnewargs__" class="doc doc-heading">
<code class="highlight language-python"><span class="n">__getnewargs__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Return self as a plain tuple.  Used by copy and pickle.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/steps/entrypoint_function_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">__getnewargs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="s1">&#39;Return self as a plain tuple.  Used by copy and pickle.&#39;</span>
    <span class="k">return</span> <span class="n">_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.entrypoint_function_utils.EntrypointFunctionDefinition.__new__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__new__</span><span class="p">(</span><span class="n">_cls</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Create new instance of EntrypointFunctionDefinition(inputs, outputs)</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.entrypoint_function_utils.EntrypointFunctionDefinition.__repr__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Return a nicely formatted representation string</p>

        <details class="quote">
          <summary>Source code in <code>zenml/steps/entrypoint_function_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="s1">&#39;Return a nicely formatted representation string&#39;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="n">repr_fmt</span> <span class="o">%</span> <span class="bp">self</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.entrypoint_function_utils.EntrypointFunctionDefinition.validate_input" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Validates an input to the step entrypoint function.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>key</code></td>
        <td><code>str</code></td>
        <td><p>The key for which the input was passed</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>value</code></td>
        <td><code>Any</code></td>
        <td><p>The input value.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>KeyError</code></td>
        <td><p>If the function has no input for the given key.</p></td>
      </tr>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If a parameter is passed for an input that is
annotated as an <code>UnmaterializedArtifact</code>.</p></td>
      </tr>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If the input value is not valid for the type
annotation provided for the function parameter.</p></td>
      </tr>
      <tr>
        <td><code>StepInterfaceError</code></td>
        <td><p>If the input is a parameter and not JSON
serializable.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/entrypoint_function_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validate_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validates an input to the step entrypoint function.</span>

<span class="sd">    Args:</span>
<span class="sd">        key: The key for which the input was passed</span>
<span class="sd">        value: The input value.</span>

<span class="sd">    Raises:</span>
<span class="sd">        KeyError: If the function has no input for the given key.</span>
<span class="sd">        RuntimeError: If a parameter is passed for an input that is</span>
<span class="sd">            annotated as an `UnmaterializedArtifact`.</span>
<span class="sd">        RuntimeError: If the input value is not valid for the type</span>
<span class="sd">            annotation provided for the function parameter.</span>
<span class="sd">        StepInterfaceError: If the input is a parameter and not JSON</span>
<span class="sd">            serializable.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.artifacts.external_artifact</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExternalArtifact</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.artifacts.unmaterialized_artifact</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
        <span class="n">UnmaterializedArtifact</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.client_lazy_loader</span><span class="w"> </span><span class="kn">import</span> <span class="n">ClientLazyLoader</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">ArtifactVersionResponse</span>

    <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Received step entrypoint input for invalid key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

    <span class="n">parameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
        <span class="n">value</span><span class="p">,</span>
        <span class="p">(</span>
            <span class="n">StepArtifact</span><span class="p">,</span>
            <span class="n">ExternalArtifact</span><span class="p">,</span>
            <span class="n">ArtifactVersionResponse</span><span class="p">,</span>
            <span class="n">ClientLazyLoader</span><span class="p">,</span>
            <span class="n">LazyRunMetadataResponse</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">):</span>
        <span class="c1"># If we were to do any type validation for artifacts here, we</span>
        <span class="c1"># would not be able to leverage pydantics type coercion (e.g.</span>
        <span class="c1"># providing an `int` artifact for a `float` input)</span>
        <span class="k">return</span>

    <span class="c1"># Not an artifact -&gt; This is a parameter</span>
    <span class="k">if</span> <span class="n">parameter</span><span class="o">.</span><span class="n">annotation</span> <span class="ow">is</span> <span class="n">UnmaterializedArtifact</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Passing parameter for input of type `UnmaterializedArtifact` &quot;</span>
            <span class="s2">&quot;is not allowed.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">yaml_utils</span><span class="o">.</span><span class="n">is_json_serializable</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">StepInterfaceError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Argument type (`</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">`) for argument &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; is not JSON serializable and can not be passed as &quot;</span>
            <span class="s2">&quot;a parameter. This input can either be provided by the &quot;</span>
            <span class="s2">&quot;output of another step or as an external artifact: &quot;</span>
            <span class="s2">&quot;https://docs.zenml.io/user-guide/starter-guide/manage-artifacts#managing-artifacts-not-produced-by-zenml-pipelines&quot;</span>
        <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_input_value</span><span class="p">(</span><span class="n">parameter</span><span class="o">=</span><span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Input validation failed for input &#39;</span><span class="si">{</span><span class="n">parameter</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;: &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Expected type `</span><span class="si">{</span><span class="n">parameter</span><span class="o">.</span><span class="n">annotation</span><span class="si">}</span><span class="s2">` but received type &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">`.&quot;</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="zenml.steps.entrypoint_function_utils.StepArtifact" class="doc doc-heading">
        <code>
StepArtifact        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Class to represent step output artifacts.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/steps/entrypoint_function_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StepArtifact</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class to represent step output artifacts.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">invocation_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">output_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">annotation</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="n">pipeline</span><span class="p">:</span> <span class="s2">&quot;Pipeline&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a step artifact.</span>

<span class="sd">        Args:</span>
<span class="sd">            invocation_id: The ID of the invocation that produces this artifact.</span>
<span class="sd">            output_name: The name of the output that produces this artifact.</span>
<span class="sd">            annotation: The output type annotation.</span>
<span class="sd">            pipeline: The pipeline which the invocation is part of.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">invocation_id</span> <span class="o">=</span> <span class="n">invocation_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_name</span> <span class="o">=</span> <span class="n">output_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">annotation</span> <span class="o">=</span> <span class="n">annotation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span> <span class="o">=</span> <span class="n">pipeline</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Raise a custom error if someone is trying to iterate this object.</span>

<span class="sd">        Raises:</span>
<span class="sd">            StepInterfaceError: If trying to iterate this object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="n">StepInterfaceError</span><span class="p">(</span>
            <span class="s2">&quot;Unable to unpack step artifact. This error is probably because &quot;</span>
            <span class="s2">&quot;you&#39;re trying to unpack the return value of your step but the &quot;</span>
            <span class="s2">&quot;step only returns a single artifact. For more information on how &quot;</span>
            <span class="s2">&quot;to add type annotations to your step to indicate multiple &quot;</span>
            <span class="s2">&quot;artifacts visit https://docs.zenml.io/how-to/build-pipelines/step-output-typing-and-annotation#type-annotations.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.entrypoint_function_utils.StepArtifact.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">invocation_id</span><span class="p">,</span> <span class="n">output_name</span><span class="p">,</span> <span class="n">annotation</span><span class="p">,</span> <span class="n">pipeline</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Initialize a step artifact.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>invocation_id</code></td>
        <td><code>str</code></td>
        <td><p>The ID of the invocation that produces this artifact.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>output_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the output that produces this artifact.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>annotation</code></td>
        <td><code>Any</code></td>
        <td><p>The output type annotation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>pipeline</code></td>
        <td><code>Pipeline</code></td>
        <td><p>The pipeline which the invocation is part of.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/entrypoint_function_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">invocation_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">output_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">annotation</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">pipeline</span><span class="p">:</span> <span class="s2">&quot;Pipeline&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize a step artifact.</span>

<span class="sd">    Args:</span>
<span class="sd">        invocation_id: The ID of the invocation that produces this artifact.</span>
<span class="sd">        output_name: The name of the output that produces this artifact.</span>
<span class="sd">        annotation: The output type annotation.</span>
<span class="sd">        pipeline: The pipeline which the invocation is part of.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">invocation_id</span> <span class="o">=</span> <span class="n">invocation_id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">output_name</span> <span class="o">=</span> <span class="n">output_name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">annotation</span> <span class="o">=</span> <span class="n">annotation</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span> <span class="o">=</span> <span class="n">pipeline</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.entrypoint_function_utils.StepArtifact.__iter__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Raise a custom error if someone is trying to iterate this object.</p>

<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>StepInterfaceError</code></td>
        <td><p>If trying to iterate this object.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/entrypoint_function_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raise a custom error if someone is trying to iterate this object.</span>

<span class="sd">    Raises:</span>
<span class="sd">        StepInterfaceError: If trying to iterate this object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="n">StepInterfaceError</span><span class="p">(</span>
        <span class="s2">&quot;Unable to unpack step artifact. This error is probably because &quot;</span>
        <span class="s2">&quot;you&#39;re trying to unpack the return value of your step but the &quot;</span>
        <span class="s2">&quot;step only returns a single artifact. For more information on how &quot;</span>
        <span class="s2">&quot;to add type annotations to your step to indicate multiple &quot;</span>
        <span class="s2">&quot;artifacts visit https://docs.zenml.io/how-to/build-pipelines/step-output-typing-and-annotation#type-annotations.&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h4 id="zenml.steps.entrypoint_function_utils.validate_entrypoint_function" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_entrypoint_function</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">reserved_arguments</span><span class="o">=</span><span class="p">())</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Validates a step entrypoint function.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>func</code></td>
        <td><code>Callable[..., Any]</code></td>
        <td><p>The step entrypoint function to validate.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>reserved_arguments</code></td>
        <td><code>Sequence[str]</code></td>
        <td><p>The reserved arguments for the entrypoint function.</p></td>
        <td><code>()</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>StepInterfaceError</code></td>
        <td><p>If the entrypoint function has variable arguments
or keyword arguments.</p></td>
      </tr>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If type annotations should be enforced and a type
annotation is missing.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>EntrypointFunctionDefinition</code></td>
      <td><p>A validated definition of the entrypoint function.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/entrypoint_function_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validate_entrypoint_function</span><span class="p">(</span>
    <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">reserved_arguments</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntrypointFunctionDefinition</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validates a step entrypoint function.</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The step entrypoint function to validate.</span>
<span class="sd">        reserved_arguments: The reserved arguments for the entrypoint function.</span>

<span class="sd">    Raises:</span>
<span class="sd">        StepInterfaceError: If the entrypoint function has variable arguments</span>
<span class="sd">            or keyword arguments.</span>
<span class="sd">        RuntimeError: If type annotations should be enforced and a type</span>
<span class="sd">            annotation is missing.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A validated definition of the entrypoint function.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">follow_wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">validate_reserved_arguments</span><span class="p">(</span>
        <span class="n">signature</span><span class="o">=</span><span class="n">signature</span><span class="p">,</span> <span class="n">reserved_arguments</span><span class="o">=</span><span class="n">reserved_arguments</span>
    <span class="p">)</span>

    <span class="n">inputs</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">signature_parameters</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">signature</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="n">signature_parameters</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">parameter</span><span class="o">.</span><span class="n">kind</span> <span class="ow">in</span> <span class="p">{</span><span class="n">parameter</span><span class="o">.</span><span class="n">VAR_POSITIONAL</span><span class="p">,</span> <span class="n">parameter</span><span class="o">.</span><span class="n">VAR_KEYWORD</span><span class="p">}:</span>
            <span class="k">raise</span> <span class="n">StepInterfaceError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Variable args or kwargs not allowed for function &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

        <span class="n">annotation</span> <span class="o">=</span> <span class="n">parameter</span><span class="o">.</span><span class="n">annotation</span>
        <span class="k">if</span> <span class="n">annotation</span> <span class="ow">is</span> <span class="n">parameter</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ENFORCE_TYPE_ANNOTATIONS</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Missing type annotation for input &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; of step &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;function &#39;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
                <span class="p">)</span>

            <span class="c1"># If a type annotation is missing, use `Any` instead</span>
            <span class="n">parameter</span> <span class="o">=</span> <span class="n">parameter</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">annotation</span><span class="o">=</span><span class="n">Any</span><span class="p">)</span>

        <span class="n">annotation</span> <span class="o">=</span> <span class="n">resolve_type_annotation</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span>
        <span class="n">inputs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">parameter</span>

    <span class="n">outputs</span> <span class="o">=</span> <span class="n">parse_return_type_annotations</span><span class="p">(</span>
        <span class="n">func</span><span class="o">=</span><span class="n">func</span><span class="p">,</span>
        <span class="n">enforce_type_annotations</span><span class="o">=</span><span class="n">ENFORCE_TYPE_ANNOTATIONS</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">EntrypointFunctionDefinition</span><span class="p">(</span>
        <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span>
        <span class="n">outputs</span><span class="o">=</span><span class="n">outputs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.steps.entrypoint_function_utils.validate_reserved_arguments" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_reserved_arguments</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span> <span class="n">reserved_arguments</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Validates that the signature does not contain any reserved arguments.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>signature</code></td>
        <td><code>Signature</code></td>
        <td><p>The signature to validate.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>reserved_arguments</code></td>
        <td><code>Sequence[str]</code></td>
        <td><p>The reserved arguments for the signature.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If the signature contains a reserved argument.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/entrypoint_function_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validate_reserved_arguments</span><span class="p">(</span>
    <span class="n">signature</span><span class="p">:</span> <span class="n">inspect</span><span class="o">.</span><span class="n">Signature</span><span class="p">,</span> <span class="n">reserved_arguments</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validates that the signature does not contain any reserved arguments.</span>

<span class="sd">    Args:</span>
<span class="sd">        signature: The signature to validate.</span>
<span class="sd">        reserved_arguments: The reserved arguments for the signature.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the signature contains a reserved argument.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">reserved_arguments</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">signature</span><span class="o">.</span><span class="n">parameters</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reserved argument name &#39;</span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.steps.step_context" class="doc doc-heading">
        <code>step_context</code>



</h3>

    <div class="doc doc-contents ">

      <p>Step context class.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="zenml.steps.step_context.StepContext" class="doc doc-heading">
        <code>
StepContext        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Provides additional context inside a step function.</p>
<p>This singleton class is used to access information about the current run,
step run, or its outputs inside a step function.</p>
<p>Usage example:</p>
<pre><code class="language-python">from zenml.steps import get_step_context

@step
def my_trainer_step() -&gt; Any:
    context = get_step_context()

    # get info about the current pipeline run
    current_pipeline_run = context.pipeline_run

    # get info about the current step run
    current_step_run = context.step_run

    # get info about the future output artifacts of this step
    output_artifact_uri = context.get_output_artifact_uri()

    ...
</code></pre>

        <details class="quote">
          <summary>Source code in <code>zenml/steps/step_context.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StepContext</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">SingletonMetaClass</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Provides additional context inside a step function.</span>

<span class="sd">    This singleton class is used to access information about the current run,</span>
<span class="sd">    step run, or its outputs inside a step function.</span>

<span class="sd">    Usage example:</span>

<span class="sd">    ```python</span>
<span class="sd">    from zenml.steps import get_step_context</span>

<span class="sd">    @step</span>
<span class="sd">    def my_trainer_step() -&gt; Any:</span>
<span class="sd">        context = get_step_context()</span>

<span class="sd">        # get info about the current pipeline run</span>
<span class="sd">        current_pipeline_run = context.pipeline_run</span>

<span class="sd">        # get info about the current step run</span>
<span class="sd">        current_step_run = context.step_run</span>

<span class="sd">        # get info about the future output artifacts of this step</span>
<span class="sd">        output_artifact_uri = context.get_output_artifact_uri()</span>

<span class="sd">        ...</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pipeline_run</span><span class="p">:</span> <span class="s2">&quot;PipelineRunResponse&quot;</span><span class="p">,</span>
        <span class="n">step_run</span><span class="p">:</span> <span class="s2">&quot;StepRunResponse&quot;</span><span class="p">,</span>
        <span class="n">output_materializers</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseMaterializer&quot;</span><span class="p">]]],</span>
        <span class="n">output_artifact_uris</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">output_artifact_configs</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ArtifactConfig&quot;</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the context of the currently running step.</span>

<span class="sd">        Args:</span>
<span class="sd">            pipeline_run: The model of the current pipeline run.</span>
<span class="sd">            step_run: The model of the current step run.</span>
<span class="sd">            output_materializers: The output materializers of the step that</span>
<span class="sd">                this context is used in.</span>
<span class="sd">            output_artifact_uris: The output artifacts of the step that this</span>
<span class="sd">                context is used in.</span>
<span class="sd">            output_artifact_configs: The outputs&#39; ArtifactConfigs of the step that this</span>
<span class="sd">                context is used in.</span>

<span class="sd">        Raises:</span>
<span class="sd">            StepContextError: If the keys of the output materializers and</span>
<span class="sd">                output artifacts do not match.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">Client</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">pipeline_run</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">get_pipeline_run</span><span class="p">(</span><span class="n">pipeline_run</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_run</span> <span class="o">=</span> <span class="n">pipeline_run</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">step_run</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">get_run_step</span><span class="p">(</span><span class="n">step_run</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">step_run</span> <span class="o">=</span> <span class="n">step_run</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model_version</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">step_run</span><span class="o">.</span><span class="n">model_version</span> <span class="ow">or</span> <span class="n">pipeline_run</span><span class="o">.</span><span class="n">model_version</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">step_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">step_run</span><span class="o">.</span><span class="n">name</span>

        <span class="c1"># set outputs</span>
        <span class="k">if</span> <span class="n">output_materializers</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">!=</span> <span class="n">output_artifact_uris</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">StepContextError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Mismatched keys in output materializers and output artifact &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;URIs for step `</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_name</span><span class="si">}</span><span class="s2">`. Output materializer &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;keys: </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">output_materializers</span><span class="p">)</span><span class="si">}</span><span class="s2">, output artifact URI &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;keys: </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">output_artifact_uris</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">key</span><span class="p">:</span> <span class="n">StepContextOutput</span><span class="p">(</span>
                <span class="n">materializer_classes</span><span class="o">=</span><span class="n">output_materializers</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
                <span class="n">artifact_uri</span><span class="o">=</span><span class="n">output_artifact_uris</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
                <span class="n">artifact_config</span><span class="o">=</span><span class="n">output_artifact_configs</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">output_materializers</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cleanup_registry</span> <span class="o">=</span> <span class="n">CallbackRegistry</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineResponse&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the current pipeline.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The current pipeline or None.</span>

<span class="sd">        Raises:</span>
<span class="sd">            StepContextError: If the pipeline run does not have a pipeline.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_run</span><span class="o">.</span><span class="n">pipeline</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_run</span><span class="o">.</span><span class="n">pipeline</span>
        <span class="k">raise</span> <span class="n">StepContextError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to get pipeline in step `</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_name</span><span class="si">}</span><span class="s2">` of pipeline &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;run &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_run</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39;: This pipeline run does not have &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;a pipeline associated with it.&quot;</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Model&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns configured Model.</span>

<span class="sd">        Order of resolution to search for Model is:</span>
<span class="sd">            1. Model from the step context</span>
<span class="sd">            2. Model from the pipeline context</span>

<span class="sd">        Returns:</span>
<span class="sd">            The `Model` object associated with the current step.</span>

<span class="sd">        Raises:</span>
<span class="sd">            StepContextError: If no `Model` object was specified for the step</span>
<span class="sd">                or pipeline.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_version</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">StepContextError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unable to get Model in step `</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_name</span><span class="si">}</span><span class="s2">` of pipeline &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;run &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_run</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39;: No model has been specified &quot;</span>
                <span class="s2">&quot;the step or pipeline.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_version</span><span class="o">.</span><span class="n">to_model_class</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;StepRunInputResponse&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the input artifacts of the current step.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The input artifacts of the current step.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">step_run</span><span class="o">.</span><span class="n">inputs</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_output</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">output_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;StepContextOutput&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the materializer and artifact URI for a given step output.</span>

<span class="sd">        Args:</span>
<span class="sd">            output_name: Optional name of the output for which to get the</span>
<span class="sd">                materializer and URI.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple containing the materializer and artifact URI for the</span>
<span class="sd">                given output.</span>

<span class="sd">        Raises:</span>
<span class="sd">            StepContextError: If the step has no outputs, no output for</span>
<span class="sd">                the given `output_name` or if no `output_name` was given but</span>
<span class="sd">                the step has multiple outputs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">output_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">output_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">StepContextError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unable to get step output for step `</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_name</span><span class="si">}</span><span class="s2">`: &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;This step does not have any outputs.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">output_name</span> <span class="ow">and</span> <span class="n">output_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">StepContextError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unable to get step output for step `</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_name</span><span class="si">}</span><span class="s2">`: &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;This step has multiple outputs (</span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="p">)</span><span class="si">}</span><span class="s2">), &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;please specify which output to return.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">output_name</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">output_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">StepContextError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Unable to get step output &#39;</span><span class="si">{</span><span class="n">output_name</span><span class="si">}</span><span class="s2">&#39; for &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;step `</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_name</span><span class="si">}</span><span class="s2">`. This step does not have an &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;output with the given name, please specify one of the &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;available outputs: </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="p">[</span><span class="n">output_name</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_output_materializer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">output_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">custom_materializer_class</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseMaterializer&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">data_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BaseMaterializer&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a materializer for a given step output.</span>

<span class="sd">        Args:</span>
<span class="sd">            output_name: Optional name of the output for which to get the</span>
<span class="sd">                materializer. If no name is given and the step only has a</span>
<span class="sd">                single output, the materializer of this output will be</span>
<span class="sd">                returned. If the step has multiple outputs, an exception</span>
<span class="sd">                will be raised.</span>
<span class="sd">            custom_materializer_class: If given, this `BaseMaterializer`</span>
<span class="sd">                subclass will be initialized with the output artifact instead</span>
<span class="sd">                of the materializer that was registered for this step output.</span>
<span class="sd">            data_type: If the output annotation is of type `Union` and the step</span>
<span class="sd">                therefore has multiple materializers configured, you can provide</span>
<span class="sd">                a data type for the output which will be used to select the</span>
<span class="sd">                correct materializer. If not provided, the first materializer</span>
<span class="sd">                will be used.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A materializer initialized with the output artifact for</span>
<span class="sd">            the given output.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">materializer_utils</span>

        <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_output</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span>
        <span class="n">materializer_classes</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">materializer_classes</span>
        <span class="n">artifact_uri</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">artifact_uri</span>

        <span class="k">if</span> <span class="n">custom_materializer_class</span><span class="p">:</span>
            <span class="n">materializer_class</span> <span class="o">=</span> <span class="n">custom_materializer_class</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">materializer_classes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">data_type</span><span class="p">:</span>
            <span class="n">materializer_class</span> <span class="o">=</span> <span class="n">materializer_classes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">materializer_class</span> <span class="o">=</span> <span class="n">materializer_utils</span><span class="o">.</span><span class="n">select_materializer</span><span class="p">(</span>
                <span class="n">data_type</span><span class="o">=</span><span class="n">data_type</span><span class="p">,</span> <span class="n">materializer_classes</span><span class="o">=</span><span class="n">materializer_classes</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">materializer_class</span><span class="p">(</span><span class="n">artifact_uri</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_output_artifact_uri</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">output_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the artifact URI for a given step output.</span>

<span class="sd">        Args:</span>
<span class="sd">            output_name: Optional name of the output for which to get the URI.</span>
<span class="sd">                If no name is given and the step only has a single output,</span>
<span class="sd">                the URI of this output will be returned. If the step has</span>
<span class="sd">                multiple outputs, an exception will be raised.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Artifact URI for the given output.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_output</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span><span class="o">.</span><span class="n">artifact_uri</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_output_metadata</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">output_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;MetadataType&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the metadata for a given step output.</span>

<span class="sd">        Args:</span>
<span class="sd">            output_name: Optional name of the output for which to get the</span>
<span class="sd">                metadata. If no name is given and the step only has a single</span>
<span class="sd">                output, the metadata of this output will be returned. If the</span>
<span class="sd">                step has multiple outputs, an exception will be raised.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Metadata for the given output.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_output</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span>
        <span class="n">custom_metadata</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">run_metadata</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">output</span><span class="o">.</span><span class="n">artifact_config</span><span class="p">:</span>
            <span class="n">custom_metadata</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="o">**</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">artifact_config</span><span class="o">.</span><span class="n">run_metadata</span> <span class="ow">or</span> <span class="p">{})</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">custom_metadata</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_output_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the tags for a given step output.</span>

<span class="sd">        Args:</span>
<span class="sd">            output_name: Optional name of the output for which to get the</span>
<span class="sd">                metadata. If no name is given and the step only has a single</span>
<span class="sd">                output, the metadata of this output will be returned. If the</span>
<span class="sd">                step has multiple outputs, an exception will be raised.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tags for the given output.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_output</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span>
        <span class="n">custom_tags</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">tags</span> <span class="ow">or</span> <span class="p">[])</span>
        <span class="k">if</span> <span class="n">output</span><span class="o">.</span><span class="n">artifact_config</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span>
                <span class="nb">set</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">artifact_config</span><span class="o">.</span><span class="n">tags</span> <span class="ow">or</span> <span class="p">[])</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">custom_tags</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">custom_tags</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_output_metadata</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;MetadataType&quot;</span><span class="p">],</span>
        <span class="n">output_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds metadata for a given step output.</span>

<span class="sd">        Args:</span>
<span class="sd">            metadata: The metadata to add.</span>
<span class="sd">            output_name: Optional name of the output for which to add the</span>
<span class="sd">                metadata. If no name is given and the step only has a single</span>
<span class="sd">                output, the metadata of this output will be added. If the</span>
<span class="sd">                step has multiple outputs, an exception will be raised.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_output</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span><span class="o">.</span><span class="n">run_metadata</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">run_metadata</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">output</span><span class="o">.</span><span class="n">run_metadata</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">metadata</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_output_tags</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">output_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds tags for a given step output.</span>

<span class="sd">        Args:</span>
<span class="sd">            tags: The tags to add.</span>
<span class="sd">            output_name: Optional name of the output for which to add the</span>
<span class="sd">                tags. If no name is given and the step only has a single</span>
<span class="sd">                output, the tags of this output will be added. If the</span>
<span class="sd">                step has multiple outputs, an exception will be raised.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_output</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span><span class="o">.</span><span class="n">tags</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">output</span><span class="o">.</span><span class="n">tags</span> <span class="o">+=</span> <span class="n">tags</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="zenml.steps.step_context.StepContext.inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepRunInputResponse</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Returns the input artifacts of the current step.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, StepRunInputResponse]</code></td>
      <td><p>The input artifacts of the current step.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zenml.steps.step_context.StepContext.model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">model</span><span class="p">:</span> <span class="n">Model</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Returns configured Model.</p>
<p>Order of resolution to search for Model is:
    1. Model from the step context
    2. Model from the pipeline context</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Model</code></td>
      <td><p>The <code>Model</code> object associated with the current step.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>StepContextError</code></td>
        <td><p>If no <code>Model</code> object was specified for the step
or pipeline.</p></td>
      </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zenml.steps.step_context.StepContext.pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline</span><span class="p">:</span> <span class="n">PipelineResponse</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Returns the current pipeline.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>PipelineResponse</code></td>
      <td><p>The current pipeline or None.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>StepContextError</code></td>
        <td><p>If the pipeline run does not have a pipeline.</p></td>
      </tr>
  </tbody>
</table>    </div>

  </div>






  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.step_context.StepContext.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipeline_run</span><span class="p">,</span> <span class="n">step_run</span><span class="p">,</span> <span class="n">output_materializers</span><span class="p">,</span> <span class="n">output_artifact_uris</span><span class="p">,</span> <span class="n">output_artifact_configs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Initialize the context of the currently running step.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pipeline_run</code></td>
        <td><code>PipelineRunResponse</code></td>
        <td><p>The model of the current pipeline run.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>step_run</code></td>
        <td><code>StepRunResponse</code></td>
        <td><p>The model of the current step run.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>output_materializers</code></td>
        <td><code>Mapping[str, Sequence[Type[BaseMaterializer]]]</code></td>
        <td><p>The output materializers of the step that
this context is used in.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>output_artifact_uris</code></td>
        <td><code>Mapping[str, str]</code></td>
        <td><p>The output artifacts of the step that this
context is used in.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>output_artifact_configs</code></td>
        <td><code>Mapping[str, Optional[ArtifactConfig]]</code></td>
        <td><p>The outputs' ArtifactConfigs of the step that this
context is used in.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>StepContextError</code></td>
        <td><p>If the keys of the output materializers and
output artifacts do not match.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/step_context.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">pipeline_run</span><span class="p">:</span> <span class="s2">&quot;PipelineRunResponse&quot;</span><span class="p">,</span>
    <span class="n">step_run</span><span class="p">:</span> <span class="s2">&quot;StepRunResponse&quot;</span><span class="p">,</span>
    <span class="n">output_materializers</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseMaterializer&quot;</span><span class="p">]]],</span>
    <span class="n">output_artifact_uris</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">output_artifact_configs</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ArtifactConfig&quot;</span><span class="p">]],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the context of the currently running step.</span>

<span class="sd">    Args:</span>
<span class="sd">        pipeline_run: The model of the current pipeline run.</span>
<span class="sd">        step_run: The model of the current step run.</span>
<span class="sd">        output_materializers: The output materializers of the step that</span>
<span class="sd">            this context is used in.</span>
<span class="sd">        output_artifact_uris: The output artifacts of the step that this</span>
<span class="sd">            context is used in.</span>
<span class="sd">        output_artifact_configs: The outputs&#39; ArtifactConfigs of the step that this</span>
<span class="sd">            context is used in.</span>

<span class="sd">    Raises:</span>
<span class="sd">        StepContextError: If the keys of the output materializers and</span>
<span class="sd">            output artifacts do not match.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">Client</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">pipeline_run</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">get_pipeline_run</span><span class="p">(</span><span class="n">pipeline_run</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_run</span> <span class="o">=</span> <span class="n">pipeline_run</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">step_run</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">get_run_step</span><span class="p">(</span><span class="n">step_run</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">step_run</span> <span class="o">=</span> <span class="n">step_run</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model_version</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">step_run</span><span class="o">.</span><span class="n">model_version</span> <span class="ow">or</span> <span class="n">pipeline_run</span><span class="o">.</span><span class="n">model_version</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">step_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">step_run</span><span class="o">.</span><span class="n">name</span>

    <span class="c1"># set outputs</span>
    <span class="k">if</span> <span class="n">output_materializers</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">!=</span> <span class="n">output_artifact_uris</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">StepContextError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Mismatched keys in output materializers and output artifact &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;URIs for step `</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_name</span><span class="si">}</span><span class="s2">`. Output materializer &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;keys: </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">output_materializers</span><span class="p">)</span><span class="si">}</span><span class="s2">, output artifact URI &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;keys: </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">output_artifact_uris</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">StepContextOutput</span><span class="p">(</span>
            <span class="n">materializer_classes</span><span class="o">=</span><span class="n">output_materializers</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
            <span class="n">artifact_uri</span><span class="o">=</span><span class="n">output_artifact_uris</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
            <span class="n">artifact_config</span><span class="o">=</span><span class="n">output_artifact_configs</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">output_materializers</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cleanup_registry</span> <span class="o">=</span> <span class="n">CallbackRegistry</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.step_context.StepContext.add_output_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_output_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">output_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Adds metadata for a given step output.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>metadata</code></td>
        <td><code>Dict[str, MetadataType]</code></td>
        <td><p>The metadata to add.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>output_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Optional name of the output for which to add the
metadata. If no name is given and the step only has a single
output, the metadata of this output will be added. If the
step has multiple outputs, an exception will be raised.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/step_context.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_output_metadata</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;MetadataType&quot;</span><span class="p">],</span>
    <span class="n">output_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds metadata for a given step output.</span>

<span class="sd">    Args:</span>
<span class="sd">        metadata: The metadata to add.</span>
<span class="sd">        output_name: Optional name of the output for which to add the</span>
<span class="sd">            metadata. If no name is given and the step only has a single</span>
<span class="sd">            output, the metadata of this output will be added. If the</span>
<span class="sd">            step has multiple outputs, an exception will be raised.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_output</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span><span class="o">.</span><span class="n">run_metadata</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">run_metadata</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">output</span><span class="o">.</span><span class="n">run_metadata</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">metadata</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.step_context.StepContext.add_output_tags" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_output_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">output_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Adds tags for a given step output.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>tags</code></td>
        <td><code>List[str]</code></td>
        <td><p>The tags to add.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>output_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Optional name of the output for which to add the
tags. If no name is given and the step only has a single
output, the tags of this output will be added. If the
step has multiple outputs, an exception will be raised.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/step_context.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_output_tags</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">tags</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">output_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds tags for a given step output.</span>

<span class="sd">    Args:</span>
<span class="sd">        tags: The tags to add.</span>
<span class="sd">        output_name: Optional name of the output for which to add the</span>
<span class="sd">            tags. If no name is given and the step only has a single</span>
<span class="sd">            output, the tags of this output will be added. If the</span>
<span class="sd">            step has multiple outputs, an exception will be raised.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_output</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span><span class="o">.</span><span class="n">tags</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">output</span><span class="o">.</span><span class="n">tags</span> <span class="o">+=</span> <span class="n">tags</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.step_context.StepContext.get_output_artifact_uri" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_output_artifact_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Returns the artifact URI for a given step output.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>output_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Optional name of the output for which to get the URI.
If no name is given and the step only has a single output,
the URI of this output will be returned. If the step has
multiple outputs, an exception will be raised.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Artifact URI for the given output.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/step_context.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_output_artifact_uri</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">output_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the artifact URI for a given step output.</span>

<span class="sd">    Args:</span>
<span class="sd">        output_name: Optional name of the output for which to get the URI.</span>
<span class="sd">            If no name is given and the step only has a single output,</span>
<span class="sd">            the URI of this output will be returned. If the step has</span>
<span class="sd">            multiple outputs, an exception will be raised.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Artifact URI for the given output.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_output</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span><span class="o">.</span><span class="n">artifact_uri</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.step_context.StepContext.get_output_materializer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_output_materializer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">custom_materializer_class</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">data_type</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Returns a materializer for a given step output.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>output_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Optional name of the output for which to get the
materializer. If no name is given and the step only has a
single output, the materializer of this output will be
returned. If the step has multiple outputs, an exception
will be raised.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>custom_materializer_class</code></td>
        <td><code>Optional[Type[BaseMaterializer]]</code></td>
        <td><p>If given, this <code>BaseMaterializer</code>
subclass will be initialized with the output artifact instead
of the materializer that was registered for this step output.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>data_type</code></td>
        <td><code>Optional[Type[Any]]</code></td>
        <td><p>If the output annotation is of type <code>Union</code> and the step
therefore has multiple materializers configured, you can provide
a data type for the output which will be used to select the
correct materializer. If not provided, the first materializer
will be used.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>BaseMaterializer</code></td>
      <td><p>A materializer initialized with the output artifact for
the given output.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/step_context.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_output_materializer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">output_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">custom_materializer_class</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseMaterializer&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">data_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BaseMaterializer&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a materializer for a given step output.</span>

<span class="sd">    Args:</span>
<span class="sd">        output_name: Optional name of the output for which to get the</span>
<span class="sd">            materializer. If no name is given and the step only has a</span>
<span class="sd">            single output, the materializer of this output will be</span>
<span class="sd">            returned. If the step has multiple outputs, an exception</span>
<span class="sd">            will be raised.</span>
<span class="sd">        custom_materializer_class: If given, this `BaseMaterializer`</span>
<span class="sd">            subclass will be initialized with the output artifact instead</span>
<span class="sd">            of the materializer that was registered for this step output.</span>
<span class="sd">        data_type: If the output annotation is of type `Union` and the step</span>
<span class="sd">            therefore has multiple materializers configured, you can provide</span>
<span class="sd">            a data type for the output which will be used to select the</span>
<span class="sd">            correct materializer. If not provided, the first materializer</span>
<span class="sd">            will be used.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A materializer initialized with the output artifact for</span>
<span class="sd">        the given output.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">materializer_utils</span>

    <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_output</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span>
    <span class="n">materializer_classes</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">materializer_classes</span>
    <span class="n">artifact_uri</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">artifact_uri</span>

    <span class="k">if</span> <span class="n">custom_materializer_class</span><span class="p">:</span>
        <span class="n">materializer_class</span> <span class="o">=</span> <span class="n">custom_materializer_class</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">materializer_classes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">data_type</span><span class="p">:</span>
        <span class="n">materializer_class</span> <span class="o">=</span> <span class="n">materializer_classes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">materializer_class</span> <span class="o">=</span> <span class="n">materializer_utils</span><span class="o">.</span><span class="n">select_materializer</span><span class="p">(</span>
            <span class="n">data_type</span><span class="o">=</span><span class="n">data_type</span><span class="p">,</span> <span class="n">materializer_classes</span><span class="o">=</span><span class="n">materializer_classes</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">materializer_class</span><span class="p">(</span><span class="n">artifact_uri</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.step_context.StepContext.get_output_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_output_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Returns the metadata for a given step output.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>output_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Optional name of the output for which to get the
metadata. If no name is given and the step only has a single
output, the metadata of this output will be returned. If the
step has multiple outputs, an exception will be raised.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, MetadataType]</code></td>
      <td><p>Metadata for the given output.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/step_context.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_output_metadata</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">output_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;MetadataType&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the metadata for a given step output.</span>

<span class="sd">    Args:</span>
<span class="sd">        output_name: Optional name of the output for which to get the</span>
<span class="sd">            metadata. If no name is given and the step only has a single</span>
<span class="sd">            output, the metadata of this output will be returned. If the</span>
<span class="sd">            step has multiple outputs, an exception will be raised.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Metadata for the given output.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_output</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span>
    <span class="n">custom_metadata</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">run_metadata</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">output</span><span class="o">.</span><span class="n">artifact_config</span><span class="p">:</span>
        <span class="n">custom_metadata</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="o">**</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">artifact_config</span><span class="o">.</span><span class="n">run_metadata</span> <span class="ow">or</span> <span class="p">{})</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">custom_metadata</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.step_context.StepContext.get_output_tags" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_output_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Returns the tags for a given step output.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>output_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Optional name of the output for which to get the
metadata. If no name is given and the step only has a single
output, the metadata of this output will be returned. If the
step has multiple outputs, an exception will be raised.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[str]</code></td>
      <td><p>Tags for the given output.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/step_context.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_output_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the tags for a given step output.</span>

<span class="sd">    Args:</span>
<span class="sd">        output_name: Optional name of the output for which to get the</span>
<span class="sd">            metadata. If no name is given and the step only has a single</span>
<span class="sd">            output, the metadata of this output will be returned. If the</span>
<span class="sd">            step has multiple outputs, an exception will be raised.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tags for the given output.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_output</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span>
    <span class="n">custom_tags</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">tags</span> <span class="ow">or</span> <span class="p">[])</span>
    <span class="k">if</span> <span class="n">output</span><span class="o">.</span><span class="n">artifact_config</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span>
            <span class="nb">set</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">artifact_config</span><span class="o">.</span><span class="n">tags</span> <span class="ow">or</span> <span class="p">[])</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">custom_tags</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">custom_tags</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="zenml.steps.step_context.StepContextOutput" class="doc doc-heading">
        <code>
StepContextOutput        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Represents a step output in the step context.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/steps/step_context.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StepContextOutput</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a step output in the step context.&quot;&quot;&quot;</span>

    <span class="n">materializer_classes</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseMaterializer&quot;</span><span class="p">]]</span>
    <span class="n">artifact_uri</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">run_metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;MetadataType&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">artifact_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ArtifactConfig&quot;</span><span class="p">]</span>
    <span class="n">tags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">materializer_classes</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseMaterializer&quot;</span><span class="p">]],</span>
        <span class="n">artifact_uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">artifact_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ArtifactConfig&quot;</span><span class="p">],</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the step output.</span>

<span class="sd">        Args:</span>
<span class="sd">            materializer_classes: The materializer classes for the output.</span>
<span class="sd">            artifact_uri: The artifact URI for the output.</span>
<span class="sd">            artifact_config: The ArtifactConfig object of the output.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">materializer_classes</span> <span class="o">=</span> <span class="n">materializer_classes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">artifact_uri</span> <span class="o">=</span> <span class="n">artifact_uri</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">artifact_config</span> <span class="o">=</span> <span class="n">artifact_config</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">











  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.step_context.StepContextOutput.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">materializer_classes</span><span class="p">,</span> <span class="n">artifact_uri</span><span class="p">,</span> <span class="n">artifact_config</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Initialize the step output.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>materializer_classes</code></td>
        <td><code>Sequence[Type[BaseMaterializer]]</code></td>
        <td><p>The materializer classes for the output.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>artifact_uri</code></td>
        <td><code>str</code></td>
        <td><p>The artifact URI for the output.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>artifact_config</code></td>
        <td><code>Optional[ArtifactConfig]</code></td>
        <td><p>The ArtifactConfig object of the output.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/step_context.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">materializer_classes</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseMaterializer&quot;</span><span class="p">]],</span>
    <span class="n">artifact_uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">artifact_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ArtifactConfig&quot;</span><span class="p">],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the step output.</span>

<span class="sd">    Args:</span>
<span class="sd">        materializer_classes: The materializer classes for the output.</span>
<span class="sd">        artifact_uri: The artifact URI for the output.</span>
<span class="sd">        artifact_config: The ArtifactConfig object of the output.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materializer_classes</span> <span class="o">=</span> <span class="n">materializer_classes</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">artifact_uri</span> <span class="o">=</span> <span class="n">artifact_uri</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">artifact_config</span> <span class="o">=</span> <span class="n">artifact_config</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h4 id="zenml.steps.step_context.get_step_context" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step_context</span><span class="p">()</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Get the context of the currently running step.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>StepContext</code></td>
      <td><p>The context of the currently running step.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If no step is currently running.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/step_context.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_step_context</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="s2">&quot;StepContext&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the context of the currently running step.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The context of the currently running step.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If no step is currently running.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">StepContext</span><span class="o">.</span><span class="n">_exists</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">StepContext</span><span class="p">()</span>  <span class="c1"># type: ignore</span>
    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
        <span class="s2">&quot;The step context is only available inside a step function.&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.steps.step_decorator" class="doc doc-heading">
        <code>step_decorator</code>



</h3>

    <div class="doc doc-contents ">

      <p>Step decorator function.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-function">



<h4 id="zenml.steps.step_decorator.step" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step</span><span class="p">(</span><span class="n">_func</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enable_cache</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enable_artifact_metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enable_artifact_visualization</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enable_step_logs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">experiment_tracker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">step_operator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">output_materializers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">settings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">on_failure</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">on_success</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">retry</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">substitutions</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Decorator to create a ZenML step.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>_func</code></td>
        <td><code>Optional[F]</code></td>
        <td><p>The decorated function.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The name of the step. If left empty, the name of the decorated
function will be used as a fallback.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>enable_cache</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>Specify whether caching is enabled for this step. If no
value is passed, caching is enabled by default.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>enable_artifact_metadata</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>Specify whether metadata is enabled for this
step. If no value is passed, metadata is enabled by default.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>enable_artifact_visualization</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>Specify whether visualization is enabled
for this step. If no value is passed, visualization is enabled by
default.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>enable_step_logs</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>Specify whether step logs are enabled for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>experiment_tracker</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The experiment tracker to use for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>step_operator</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The step operator to use for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>output_materializers</code></td>
        <td><code>Optional[OutputMaterializersSpecification]</code></td>
        <td><p>Output materializers for this step. If
given as a dict, the keys must be a subset of the output names
of this step. If a single value (type or string) is given, the
materializer will be used for all outputs.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>settings</code></td>
        <td><code>Optional[Dict[str, SettingsOrDict]]</code></td>
        <td><p>Settings for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>extra</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>Extra configurations for this step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>on_failure</code></td>
        <td><code>Optional[HookSpecification]</code></td>
        <td><p>Callback function in event of failure of the step. Can be a
function with a single argument of type <code>BaseException</code>, or a source
path to such a function (e.g. <code>module.my_function</code>).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>on_success</code></td>
        <td><code>Optional[HookSpecification]</code></td>
        <td><p>Callback function in event of success of the step. Can be a
function with no arguments, or a source path to such a function
(e.g. <code>module.my_function</code>).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>model</code></td>
        <td><code>Optional[Model]</code></td>
        <td><p>configuration of the model in the Model Control Plane.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>retry</code></td>
        <td><code>Optional[StepRetryConfig]</code></td>
        <td><p>configuration of step retry in case of step failure.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>substitutions</code></td>
        <td><code>Optional[Dict[str, str]]</code></td>
        <td><p>Extra placeholders for the step name.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Union[BaseStep, Callable[[F], BaseStep]]</code></td>
      <td><p>The step instance.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/step_decorator.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">step</span><span class="p">(</span>
    <span class="n">_func</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_cache</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_artifact_metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_artifact_visualization</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_step_logs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">experiment_tracker</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">step_operator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">output_materializers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;OutputMaterializersSpecification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">settings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;SettingsOrDict&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">extra</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">on_failure</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;HookSpecification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">on_success</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;HookSpecification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">retry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;StepRetryConfig&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">substitutions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;BaseStep&quot;</span><span class="p">,</span> <span class="n">Callable</span><span class="p">[[</span><span class="s2">&quot;F&quot;</span><span class="p">],</span> <span class="s2">&quot;BaseStep&quot;</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to create a ZenML step.</span>

<span class="sd">    Args:</span>
<span class="sd">        _func: The decorated function.</span>
<span class="sd">        name: The name of the step. If left empty, the name of the decorated</span>
<span class="sd">            function will be used as a fallback.</span>
<span class="sd">        enable_cache: Specify whether caching is enabled for this step. If no</span>
<span class="sd">            value is passed, caching is enabled by default.</span>
<span class="sd">        enable_artifact_metadata: Specify whether metadata is enabled for this</span>
<span class="sd">            step. If no value is passed, metadata is enabled by default.</span>
<span class="sd">        enable_artifact_visualization: Specify whether visualization is enabled</span>
<span class="sd">            for this step. If no value is passed, visualization is enabled by</span>
<span class="sd">            default.</span>
<span class="sd">        enable_step_logs: Specify whether step logs are enabled for this step.</span>
<span class="sd">        experiment_tracker: The experiment tracker to use for this step.</span>
<span class="sd">        step_operator: The step operator to use for this step.</span>
<span class="sd">        output_materializers: Output materializers for this step. If</span>
<span class="sd">            given as a dict, the keys must be a subset of the output names</span>
<span class="sd">            of this step. If a single value (type or string) is given, the</span>
<span class="sd">            materializer will be used for all outputs.</span>
<span class="sd">        settings: Settings for this step.</span>
<span class="sd">        extra: Extra configurations for this step.</span>
<span class="sd">        on_failure: Callback function in event of failure of the step. Can be a</span>
<span class="sd">            function with a single argument of type `BaseException`, or a source</span>
<span class="sd">            path to such a function (e.g. `module.my_function`).</span>
<span class="sd">        on_success: Callback function in event of success of the step. Can be a</span>
<span class="sd">            function with no arguments, or a source path to such a function</span>
<span class="sd">            (e.g. `module.my_function`).</span>
<span class="sd">        model: configuration of the model in the Model Control Plane.</span>
<span class="sd">        retry: configuration of step retry in case of step failure.</span>
<span class="sd">        substitutions: Extra placeholders for the step name.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The step instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">inner_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="s2">&quot;F&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BaseStep&quot;</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.steps.decorated_step</span><span class="w"> </span><span class="kn">import</span> <span class="n">_DecoratedStep</span>

        <span class="n">class_</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseStep&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span>
            <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="p">(</span><span class="n">_DecoratedStep</span><span class="p">,),</span>
            <span class="p">{</span>
                <span class="s2">&quot;entrypoint&quot;</span><span class="p">:</span> <span class="nb">staticmethod</span><span class="p">(</span><span class="n">func</span><span class="p">),</span>
                <span class="s2">&quot;__module__&quot;</span><span class="p">:</span> <span class="n">func</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span>
                <span class="s2">&quot;__doc__&quot;</span><span class="p">:</span> <span class="n">func</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">)</span>

        <span class="n">step_instance</span> <span class="o">=</span> <span class="n">class_</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span> <span class="ow">or</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="n">enable_cache</span><span class="o">=</span><span class="n">enable_cache</span><span class="p">,</span>
            <span class="n">enable_artifact_metadata</span><span class="o">=</span><span class="n">enable_artifact_metadata</span><span class="p">,</span>
            <span class="n">enable_artifact_visualization</span><span class="o">=</span><span class="n">enable_artifact_visualization</span><span class="p">,</span>
            <span class="n">enable_step_logs</span><span class="o">=</span><span class="n">enable_step_logs</span><span class="p">,</span>
            <span class="n">experiment_tracker</span><span class="o">=</span><span class="n">experiment_tracker</span><span class="p">,</span>
            <span class="n">step_operator</span><span class="o">=</span><span class="n">step_operator</span><span class="p">,</span>
            <span class="n">output_materializers</span><span class="o">=</span><span class="n">output_materializers</span><span class="p">,</span>
            <span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">,</span>
            <span class="n">extra</span><span class="o">=</span><span class="n">extra</span><span class="p">,</span>
            <span class="n">on_failure</span><span class="o">=</span><span class="n">on_failure</span><span class="p">,</span>
            <span class="n">on_success</span><span class="o">=</span><span class="n">on_success</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
            <span class="n">retry</span><span class="o">=</span><span class="n">retry</span><span class="p">,</span>
            <span class="n">substitutions</span><span class="o">=</span><span class="n">substitutions</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">step_instance</span>

    <span class="k">if</span> <span class="n">_func</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">inner_decorator</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">inner_decorator</span><span class="p">(</span><span class="n">_func</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.steps.step_invocation" class="doc doc-heading">
        <code>step_invocation</code>



</h3>

    <div class="doc doc-contents ">

      <p>Step invocation class definition.</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="zenml.steps.step_invocation.StepInvocation" class="doc doc-heading">
        <code>
StepInvocation        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Step invocation class.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/steps/step_invocation.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StepInvocation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Step invocation class.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">step</span><span class="p">:</span> <span class="s2">&quot;BaseStep&quot;</span><span class="p">,</span>
        <span class="n">input_artifacts</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;StepArtifact&quot;</span><span class="p">],</span>
        <span class="n">external_artifacts</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;ExternalArtifact&quot;</span><span class="p">,</span> <span class="s2">&quot;ArtifactVersionResponse&quot;</span><span class="p">]</span>
        <span class="p">],</span>
        <span class="n">model_artifacts_or_metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ModelVersionDataLazyLoader&quot;</span><span class="p">],</span>
        <span class="n">client_lazy_loaders</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ClientLazyLoader&quot;</span><span class="p">],</span>
        <span class="n">parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">default_parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">upstream_steps</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">pipeline</span><span class="p">:</span> <span class="s2">&quot;Pipeline&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a step invocation.</span>

<span class="sd">        Args:</span>
<span class="sd">            id: The invocation ID.</span>
<span class="sd">            step: The step that is represented by the invocation.</span>
<span class="sd">            input_artifacts: The input artifacts for the invocation.</span>
<span class="sd">            external_artifacts: The external artifacts for the invocation.</span>
<span class="sd">            model_artifacts_or_metadata: The model artifacts or metadata for</span>
<span class="sd">                the invocation.</span>
<span class="sd">            client_lazy_loaders: The client lazy loaders for the invocation.</span>
<span class="sd">            parameters: The parameters for the invocation.</span>
<span class="sd">            default_parameters: The default parameters for the invocation.</span>
<span class="sd">            upstream_steps: The upstream steps for the invocation.</span>
<span class="sd">            pipeline: The parent pipeline of the invocation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">step</span> <span class="o">=</span> <span class="n">step</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span> <span class="o">=</span> <span class="n">input_artifacts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">external_artifacts</span> <span class="o">=</span> <span class="n">external_artifacts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model_artifacts_or_metadata</span> <span class="o">=</span> <span class="n">model_artifacts_or_metadata</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client_lazy_loaders</span> <span class="o">=</span> <span class="n">client_lazy_loaders</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="n">parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_parameters</span> <span class="o">=</span> <span class="n">default_parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">upstream_steps</span> <span class="o">=</span> <span class="n">upstream_steps</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span> <span class="o">=</span> <span class="n">pipeline</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters_to_ignore</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;StepConfiguration&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Finalizes a step invocation.</span>

<span class="sd">        It will validate the upstream steps and run final configurations on the</span>
<span class="sd">        step that is represented by the invocation.</span>

<span class="sd">        Args:</span>
<span class="sd">            parameters_to_ignore: Set of parameters that should not be applied</span>
<span class="sd">                to the step instance.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The finalized step configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.artifacts.external_artifact_config</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
            <span class="n">ExternalArtifactConfiguration</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">parameters_to_apply</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">key</span><span class="p">:</span> <span class="n">value</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">parameters_to_ignore</span>
        <span class="p">}</span>
        <span class="n">parameters_to_apply</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="n">key</span><span class="p">:</span> <span class="n">value</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_parameters</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">parameters_to_ignore</span>
                <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">parameters_to_apply</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">parameters</span><span class="o">=</span><span class="n">parameters_to_apply</span><span class="p">)</span>

        <span class="n">external_artifacts</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ExternalArtifactConfiguration</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">artifact</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">external_artifacts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">artifact</span><span class="p">,</span> <span class="n">ArtifactVersionResponse</span><span class="p">):</span>
                <span class="n">external_artifacts</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">ExternalArtifactConfiguration</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="n">artifact</span><span class="o">.</span><span class="n">id</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">artifact</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">artifact</span><span class="o">.</span><span class="n">upload_by_value</span><span class="p">()</span>
                <span class="n">external_artifacts</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">artifact</span><span class="o">.</span><span class="n">config</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="n">_finalize_configuration</span><span class="p">(</span>
            <span class="n">input_artifacts</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span><span class="p">,</span>
            <span class="n">external_artifacts</span><span class="o">=</span><span class="n">external_artifacts</span><span class="p">,</span>
            <span class="n">model_artifacts_or_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_artifacts_or_metadata</span><span class="p">,</span>
            <span class="n">client_lazy_loaders</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">client_lazy_loaders</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.step_invocation.StepInvocation.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span> <span class="n">input_artifacts</span><span class="p">,</span> <span class="n">external_artifacts</span><span class="p">,</span> <span class="n">model_artifacts_or_metadata</span><span class="p">,</span> <span class="n">client_lazy_loaders</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">default_parameters</span><span class="p">,</span> <span class="n">upstream_steps</span><span class="p">,</span> <span class="n">pipeline</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Initialize a step invocation.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>id</code></td>
        <td><code>str</code></td>
        <td><p>The invocation ID.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>step</code></td>
        <td><code>BaseStep</code></td>
        <td><p>The step that is represented by the invocation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>input_artifacts</code></td>
        <td><code>Dict[str, StepArtifact]</code></td>
        <td><p>The input artifacts for the invocation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>external_artifacts</code></td>
        <td><code>Dict[str, Union[ExternalArtifact, ArtifactVersionResponse]]</code></td>
        <td><p>The external artifacts for the invocation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>model_artifacts_or_metadata</code></td>
        <td><code>Dict[str, ModelVersionDataLazyLoader]</code></td>
        <td><p>The model artifacts or metadata for
the invocation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>client_lazy_loaders</code></td>
        <td><code>Dict[str, ClientLazyLoader]</code></td>
        <td><p>The client lazy loaders for the invocation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>parameters</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>The parameters for the invocation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>default_parameters</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>The default parameters for the invocation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>upstream_steps</code></td>
        <td><code>Set[str]</code></td>
        <td><p>The upstream steps for the invocation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>pipeline</code></td>
        <td><code>Pipeline</code></td>
        <td><p>The parent pipeline of the invocation.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/step_invocation.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">step</span><span class="p">:</span> <span class="s2">&quot;BaseStep&quot;</span><span class="p">,</span>
    <span class="n">input_artifacts</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;StepArtifact&quot;</span><span class="p">],</span>
    <span class="n">external_artifacts</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;ExternalArtifact&quot;</span><span class="p">,</span> <span class="s2">&quot;ArtifactVersionResponse&quot;</span><span class="p">]</span>
    <span class="p">],</span>
    <span class="n">model_artifacts_or_metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ModelVersionDataLazyLoader&quot;</span><span class="p">],</span>
    <span class="n">client_lazy_loaders</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ClientLazyLoader&quot;</span><span class="p">],</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">default_parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">upstream_steps</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">pipeline</span><span class="p">:</span> <span class="s2">&quot;Pipeline&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize a step invocation.</span>

<span class="sd">    Args:</span>
<span class="sd">        id: The invocation ID.</span>
<span class="sd">        step: The step that is represented by the invocation.</span>
<span class="sd">        input_artifacts: The input artifacts for the invocation.</span>
<span class="sd">        external_artifacts: The external artifacts for the invocation.</span>
<span class="sd">        model_artifacts_or_metadata: The model artifacts or metadata for</span>
<span class="sd">            the invocation.</span>
<span class="sd">        client_lazy_loaders: The client lazy loaders for the invocation.</span>
<span class="sd">        parameters: The parameters for the invocation.</span>
<span class="sd">        default_parameters: The default parameters for the invocation.</span>
<span class="sd">        upstream_steps: The upstream steps for the invocation.</span>
<span class="sd">        pipeline: The parent pipeline of the invocation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">step</span> <span class="o">=</span> <span class="n">step</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span> <span class="o">=</span> <span class="n">input_artifacts</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">external_artifacts</span> <span class="o">=</span> <span class="n">external_artifacts</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model_artifacts_or_metadata</span> <span class="o">=</span> <span class="n">model_artifacts_or_metadata</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">client_lazy_loaders</span> <span class="o">=</span> <span class="n">client_lazy_loaders</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="n">parameters</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_parameters</span> <span class="o">=</span> <span class="n">default_parameters</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">upstream_steps</span> <span class="o">=</span> <span class="n">upstream_steps</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span> <span class="o">=</span> <span class="n">pipeline</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.step_invocation.StepInvocation.finalize" class="doc doc-heading">
<code class="highlight language-python"><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters_to_ignore</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Finalizes a step invocation.</p>
<p>It will validate the upstream steps and run final configurations on the
step that is represented by the invocation.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>parameters_to_ignore</code></td>
        <td><code>Set[str]</code></td>
        <td><p>Set of parameters that should not be applied
to the step instance.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>StepConfiguration</code></td>
      <td><p>The finalized step configuration.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/step_invocation.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters_to_ignore</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;StepConfiguration&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finalizes a step invocation.</span>

<span class="sd">    It will validate the upstream steps and run final configurations on the</span>
<span class="sd">    step that is represented by the invocation.</span>

<span class="sd">    Args:</span>
<span class="sd">        parameters_to_ignore: Set of parameters that should not be applied</span>
<span class="sd">            to the step instance.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The finalized step configuration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.artifacts.external_artifact_config</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
        <span class="n">ExternalArtifactConfiguration</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">parameters_to_apply</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">value</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">parameters_to_ignore</span>
    <span class="p">}</span>
    <span class="n">parameters_to_apply</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="n">key</span><span class="p">:</span> <span class="n">value</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_parameters</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">parameters_to_ignore</span>
            <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">parameters_to_apply</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">parameters</span><span class="o">=</span><span class="n">parameters_to_apply</span><span class="p">)</span>

    <span class="n">external_artifacts</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ExternalArtifactConfiguration</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">artifact</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">external_artifacts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">artifact</span><span class="p">,</span> <span class="n">ArtifactVersionResponse</span><span class="p">):</span>
            <span class="n">external_artifacts</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">ExternalArtifactConfiguration</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">artifact</span><span class="o">.</span><span class="n">id</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">artifact</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">artifact</span><span class="o">.</span><span class="n">upload_by_value</span><span class="p">()</span>
            <span class="n">external_artifacts</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">artifact</span><span class="o">.</span><span class="n">config</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="n">_finalize_configuration</span><span class="p">(</span>
        <span class="n">input_artifacts</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span><span class="p">,</span>
        <span class="n">external_artifacts</span><span class="o">=</span><span class="n">external_artifacts</span><span class="p">,</span>
        <span class="n">model_artifacts_or_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_artifacts_or_metadata</span><span class="p">,</span>
        <span class="n">client_lazy_loaders</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">client_lazy_loaders</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.steps.utils" class="doc doc-heading">
        <code>utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utility functions and classes to run ZenML steps.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h4 id="zenml.steps.utils.OnlyNoneReturnsVisitor" class="doc doc-heading">
        <code>
OnlyNoneReturnsVisitor            (<a class="autorefs autorefs-internal" title="zenml.steps.utils.ReturnVisitor" href="#zenml.steps.utils.ReturnVisitor">ReturnVisitor</a>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Checks whether a function AST contains only <code>None</code> returns.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">OnlyNoneReturnsVisitor</span><span class="p">(</span><span class="n">ReturnVisitor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks whether a function AST contains only `None` returns.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initializes a visitor instance.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">has_only_none_returns</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">visit_Return</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Return</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Visit a return statement.</span>

<span class="sd">        Args:</span>
<span class="sd">            node: The return statement to visit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">Constant</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">NameConstant</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">has_only_none_returns</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.utils.OnlyNoneReturnsVisitor.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Initializes a visitor instance.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes a visitor instance.&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">has_only_none_returns</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.utils.OnlyNoneReturnsVisitor.visit_Return" class="doc doc-heading">
<code class="highlight language-python"><span class="n">visit_Return</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Visit a return statement.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>node</code></td>
        <td><code>Return</code></td>
        <td><p>The return statement to visit.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">visit_Return</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Return</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visit a return statement.</span>

<span class="sd">    Args:</span>
<span class="sd">        node: The return statement to visit.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">Constant</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">NameConstant</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">has_only_none_returns</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="zenml.steps.utils.OutputSignature" class="doc doc-heading">
        <code>
OutputSignature            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>The signature of an output artifact.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">OutputSignature</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The signature of an output artifact.&quot;&quot;&quot;</span>

    <span class="n">resolved_annotation</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">artifact_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ArtifactConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">has_custom_name</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_output_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all output types that match the type annotation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            All output types that match the type annotation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolved_annotation</span> <span class="ow">is</span> <span class="n">Any</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">()</span>

        <span class="k">if</span> <span class="n">typing_utils</span><span class="o">.</span><span class="n">is_union</span><span class="p">(</span>
            <span class="n">typing_utils</span><span class="o">.</span><span class="n">get_origin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolved_annotation</span><span class="p">)</span>
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolved_annotation</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span>
                <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">typing_utils</span><span class="o">.</span><span class="n">is_none_type</span><span class="p">(</span><span class="n">output_type</span><span class="p">)</span>
                <span class="k">else</span> <span class="n">output_type</span>
                <span class="k">for</span> <span class="n">output_type</span> <span class="ow">in</span> <span class="n">get_args</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolved_annotation</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolved_annotation</span><span class="p">,)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">
























  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.utils.OutputSignature.get_output_types" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_output_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Get all output types that match the type annotation.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tuple[Any, ...]</code></td>
      <td><p>All output types that match the type annotation.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_output_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get all output types that match the type annotation.</span>

<span class="sd">    Returns:</span>
<span class="sd">        All output types that match the type annotation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolved_annotation</span> <span class="ow">is</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">()</span>

    <span class="k">if</span> <span class="n">typing_utils</span><span class="o">.</span><span class="n">is_union</span><span class="p">(</span>
        <span class="n">typing_utils</span><span class="o">.</span><span class="n">get_origin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolved_annotation</span><span class="p">)</span>
        <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolved_annotation</span>
    <span class="p">):</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span>
            <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">typing_utils</span><span class="o">.</span><span class="n">is_none_type</span><span class="p">(</span><span class="n">output_type</span><span class="p">)</span>
            <span class="k">else</span> <span class="n">output_type</span>
            <span class="k">for</span> <span class="n">output_type</span> <span class="ow">in</span> <span class="n">get_args</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolved_annotation</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolved_annotation</span><span class="p">,)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="zenml.steps.utils.ReturnVisitor" class="doc doc-heading">
        <code>
ReturnVisitor            (<span title="ast.NodeVisitor">NodeVisitor</span>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>AST visitor class that can be subclassed to visit function returns.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ReturnVisitor</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">NodeVisitor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AST visitor class that can be subclassed to visit function returns.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore_nested_functions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initializes a return visitor instance.</span>

<span class="sd">        Args:</span>
<span class="sd">            ignore_nested_functions: If `True`, will skip visiting nested</span>
<span class="sd">                functions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ignore_nested_functions</span> <span class="o">=</span> <span class="n">ignore_nested_functions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inside_function</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_visit_function</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">FunctionDef</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">AsyncFunctionDef</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Visit a (async) function definition node.</span>

<span class="sd">        Args:</span>
<span class="sd">            node: The node to visit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ignore_nested_functions</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inside_function</span><span class="p">:</span>
            <span class="c1"># We&#39;re already inside a function definition and should ignore</span>
            <span class="c1"># nested functions so we don&#39;t want to recurse any further</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_inside_function</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generic_visit</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

    <span class="n">visit_FunctionDef</span> <span class="o">=</span> <span class="n">_visit_function</span>
    <span class="n">visit_AsyncFunctionDef</span> <span class="o">=</span> <span class="n">_visit_function</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.utils.ReturnVisitor.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore_nested_functions</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Initializes a return visitor instance.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ignore_nested_functions</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code>, will skip visiting nested
functions.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore_nested_functions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes a return visitor instance.</span>

<span class="sd">    Args:</span>
<span class="sd">        ignore_nested_functions: If `True`, will skip visiting nested</span>
<span class="sd">            functions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ignore_nested_functions</span> <span class="o">=</span> <span class="n">ignore_nested_functions</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_inside_function</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.utils.ReturnVisitor.visit_AsyncFunctionDef" class="doc doc-heading">
<code class="highlight language-python"><span class="n">visit_AsyncFunctionDef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Visit a (async) function definition node.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>node</code></td>
        <td><code>Union[ast.FunctionDef, ast.AsyncFunctionDef]</code></td>
        <td><p>The node to visit.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_visit_function</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">FunctionDef</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">AsyncFunctionDef</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visit a (async) function definition node.</span>

<span class="sd">    Args:</span>
<span class="sd">        node: The node to visit.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ignore_nested_functions</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inside_function</span><span class="p">:</span>
        <span class="c1"># We&#39;re already inside a function definition and should ignore</span>
        <span class="c1"># nested functions so we don&#39;t want to recurse any further</span>
        <span class="k">return</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_inside_function</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">generic_visit</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.utils.ReturnVisitor.visit_FunctionDef" class="doc doc-heading">
<code class="highlight language-python"><span class="n">visit_FunctionDef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Visit a (async) function definition node.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>node</code></td>
        <td><code>Union[ast.FunctionDef, ast.AsyncFunctionDef]</code></td>
        <td><p>The node to visit.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_visit_function</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">FunctionDef</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">AsyncFunctionDef</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visit a (async) function definition node.</span>

<span class="sd">    Args:</span>
<span class="sd">        node: The node to visit.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ignore_nested_functions</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inside_function</span><span class="p">:</span>
        <span class="c1"># We&#39;re already inside a function definition and should ignore</span>
        <span class="c1"># nested functions so we don&#39;t want to recurse any further</span>
        <span class="k">return</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_inside_function</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">generic_visit</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="zenml.steps.utils.TupleReturnVisitor" class="doc doc-heading">
        <code>
TupleReturnVisitor            (<a class="autorefs autorefs-internal" title="zenml.steps.utils.ReturnVisitor" href="#zenml.steps.utils.ReturnVisitor">ReturnVisitor</a>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Checks whether a function AST contains tuple returns.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TupleReturnVisitor</span><span class="p">(</span><span class="n">ReturnVisitor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks whether a function AST contains tuple returns.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initializes a visitor instance.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">has_tuple_return</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">visit_Return</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Return</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Visit a return statement.</span>

<span class="sd">        Args:</span>
<span class="sd">            node: The return statement to visit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">elts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">has_tuple_return</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.utils.TupleReturnVisitor.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Initializes a visitor instance.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes a visitor instance.&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">has_tuple_return</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.steps.utils.TupleReturnVisitor.visit_Return" class="doc doc-heading">
<code class="highlight language-python"><span class="n">visit_Return</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Visit a return statement.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>node</code></td>
        <td><code>Return</code></td>
        <td><p>The return statement to visit.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">visit_Return</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Return</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visit a return statement.</span>

<span class="sd">    Args:</span>
<span class="sd">        node: The return statement to visit.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">elts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">has_tuple_return</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h4 id="zenml.steps.utils.get_args" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_args</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Get arguments of a type annotation.</p>

<p><strong>Examples:</strong></p>
    <p><code>get_args(Union[int, str]) == (int, str)</code></p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>obj</code></td>
        <td><code>Any</code></td>
        <td><p>The annotation.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tuple[Any, ...]</code></td>
      <td><p>The args of the annotation.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_args</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get arguments of a type annotation.</span>

<span class="sd">    Example:</span>
<span class="sd">        `get_args(Union[int, str]) == (int, str)`</span>

<span class="sd">    Args:</span>
<span class="sd">        obj: The annotation.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The args of the annotation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span>
        <span class="n">typing_utils</span><span class="o">.</span><span class="n">get_origin</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="ow">or</span> <span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">typing_utils</span><span class="o">.</span><span class="n">get_args</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.steps.utils.get_artifact_config_from_annotation_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_artifact_config_from_annotation_metadata</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Get the artifact config from the annotation metadata of a step output.</p>

<p><strong>Examples:</strong></p>
    
      <pre><code class="language-python">get_output_name_from_annotation_metadata(int)  # None
get_output_name_from_annotation_metadata(Annotated[int, &quot;name&quot;]  # ArtifactConfig(name=&quot;name&quot;)
get_output_name_from_annotation_metadata(Annotated[int, ArtifactConfig(name=&quot;name&quot;, model_name=&quot;foo&quot;)]  # ArtifactConfig(name=&quot;name&quot;, model_name=&quot;foo&quot;)
</code></pre>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>annotation</code></td>
        <td><code>Any</code></td>
        <td><p>The type annotation.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the annotation is not following the expected format
or if the name was specified multiple times or is an empty string.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[zenml.artifacts.artifact_config.ArtifactConfig]</code></td>
      <td><p>The artifact config.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_artifact_config_from_annotation_metadata</span><span class="p">(</span>
    <span class="n">annotation</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ArtifactConfig</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the artifact config from the annotation metadata of a step output.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    get_output_name_from_annotation_metadata(int)  # None</span>
<span class="sd">    get_output_name_from_annotation_metadata(Annotated[int, &quot;name&quot;]  # ArtifactConfig(name=&quot;name&quot;)</span>
<span class="sd">    get_output_name_from_annotation_metadata(Annotated[int, ArtifactConfig(name=&quot;name&quot;, model_name=&quot;foo&quot;)]  # ArtifactConfig(name=&quot;name&quot;, model_name=&quot;foo&quot;)</span>
<span class="sd">    ```</span>

<span class="sd">    Args:</span>
<span class="sd">        annotation: The type annotation.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the annotation is not following the expected format</span>
<span class="sd">            or if the name was specified multiple times or is an empty string.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The artifact config.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">typing_utils</span><span class="o">.</span><span class="n">get_origin</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span> <span class="ow">or</span> <span class="n">annotation</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">Annotated</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="n">annotation</span><span class="p">,</span> <span class="o">*</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">typing_utils</span><span class="o">.</span><span class="n">get_args</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span>

    <span class="n">error_message</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;Artifact annotation should only contain two elements: the artifact &quot;</span>
        <span class="s2">&quot;type, and one of the following: { a static or dynamic name || &quot;</span>
        <span class="s2">&quot;an `ArtifactConfig` }, e.g.: &quot;</span>
        <span class="s2">&quot;`Annotated[int, &#39;output_name&#39;]` || &quot;</span>
        <span class="s2">&quot;`Annotated[int, &#39;output_</span><span class="si">{placeholder}</span><span class="s2">&#39;]` || &quot;</span>
        <span class="s2">&quot;`Annotated[int, ArtifactConfig(name=&#39;output_</span><span class="si">{placeholder}</span><span class="s2">&#39;)]` ||&quot;</span>
        <span class="s2">&quot;`Annotated[int, ArtifactConfig(name=&#39;output_name&#39;)]`.&quot;</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>

    <span class="c1"># Loop over all values to also support legacy annotations of the form</span>
    <span class="c1"># `Annotated[int, &#39;output_name&#39;, ArtifactConfig(...)]`</span>
    <span class="n">output_name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">artifact_config</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">metadata_instance</span> <span class="ow">in</span> <span class="n">metadata</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">metadata_instance</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">output_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>
            <span class="n">output_name</span> <span class="o">=</span> <span class="n">metadata_instance</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">metadata_instance</span><span class="p">,</span> <span class="n">ArtifactConfig</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">artifact_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>
            <span class="n">artifact_config</span> <span class="o">=</span> <span class="n">metadata_instance</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>

    <span class="c1"># Consolidate output name</span>
    <span class="k">if</span> <span class="n">artifact_config</span> <span class="ow">and</span> <span class="n">artifact_config</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">output_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">output_name</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">artifact_config</span><span class="p">:</span>
            <span class="n">artifact_config</span> <span class="o">=</span> <span class="n">ArtifactConfig</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">output_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">artifact_config</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="n">artifact_config</span> <span class="o">=</span> <span class="n">artifact_config</span><span class="o">.</span><span class="n">model_copy</span><span class="p">()</span>
            <span class="n">artifact_config</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">output_name</span>

    <span class="k">if</span> <span class="n">artifact_config</span> <span class="ow">and</span> <span class="n">artifact_config</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Output name cannot be an empty string.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">artifact_config</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.steps.utils.has_only_none_returns" class="doc doc-heading">
<code class="highlight language-python"><span class="n">has_only_none_returns</span><span class="p">(</span><span class="n">func</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks whether a function contains only <code>None</code> returns.</p>
<p>A <code>None</code> return could be either an explicit <code>return None</code> or an empty
<code>return</code> statement.</p>

<p><strong>Examples:</strong></p>
    
      <pre><code class="language-python">def f1():
  return None

def f2():
  return

def f3(condition):
  if condition:
    return None
  else:
    return 1

has_only_none_returns(f1)  # True
has_only_none_returns(f2)  # True
has_only_none_returns(f3)  # False
</code></pre>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>func</code></td>
        <td><code>Callable[..., Any]</code></td>
        <td><p>The function to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Whether the function contains only <code>None</code> returns.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">has_only_none_returns</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks whether a function contains only `None` returns.</span>

<span class="sd">    A `None` return could be either an explicit `return None` or an empty</span>
<span class="sd">    `return` statement.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    def f1():</span>
<span class="sd">      return None</span>

<span class="sd">    def f2():</span>
<span class="sd">      return</span>

<span class="sd">    def f3(condition):</span>
<span class="sd">      if condition:</span>
<span class="sd">        return None</span>
<span class="sd">      else:</span>
<span class="sd">        return 1</span>

<span class="sd">    has_only_none_returns(f1)  # True</span>
<span class="sd">    has_only_none_returns(f2)  # True</span>
<span class="sd">    has_only_none_returns(f3)  # False</span>
<span class="sd">    ```</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The function to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Whether the function contains only `None` returns.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="n">source_code_utils</span><span class="o">.</span><span class="n">get_source_code</span><span class="p">(</span><span class="n">func</span><span class="p">))</span>
    <span class="n">tree</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

    <span class="n">visitor</span> <span class="o">=</span> <span class="n">OnlyNoneReturnsVisitor</span><span class="p">()</span>
    <span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">visitor</span><span class="o">.</span><span class="n">has_only_none_returns</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.steps.utils.has_tuple_return" class="doc doc-heading">
<code class="highlight language-python"><span class="n">has_tuple_return</span><span class="p">(</span><span class="n">func</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks whether a function returns multiple values.</p>
<p>Multiple values means that the <code>return</code> statement is followed by a tuple
(with or without brackets).</p>

<p><strong>Examples:</strong></p>
    
      <pre><code class="language-python">def f1():
  return 1, 2

def f2():
  return (1, 2)

def f3():
  var = (1, 2)
  return var

has_tuple_return(f1)  # True
has_tuple_return(f2)  # True
has_tuple_return(f3)  # False
</code></pre>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>func</code></td>
        <td><code>Callable[..., Any]</code></td>
        <td><p>The function to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Whether the function returns multiple values.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">has_tuple_return</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks whether a function returns multiple values.</span>

<span class="sd">    Multiple values means that the `return` statement is followed by a tuple</span>
<span class="sd">    (with or without brackets).</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">    def f1():</span>
<span class="sd">      return 1, 2</span>

<span class="sd">    def f2():</span>
<span class="sd">      return (1, 2)</span>

<span class="sd">    def f3():</span>
<span class="sd">      var = (1, 2)</span>
<span class="sd">      return var</span>

<span class="sd">    has_tuple_return(f1)  # True</span>
<span class="sd">    has_tuple_return(f2)  # True</span>
<span class="sd">    has_tuple_return(f3)  # False</span>
<span class="sd">    ```</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The function to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Whether the function returns multiple values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="n">source_code_utils</span><span class="o">.</span><span class="n">get_source_code</span><span class="p">(</span><span class="n">func</span><span class="p">))</span>
    <span class="n">tree</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

    <span class="n">visitor</span> <span class="o">=</span> <span class="n">TupleReturnVisitor</span><span class="p">()</span>
    <span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">visitor</span><span class="o">.</span><span class="n">has_tuple_return</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.steps.utils.log_step_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">log_step_metadata</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">step_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pipeline_name_id_or_prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">run_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Logs step metadata.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>metadata</code></td>
        <td><code>Dict[str, MetadataType]</code></td>
        <td><p>The metadata to log.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>step_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The name of the step to log metadata for. Can be omitted
when being called inside a step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>pipeline_name_id_or_prefix</code></td>
        <td><code>Union[str, uuid.UUID]</code></td>
        <td><p>The name of the pipeline to log metadata
for. Can be omitted when being called inside a step.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>run_id</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The ID of the run to log metadata for. Can be omitted when
being called inside a step.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If no step name is provided and the function is not called
from within a step or if no pipeline name or ID is provided and
the function is not called from within a step.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">log_step_metadata</span><span class="p">(</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;MetadataType&quot;</span><span class="p">],</span>
    <span class="n">step_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">pipeline_name_id_or_prefix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Logs step metadata.</span>

<span class="sd">    Args:</span>
<span class="sd">        metadata: The metadata to log.</span>
<span class="sd">        step_name: The name of the step to log metadata for. Can be omitted</span>
<span class="sd">            when being called inside a step.</span>
<span class="sd">        pipeline_name_id_or_prefix: The name of the pipeline to log metadata</span>
<span class="sd">            for. Can be omitted when being called inside a step.</span>
<span class="sd">        run_id: The ID of the run to log metadata for. Can be omitted when</span>
<span class="sd">            being called inside a step.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If no step name is provided and the function is not called</span>
<span class="sd">            from within a step or if no pipeline name or ID is provided and</span>
<span class="sd">            the function is not called from within a step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
        <span class="s2">&quot;The `log_step_metadata` function is deprecated and will soon be &quot;</span>
        <span class="s2">&quot;removed. Please use `log_metadata` instead.&quot;</span>
    <span class="p">)</span>

    <span class="n">step_context</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">step_name</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">):</span>
            <span class="n">step_context</span> <span class="o">=</span> <span class="n">get_step_context</span><span class="p">()</span>
            <span class="n">step_name</span> <span class="o">=</span> <span class="n">step_context</span><span class="o">.</span><span class="n">step_name</span>
    <span class="c1"># not running within a step and no user-provided step name</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">step_name</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;No step name provided and you are not running &quot;</span>
            <span class="s2">&quot;within a step. Please provide a step name.&quot;</span>
        <span class="p">)</span>

    <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">step_context</span><span class="p">:</span>
        <span class="n">step_run_id</span> <span class="o">=</span> <span class="n">step_context</span><span class="o">.</span><span class="n">step_run</span><span class="o">.</span><span class="n">id</span>
    <span class="k">elif</span> <span class="n">run_id</span><span class="p">:</span>
        <span class="n">step_run_id</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">(</span><span class="nb">int</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">run_id</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">pipeline_name_id_or_prefix</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;No pipeline name or ID provided and you are not running &quot;</span>
                <span class="s2">&quot;within a step. Please provide a pipeline name or ID, or &quot;</span>
                <span class="s2">&quot;provide a run ID.&quot;</span>
            <span class="p">)</span>
        <span class="n">pipeline_run</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_pipeline</span><span class="p">(</span>
            <span class="n">name_id_or_prefix</span><span class="o">=</span><span class="n">pipeline_name_id_or_prefix</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">last_run</span>
        <span class="n">step_run_id</span> <span class="o">=</span> <span class="n">pipeline_run</span><span class="o">.</span><span class="n">steps</span><span class="p">[</span><span class="n">step_name</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
    <span class="n">client</span><span class="o">.</span><span class="n">create_run_metadata</span><span class="p">(</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
        <span class="n">resources</span><span class="o">=</span><span class="p">[</span>
            <span class="n">RunMetadataResource</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">step_run_id</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">MetadataResourceTypes</span><span class="o">.</span><span class="n">STEP_RUN</span>
            <span class="p">)</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.steps.utils.parse_return_type_annotations" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_return_type_annotations</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">enforce_type_annotations</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Parse the return type annotation of a step function.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>func</code></td>
        <td><code>Callable[..., Any]</code></td>
        <td><p>The step function.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>enforce_type_annotations</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code>, raises an exception if a type
annotation is missing.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If the output annotation has variable length or contains
duplicate output names.</p></td>
      </tr>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If type annotations should be enforced and a type
annotation is missing.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, zenml.steps.utils.OutputSignature]</code></td>
      <td><ul>
<li>A dictionary mapping output names to their output signatures.</li>
</ul></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_return_type_annotations</span><span class="p">(</span>
    <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">enforce_type_annotations</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">OutputSignature</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse the return type annotation of a step function.</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The step function.</span>
<span class="sd">        enforce_type_annotations: If `True`, raises an exception if a type</span>
<span class="sd">            annotation is missing.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the output annotation has variable length or contains</span>
<span class="sd">            duplicate output names.</span>
<span class="sd">        RuntimeError: If type annotations should be enforced and a type</span>
<span class="sd">            annotation is missing.</span>

<span class="sd">    Returns:</span>
<span class="sd">        - A dictionary mapping output names to their output signatures.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">follow_wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">return_annotation</span> <span class="o">=</span> <span class="n">signature</span><span class="o">.</span><span class="n">return_annotation</span>
    <span class="n">output_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>

    <span class="c1"># Return type annotated as `None`</span>
    <span class="k">if</span> <span class="n">return_annotation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="c1"># Return type not annotated -&gt; check whether `None` or `Any` should be used</span>
    <span class="k">if</span> <span class="n">return_annotation</span> <span class="ow">is</span> <span class="n">signature</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">enforce_type_annotations</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;Missing return type annotation for step function &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">has_only_none_returns</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">return_annotation</span> <span class="o">=</span> <span class="n">Any</span>

    <span class="k">if</span> <span class="n">typing_utils</span><span class="o">.</span><span class="n">get_origin</span><span class="p">(</span><span class="n">return_annotation</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
        <span class="n">requires_multiple_artifacts</span> <span class="o">=</span> <span class="n">has_tuple_return</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">requires_multiple_artifacts</span><span class="p">:</span>
            <span class="n">output_signature</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">typing_utils</span><span class="o">.</span><span class="n">get_args</span><span class="p">(</span><span class="n">return_annotation</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">Ellipsis</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="s2">&quot;Variable length output annotations are not allowed.&quot;</span>
                <span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
                <span class="n">resolved_annotation</span> <span class="o">=</span> <span class="n">resolve_type_annotation</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span>
                <span class="n">artifact_config</span> <span class="o">=</span> <span class="n">get_artifact_config_from_annotation_metadata</span><span class="p">(</span>
                    <span class="n">annotation</span>
                <span class="p">)</span>
                <span class="n">output_name</span> <span class="o">=</span> <span class="n">artifact_config</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">artifact_config</span> <span class="k">else</span> <span class="kc">None</span>
                <span class="n">has_custom_name</span> <span class="o">=</span> <span class="n">output_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="n">output_name</span> <span class="o">=</span> <span class="n">output_name</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;output_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">if</span> <span class="n">output_name</span> <span class="ow">in</span> <span class="n">output_signature</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicate output name </span><span class="si">{</span><span class="n">output_name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

                <span class="n">output_signature</span><span class="p">[</span><span class="n">output_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">OutputSignature</span><span class="p">(</span>
                    <span class="n">resolved_annotation</span><span class="o">=</span><span class="n">resolved_annotation</span><span class="p">,</span>
                    <span class="n">artifact_config</span><span class="o">=</span><span class="n">artifact_config</span><span class="p">,</span>
                    <span class="n">has_custom_name</span><span class="o">=</span><span class="n">has_custom_name</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="n">output_signature</span>

    <span class="c1"># Return type is annotated as single value or is a tuple</span>
    <span class="n">resolved_annotation</span> <span class="o">=</span> <span class="n">resolve_type_annotation</span><span class="p">(</span><span class="n">return_annotation</span><span class="p">)</span>
    <span class="n">artifact_config</span> <span class="o">=</span> <span class="n">get_artifact_config_from_annotation_metadata</span><span class="p">(</span>
        <span class="n">return_annotation</span>
    <span class="p">)</span>
    <span class="n">output_name</span> <span class="o">=</span> <span class="n">artifact_config</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">artifact_config</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">has_custom_name</span> <span class="o">=</span> <span class="n">output_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="n">output_name</span> <span class="o">=</span> <span class="n">output_name</span> <span class="ow">or</span> <span class="n">SINGLE_RETURN_OUT_NAME</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">output_name</span><span class="p">:</span> <span class="n">OutputSignature</span><span class="p">(</span>
            <span class="n">resolved_annotation</span><span class="o">=</span><span class="n">resolved_annotation</span><span class="p">,</span>
            <span class="n">artifact_config</span><span class="o">=</span><span class="n">artifact_config</span><span class="p">,</span>
            <span class="n">has_custom_name</span><span class="o">=</span><span class="n">has_custom_name</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.steps.utils.resolve_type_annotation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">resolve_type_annotation</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Returns the non-generic class for generic aliases of the typing module.</p>
<p>Example: if the input object is <code>typing.Dict</code>, this method will return the
concrete class <code>dict</code>.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>obj</code></td>
        <td><code>Any</code></td>
        <td><p>The object to resolve.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>The non-generic class for generic aliases of the typing module.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">resolve_type_annotation</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the non-generic class for generic aliases of the typing module.</span>

<span class="sd">    Example: if the input object is `typing.Dict`, this method will return the</span>
<span class="sd">    concrete class `dict`.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj: The object to resolve.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The non-generic class for generic aliases of the typing module.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">origin</span> <span class="o">=</span> <span class="n">typing_utils</span><span class="o">.</span><span class="n">get_origin</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">or</span> <span class="n">obj</span>

    <span class="k">if</span> <span class="n">origin</span> <span class="ow">is</span> <span class="n">Annotated</span><span class="p">:</span>
        <span class="n">annotation</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span> <span class="o">=</span> <span class="n">typing_utils</span><span class="o">.</span><span class="n">get_args</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resolve_type_annotation</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">typing_utils</span><span class="o">.</span><span class="n">is_union</span><span class="p">(</span><span class="n">origin</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">return</span> <span class="n">origin</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.steps.utils.run_as_single_step_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run_as_single_step_pipeline</span><span class="p">(</span><span class="n">__step</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Runs the step as a single step pipeline.</p>
<ul>
<li>All inputs that are not JSON serializable will be uploaded to the
artifact store before the pipeline is being executed.</li>
<li>All output artifacts of the step will be loaded using the materializer
that was used to store them.</li>
</ul>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>*args</code></td>
        <td><code>Any</code></td>
        <td><p>Entrypoint function arguments.</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Entrypoint function keyword arguments.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If the step execution failed.</p></td>
      </tr>
      <tr>
        <td><code>StepInterfaceError</code></td>
        <td><p>If the arguments to the entrypoint function are
invalid.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>The output of the step entrypoint function.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/steps/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_as_single_step_pipeline</span><span class="p">(</span>
    <span class="n">__step</span><span class="p">:</span> <span class="s2">&quot;BaseStep&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Runs the step as a single step pipeline.</span>

<span class="sd">    - All inputs that are not JSON serializable will be uploaded to the</span>
<span class="sd">    artifact store before the pipeline is being executed.</span>
<span class="sd">    - All output artifacts of the step will be loaded using the materializer</span>
<span class="sd">    that was used to store them.</span>

<span class="sd">    Args:</span>
<span class="sd">        *args: Entrypoint function arguments.</span>
<span class="sd">        **kwargs: Entrypoint function keyword arguments.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the step execution failed.</span>
<span class="sd">        StepInterfaceError: If the arguments to the entrypoint function are</span>
<span class="sd">            invalid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The output of the step entrypoint function.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExternalArtifact</span><span class="p">,</span> <span class="n">pipeline</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.config.base_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">zenml.pipelines.run_utils</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
        <span class="n">wait_for_pipeline_run_to_finish</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;Running single step pipeline to execute step `</span><span class="si">%s</span><span class="s2">`&quot;</span><span class="p">,</span> <span class="n">__step</span><span class="o">.</span><span class="n">name</span>
    <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">validated_arguments</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">__step</span><span class="o">.</span><span class="n">entrypoint</span><span class="p">)</span>
            <span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="o">.</span><span class="n">arguments</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">StepInterfaceError</span><span class="p">(</span>
            <span class="s2">&quot;Invalid step function entrypoint arguments. Check out the &quot;</span>
            <span class="s2">&quot;error above for more details.&quot;</span>
        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">validated_arguments</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">__step</span><span class="o">.</span><span class="n">entrypoint_definition</span><span class="o">.</span><span class="n">validate_input</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
            <span class="n">inputs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">inputs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">ExternalArtifact</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>

    <span class="n">orchestrator</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">active_stack</span><span class="o">.</span><span class="n">orchestrator</span>

    <span class="n">pipeline_settings</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="s2">&quot;synchronous&quot;</span> <span class="ow">in</span> <span class="n">orchestrator</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">model_fields</span><span class="p">:</span>
        <span class="c1"># Make sure the orchestrator runs sync so we stream the logs</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">settings_utils</span><span class="o">.</span><span class="n">get_stack_component_setting_key</span><span class="p">(</span><span class="n">orchestrator</span><span class="p">)</span>
        <span class="n">pipeline_settings</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">BaseSettings</span><span class="p">(</span><span class="n">synchronous</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@pipeline</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">__step</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">enable_cache</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">settings</span><span class="o">=</span><span class="n">pipeline_settings</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">single_step_pipeline</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">__step</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>

    <span class="n">run</span> <span class="o">=</span> <span class="n">single_step_pipeline</span><span class="o">.</span><span class="n">with_options</span><span class="p">(</span><span class="n">unlisted</span><span class="o">=</span><span class="kc">True</span><span class="p">)()</span>
    <span class="k">assert</span> <span class="n">run</span>
    <span class="n">run</span> <span class="o">=</span> <span class="n">wait_for_pipeline_run_to_finish</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">run</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="n">ExecutionStatus</span><span class="o">.</span><span class="n">COMPLETED</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Failed to execute step </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span> <span class="n">__step</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="c1"># 4. Load output artifacts</span>
    <span class="n">step_run</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
    <span class="n">outputs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">artifact_version</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">output_name</span> <span class="ow">in</span> <span class="n">step_run</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">artifact_version</span> <span class="ow">in</span> <span class="n">step_run</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="n">output_name</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">artifact_version</span><span class="o">.</span><span class="n">save_type</span> <span class="o">==</span> <span class="n">ArtifactSaveType</span><span class="o">.</span><span class="n">STEP_OUTPUT</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">outputs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>




  </div>

    </div>

  </div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../core-step_operators/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Step Operators" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Step Operators
            </div>
          </div>
        </a>
      
      
        
        <a href="../core-types/" class="md-footer__link md-footer__link--next" aria-label="Next: Types" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Types
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 ZenML GmbH – <a href="#__consent">Change cookie settings</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  
    
  




<h4>This website uses cookies</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        <label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>