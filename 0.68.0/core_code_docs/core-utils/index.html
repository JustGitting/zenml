
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sdkdocs.zenml.io/0.68.0/core_code_docs/core-utils/">
      
      <link rel="icon" href="../../_assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-8.5.10">
    
    
      
        <title>Utils - ZenML API Reference</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    

<script>
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="CaE5VaNjhyaUt48qXK4rLwwKJ0PdAOFM";;analytics.SNIPPET_VERSION="4.15.3";
  analytics.load("CaE5VaNjhyaUt48qXK4rLwwKJ0PdAOFM");
  analytics.page();
  }}();
</script>
<script defer data-domain="apidocs.zenml.io" src="https://plausible.io/js/plausible.js"></script>


  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#utils" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ZenML API Reference" class="md-header__button md-logo" aria-label="ZenML API Reference" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ZenML API Reference
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Utils
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/zenml-io/zenml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ZenML API Reference" class="md-nav__button md-logo" aria-label="ZenML API Reference" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ZenML API Reference
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zenml-io/zenml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        ZenML
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        CLI docs
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Core code docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Core code docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Core code docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-actions/" class="md-nav__link">
        Actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-alerter/" class="md-nav__link">
        Alerter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-analytics/" class="md-nav__link">
        Analytics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-annotators/" class="md-nav__link">
        Annotators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-api/" class="md-nav__link">
        Api
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-artifact_stores/" class="md-nav__link">
        Artifact Stores
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-artifacts/" class="md-nav__link">
        Artifacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-client/" class="md-nav__link">
        Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-client_lazy_loader/" class="md-nav__link">
        Client Lazy Loader
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-code_repositories/" class="md-nav__link">
        Code Repositories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-config/" class="md-nav__link">
        Config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-console/" class="md-nav__link">
        Console
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-constants/" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-container_registries/" class="md-nav__link">
        Container Registries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-data_validators/" class="md-nav__link">
        Data Validators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-entrypoints/" class="md-nav__link">
        Entrypoints
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-enums/" class="md-nav__link">
        Enums
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-environment/" class="md-nav__link">
        Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-event_hub/" class="md-nav__link">
        Event Hub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-event_sources/" class="md-nav__link">
        Event Sources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-exceptions/" class="md-nav__link">
        Exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-experiment_trackers/" class="md-nav__link">
        Experiment Trackers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-feature_stores/" class="md-nav__link">
        Feature Stores
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-hooks/" class="md-nav__link">
        Hooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-image_builders/" class="md-nav__link">
        Image Builders
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-io/" class="md-nav__link">
        Io
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-logger/" class="md-nav__link">
        Logger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-materializers/" class="md-nav__link">
        Materializers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-metadata/" class="md-nav__link">
        Metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-model/" class="md-nav__link">
        Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-model_deployers/" class="md-nav__link">
        Model Deployers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-model_registries/" class="md-nav__link">
        Model Registries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-models/" class="md-nav__link">
        Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-orchestrators/" class="md-nav__link">
        Orchestrators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-pipelines/" class="md-nav__link">
        Pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-plugins/" class="md-nav__link">
        Plugins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-secret/" class="md-nav__link">
        Secret
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-service_connectors/" class="md-nav__link">
        Service Connectors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-services/" class="md-nav__link">
        Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-stack/" class="md-nav__link">
        Stack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-stack_deployments/" class="md-nav__link">
        Stack Deployments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-step_operators/" class="md-nav__link">
        Step Operators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-steps/" class="md-nav__link">
        Steps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-types/" class="md-nav__link">
        Types
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Utils
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Utils
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zenml.utils" class="md-nav__link">
    utils
  </a>
  
    <nav class="md-nav" aria-label="utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.archivable" class="md-nav__link">
    archivable
  </a>
  
    <nav class="md-nav" aria-label="archivable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.archivable.Archivable" class="md-nav__link">
    Archivable
  </a>
  
    <nav class="md-nav" aria-label="Archivable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.archivable.Archivable.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.archivable.Archivable.add_directory" class="md-nav__link">
    add_directory()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.archivable.Archivable.add_file" class="md-nav__link">
    add_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.archivable.Archivable.get_extra_files" class="md-nav__link">
    get_extra_files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.archivable.Archivable.get_files" class="md-nav__link">
    get_files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.archivable.Archivable.write_archive" class="md-nav__link">
    write_archive()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.cloud_utils" class="md-nav__link">
    cloud_utils
  </a>
  
    <nav class="md-nav" aria-label="cloud_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.cloud_utils.try_get_model_version_url" class="md-nav__link">
    try_get_model_version_url()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_repository_utils" class="md-nav__link">
    code_repository_utils
  </a>
  
    <nav class="md-nav" aria-label="code_repository_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_repository_utils.find_active_code_repository" class="md-nav__link">
    find_active_code_repository()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_repository_utils.set_custom_local_repository" class="md-nav__link">
    set_custom_local_repository()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils" class="md-nav__link">
    code_utils
  </a>
  
    <nav class="md-nav" aria-label="code_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.CodeArchive" class="md-nav__link">
    CodeArchive
  </a>
  
    <nav class="md-nav" aria-label="CodeArchive">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.CodeArchive.git_repo" class="md-nav__link">
    git_repo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.CodeArchive.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.CodeArchive.get_files" class="md-nav__link">
    get_files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.CodeArchive.write_archive" class="md-nav__link">
    write_archive()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.compute_file_hash" class="md-nav__link">
    compute_file_hash()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.download_and_extract_code" class="md-nav__link">
    download_and_extract_code()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.download_code_from_artifact_store" class="md-nav__link">
    download_code_from_artifact_store()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.download_notebook_code" class="md-nav__link">
    download_notebook_code()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.upload_code_if_necessary" class="md-nav__link">
    upload_code_if_necessary()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.upload_notebook_code" class="md-nav__link">
    upload_notebook_code()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.cuda_utils" class="md-nav__link">
    cuda_utils
  </a>
  
    <nav class="md-nav" aria-label="cuda_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.cuda_utils.cleanup_gpu_memory" class="md-nav__link">
    cleanup_gpu_memory()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.daemon" class="md-nav__link">
    daemon
  </a>
  
    <nav class="md-nav" aria-label="daemon">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.daemon.check_if_daemon_is_running" class="md-nav__link">
    check_if_daemon_is_running()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.daemon.daemonize" class="md-nav__link">
    daemonize()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.daemon.get_daemon_pid_if_running" class="md-nav__link">
    get_daemon_pid_if_running()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.daemon.run_as_daemon" class="md-nav__link">
    run_as_daemon()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.daemon.stop_daemon" class="md-nav__link">
    stop_daemon()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.daemon.terminate_children" class="md-nav__link">
    terminate_children()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dashboard_utils" class="md-nav__link">
    dashboard_utils
  </a>
  
    <nav class="md-nav" aria-label="dashboard_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dashboard_utils.get_cloud_dashboard_url" class="md-nav__link">
    get_cloud_dashboard_url()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dashboard_utils.get_component_url" class="md-nav__link">
    get_component_url()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dashboard_utils.get_model_version_url" class="md-nav__link">
    get_model_version_url()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dashboard_utils.get_run_url" class="md-nav__link">
    get_run_url()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dashboard_utils.get_server_dashboard_url" class="md-nav__link">
    get_server_dashboard_url()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dashboard_utils.get_stack_url" class="md-nav__link">
    get_stack_url()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dashboard_utils.show_dashboard" class="md-nav__link">
    show_dashboard()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.deprecation_utils" class="md-nav__link">
    deprecation_utils
  </a>
  
    <nav class="md-nav" aria-label="deprecation_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.deprecation_utils.deprecate_pydantic_attributes" class="md-nav__link">
    deprecate_pydantic_attributes()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dict_utils" class="md-nav__link">
    dict_utils
  </a>
  
    <nav class="md-nav" aria-label="dict_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dict_utils.dict_to_bytes" class="md-nav__link">
    dict_to_bytes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dict_utils.recursive_update" class="md-nav__link">
    recursive_update()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dict_utils.remove_none_values" class="md-nav__link">
    remove_none_values()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.docker_utils" class="md-nav__link">
    docker_utils
  </a>
  
    <nav class="md-nav" aria-label="docker_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.docker_utils.build_image" class="md-nav__link">
    build_image()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.docker_utils.check_docker" class="md-nav__link">
    check_docker()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.docker_utils.get_image_digest" class="md-nav__link">
    get_image_digest()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.docker_utils.is_local_image" class="md-nav__link">
    is_local_image()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.docker_utils.push_image" class="md-nav__link">
    push_image()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.docker_utils.tag_image" class="md-nav__link">
    tag_image()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.downloaded_repository_context" class="md-nav__link">
    downloaded_repository_context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.enum_utils" class="md-nav__link">
    enum_utils
  </a>
  
    <nav class="md-nav" aria-label="enum_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.enum_utils.StrEnum" class="md-nav__link">
    StrEnum
  </a>
  
    <nav class="md-nav" aria-label="StrEnum">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.enum_utils.StrEnum.__format__" class="md-nav__link">
    __format__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.enum_utils.StrEnum.__str__" class="md-nav__link">
    __str__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.env_utils" class="md-nav__link">
    env_utils
  </a>
  
    <nav class="md-nav" aria-label="env_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.env_utils.reconstruct_environment_variables" class="md-nav__link">
    reconstruct_environment_variables()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.env_utils.split_environment_variables" class="md-nav__link">
    split_environment_variables()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.env_utils.substitute_env_variable_placeholders" class="md-nav__link">
    substitute_env_variable_placeholders()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.filesync_model" class="md-nav__link">
    filesync_model
  </a>
  
    <nav class="md-nav" aria-label="filesync_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.filesync_model.FileSyncModel" class="md-nav__link">
    FileSyncModel
  </a>
  
    <nav class="md-nav" aria-label="FileSyncModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.filesync_model.FileSyncModel.__getattribute__" class="md-nav__link">
    __getattribute__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.filesync_model.FileSyncModel.__setattr__" class="md-nav__link">
    __setattr__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.filesync_model.FileSyncModel.config_validator" class="md-nav__link">
    config_validator()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.filesync_model.FileSyncModel.load_config" class="md-nav__link">
    load_config()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.filesync_model.FileSyncModel.model_post_init" class="md-nav__link">
    model_post_init()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.filesync_model.FileSyncModel.write_config" class="md-nav__link">
    write_config()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.function_utils" class="md-nav__link">
    function_utils
  </a>
  
    <nav class="md-nav" aria-label="function_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.function_utils.create_cli_wrapped_script" class="md-nav__link">
    create_cli_wrapped_script()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.git_utils" class="md-nav__link">
    git_utils
  </a>
  
    <nav class="md-nav" aria-label="git_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.git_utils.clone_git_repository" class="md-nav__link">
    clone_git_repository()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.integration_utils" class="md-nav__link">
    integration_utils
  </a>
  
    <nav class="md-nav" aria-label="integration_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.integration_utils.parse_requirement" class="md-nav__link">
    parse_requirement()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils" class="md-nav__link">
    io_utils
  </a>
  
    <nav class="md-nav" aria-label="io_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.copy_dir" class="md-nav__link">
    copy_dir()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.create_dir_if_not_exists" class="md-nav__link">
    create_dir_if_not_exists()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.create_dir_recursive_if_not_exists" class="md-nav__link">
    create_dir_recursive_if_not_exists()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.create_file_if_not_exists" class="md-nav__link">
    create_file_if_not_exists()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.find_files" class="md-nav__link">
    find_files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.get_global_config_directory" class="md-nav__link">
    get_global_config_directory()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.get_grandparent" class="md-nav__link">
    get_grandparent()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.get_parent" class="md-nav__link">
    get_parent()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.is_remote" class="md-nav__link">
    is_remote()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.is_root" class="md-nav__link">
    is_root()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.move" class="md-nav__link">
    move()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.read_file_contents_as_string" class="md-nav__link">
    read_file_contents_as_string()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.resolve_relative_path" class="md-nav__link">
    resolve_relative_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.write_file_contents_as_string" class="md-nav__link">
    write_file_contents_as_string()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.json_utils" class="md-nav__link">
    json_utils
  </a>
  
    <nav class="md-nav" aria-label="json_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.json_utils.decimal_encoder" class="md-nav__link">
    decimal_encoder()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.json_utils.isoformat" class="md-nav__link">
    isoformat()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.materializer_utils" class="md-nav__link">
    materializer_utils
  </a>
  
    <nav class="md-nav" aria-label="materializer_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.materializer_utils.select_materializer" class="md-nav__link">
    select_materializer()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.networking_utils" class="md-nav__link">
    networking_utils
  </a>
  
    <nav class="md-nav" aria-label="networking_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.networking_utils.find_available_port" class="md-nav__link">
    find_available_port()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.networking_utils.get_or_create_ngrok_tunnel" class="md-nav__link">
    get_or_create_ngrok_tunnel()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.networking_utils.port_available" class="md-nav__link">
    port_available()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.networking_utils.port_is_open" class="md-nav__link">
    port_is_open()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.networking_utils.replace_internal_hostname_with_localhost" class="md-nav__link">
    replace_internal_hostname_with_localhost()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.networking_utils.replace_localhost_with_internal_hostname" class="md-nav__link">
    replace_localhost_with_internal_hostname()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.networking_utils.scan_for_available_port" class="md-nav__link">
    scan_for_available_port()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.notebook_utils" class="md-nav__link">
    notebook_utils
  </a>
  
    <nav class="md-nav" aria-label="notebook_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.notebook_utils.compute_cell_replacement_module_name" class="md-nav__link">
    compute_cell_replacement_module_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.notebook_utils.enable_notebook_code_extraction" class="md-nav__link">
    enable_notebook_code_extraction()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.notebook_utils.get_active_notebook_cell_code" class="md-nav__link">
    get_active_notebook_cell_code()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.notebook_utils.is_defined_in_notebook_cell" class="md-nav__link">
    is_defined_in_notebook_cell()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.notebook_utils.load_notebook_cell_code" class="md-nav__link">
    load_notebook_cell_code()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.notebook_utils.try_to_save_notebook_cell_code" class="md-nav__link">
    try_to_save_notebook_cell_code()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.notebook_utils.warn_about_notebook_cell_magic_commands" class="md-nav__link">
    warn_about_notebook_cell_magic_commands()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.package_utils" class="md-nav__link">
    package_utils
  </a>
  
    <nav class="md-nav" aria-label="package_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.package_utils.clean_requirements" class="md-nav__link">
    clean_requirements()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.package_utils.is_latest_zenml_version" class="md-nav__link">
    is_latest_zenml_version()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pagination_utils" class="md-nav__link">
    pagination_utils
  </a>
  
    <nav class="md-nav" aria-label="pagination_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pagination_utils.depaginate" class="md-nav__link">
    depaginate()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pipeline_docker_image_builder" class="md-nav__link">
    pipeline_docker_image_builder
  </a>
  
    <nav class="md-nav" aria-label="pipeline_docker_image_builder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pipeline_docker_image_builder.PipelineDockerImageBuilder" class="md-nav__link">
    PipelineDockerImageBuilder
  </a>
  
    <nav class="md-nav" aria-label="PipelineDockerImageBuilder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pipeline_docker_image_builder.PipelineDockerImageBuilder.build_docker_image" class="md-nav__link">
    build_docker_image()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pipeline_docker_image_builder.PipelineDockerImageBuilder.gather_requirements_files" class="md-nav__link">
    gather_requirements_files()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.proxy_utils" class="md-nav__link">
    proxy_utils
  </a>
  
    <nav class="md-nav" aria-label="proxy_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.proxy_utils.make_proxy_class" class="md-nav__link">
    make_proxy_class()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils" class="md-nav__link">
    pydantic_utils
  </a>
  
    <nav class="md-nav" aria-label="pydantic_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.TemplateGenerator" class="md-nav__link">
    TemplateGenerator
  </a>
  
    <nav class="md-nav" aria-label="TemplateGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.TemplateGenerator.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.TemplateGenerator.run" class="md-nav__link">
    run()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.YAMLSerializationMixin" class="md-nav__link">
    YAMLSerializationMixin
  </a>
  
    <nav class="md-nav" aria-label="YAMLSerializationMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.YAMLSerializationMixin.from_yaml" class="md-nav__link">
    from_yaml()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.YAMLSerializationMixin.yaml" class="md-nav__link">
    yaml()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.before_validator_handler" class="md-nav__link">
    before_validator_handler()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.has_validators" class="md-nav__link">
    has_validators()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.model_validator_data_handler" class="md-nav__link">
    model_validator_data_handler()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.update_model" class="md-nav__link">
    update_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.validate_function_args" class="md-nav__link">
    validate_function_args()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils" class="md-nav__link">
    secret_utils
  </a>
  
    <nav class="md-nav" aria-label="secret_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.SecretReference" class="md-nav__link">
    SecretReference
  </a>
  
    <nav class="md-nav" aria-label="SecretReference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.SecretReference.__getnewargs__" class="md-nav__link">
    __getnewargs__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.SecretReference.__new__" class="md-nav__link">
    __new__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.SecretReference.__repr__" class="md-nav__link">
    __repr__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.ClearTextField" class="md-nav__link">
    ClearTextField()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.SecretField" class="md-nav__link">
    SecretField()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.is_clear_text_field" class="md-nav__link">
    is_clear_text_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.is_secret_field" class="md-nav__link">
    is_secret_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.is_secret_reference" class="md-nav__link">
    is_secret_reference()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.parse_secret_reference" class="md-nav__link">
    parse_secret_reference()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils" class="md-nav__link">
    settings_utils
  </a>
  
    <nav class="md-nav" aria-label="settings_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils.get_flavor_setting_key" class="md-nav__link">
    get_flavor_setting_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils.get_general_settings" class="md-nav__link">
    get_general_settings()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils.get_stack_component_for_settings_key" class="md-nav__link">
    get_stack_component_for_settings_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils.get_stack_component_setting_key" class="md-nav__link">
    get_stack_component_setting_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils.is_general_setting_key" class="md-nav__link">
    is_general_setting_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils.is_stack_component_setting_key" class="md-nav__link">
    is_stack_component_setting_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils.is_valid_setting_key" class="md-nav__link">
    is_valid_setting_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils.validate_setting_keys" class="md-nav__link">
    validate_setting_keys()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.singleton" class="md-nav__link">
    singleton
  </a>
  
    <nav class="md-nav" aria-label="singleton">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.singleton.SingletonMetaClass" class="md-nav__link">
    SingletonMetaClass
  </a>
  
    <nav class="md-nav" aria-label="SingletonMetaClass">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.singleton.SingletonMetaClass.__call__" class="md-nav__link">
    __call__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.singleton.SingletonMetaClass.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_code_utils" class="md-nav__link">
    source_code_utils
  </a>
  
    <nav class="md-nav" aria-label="source_code_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_code_utils.get_hashed_source_code" class="md-nav__link">
    get_hashed_source_code()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_code_utils.get_source_code" class="md-nav__link">
    get_source_code()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils" class="md-nav__link">
    source_utils
  </a>
  
    <nav class="md-nav" aria-label="source_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.get_resolved_notebook_sources" class="md-nav__link">
    get_resolved_notebook_sources()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.get_source_root" class="md-nav__link">
    get_source_root()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.get_source_type" class="md-nav__link">
    get_source_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.is_distribution_package_file" class="md-nav__link">
    is_distribution_package_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.is_internal_module" class="md-nav__link">
    is_internal_module()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.is_standard_lib_file" class="md-nav__link">
    is_standard_lib_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.is_user_file" class="md-nav__link">
    is_user_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.load" class="md-nav__link">
    load()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.load_and_validate_class" class="md-nav__link">
    load_and_validate_class()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.prepend_python_path" class="md-nav__link">
    prepend_python_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.resolve" class="md-nav__link">
    resolve()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.set_custom_source_root" class="md-nav__link">
    set_custom_source_root()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.validate_source_class" class="md-nav__link">
    validate_source_class()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils" class="md-nav__link">
    string_utils
  </a>
  
    <nav class="md-nav" aria-label="string_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils.b64_decode" class="md-nav__link">
    b64_decode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils.b64_encode" class="md-nav__link">
    b64_encode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils.format_name_template" class="md-nav__link">
    format_name_template()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils.get_human_readable_filesize" class="md-nav__link">
    get_human_readable_filesize()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils.get_human_readable_time" class="md-nav__link">
    get_human_readable_time()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils.random_str" class="md-nav__link">
    random_str()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils.substitute_string" class="md-nav__link">
    substitute_string()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils.validate_name" class="md-nav__link">
    validate_name()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typed_model" class="md-nav__link">
    typed_model
  </a>
  
    <nav class="md-nav" aria-label="typed_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typed_model.BaseTypedModel" class="md-nav__link">
    BaseTypedModel
  </a>
  
    <nav class="md-nav" aria-label="BaseTypedModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typed_model.BaseTypedModel.from_dict" class="md-nav__link">
    from_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typed_model.BaseTypedModel.from_json" class="md-nav__link">
    from_json()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typed_model.BaseTypedModelMeta" class="md-nav__link">
    BaseTypedModelMeta
  </a>
  
    <nav class="md-nav" aria-label="BaseTypedModelMeta">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typed_model.BaseTypedModelMeta.__new__" class="md-nav__link">
    __new__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils" class="md-nav__link">
    typing_utils
  </a>
  
    <nav class="md-nav" aria-label="typing_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils.all_literal_values" class="md-nav__link">
    all_literal_values()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils.get_args" class="md-nav__link">
    get_args()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils.get_origin" class="md-nav__link">
    get_origin()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils.is_literal_type" class="md-nav__link">
    is_literal_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils.is_none_type" class="md-nav__link">
    is_none_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils.is_optional" class="md-nav__link">
    is_optional()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils.is_union" class="md-nav__link">
    is_union()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils.literal_values" class="md-nav__link">
    literal_values()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.uuid_utils" class="md-nav__link">
    uuid_utils
  </a>
  
    <nav class="md-nav" aria-label="uuid_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.uuid_utils.generate_uuid_from_string" class="md-nav__link">
    generate_uuid_from_string()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.uuid_utils.is_valid_uuid" class="md-nav__link">
    is_valid_uuid()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.uuid_utils.parse_name_or_uuid" class="md-nav__link">
    parse_name_or_uuid()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.visualization_utils" class="md-nav__link">
    visualization_utils
  </a>
  
    <nav class="md-nav" aria-label="visualization_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.visualization_utils.format_csv_visualization_as_html" class="md-nav__link">
    format_csv_visualization_as_html()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.visualization_utils.visualize_artifact" class="md-nav__link">
    visualize_artifact()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils" class="md-nav__link">
    yaml_utils
  </a>
  
    <nav class="md-nav" aria-label="yaml_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.UUIDEncoder" class="md-nav__link">
    UUIDEncoder
  </a>
  
    <nav class="md-nav" aria-label="UUIDEncoder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.UUIDEncoder.default" class="md-nav__link">
    default()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.append_yaml" class="md-nav__link">
    append_yaml()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.comment_out_yaml" class="md-nav__link">
    comment_out_yaml()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.is_json_serializable" class="md-nav__link">
    is_json_serializable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.is_yaml" class="md-nav__link">
    is_yaml()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.read_json" class="md-nav__link">
    read_json()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.read_yaml" class="md-nav__link">
    read_yaml()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.write_json" class="md-nav__link">
    write_json()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.write_yaml" class="md-nav__link">
    write_yaml()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-zen_server/" class="md-nav__link">
        Zen Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core-zen_stores/" class="md-nav__link">
        Zen Stores
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Integration code docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Integration code docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Integration code docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-airflow/" class="md-nav__link">
        Airflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-argilla/" class="md-nav__link">
        Argilla
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-aws/" class="md-nav__link">
        Aws
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-azure/" class="md-nav__link">
        Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-bentoml/" class="md-nav__link">
        Bentoml
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-bitbucket/" class="md-nav__link">
        Bitbucket
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-comet/" class="md-nav__link">
        Comet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-constants/" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-databricks/" class="md-nav__link">
        Databricks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-deepchecks/" class="md-nav__link">
        Deepchecks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-discord/" class="md-nav__link">
        Discord
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-evidently/" class="md-nav__link">
        Evidently
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-facets/" class="md-nav__link">
        Facets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-feast/" class="md-nav__link">
        Feast
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-gcp/" class="md-nav__link">
        Gcp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-github/" class="md-nav__link">
        Github
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-gitlab/" class="md-nav__link">
        Gitlab
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-great_expectations/" class="md-nav__link">
        Great Expectations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-huggingface/" class="md-nav__link">
        Huggingface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-hyperai/" class="md-nav__link">
        Hyperai
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-integration/" class="md-nav__link">
        Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-kaniko/" class="md-nav__link">
        Kaniko
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-kubeflow/" class="md-nav__link">
        Kubeflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-kubernetes/" class="md-nav__link">
        Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-label_studio/" class="md-nav__link">
        Label Studio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-langchain/" class="md-nav__link">
        Langchain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-lightgbm/" class="md-nav__link">
        Lightgbm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-lightning/" class="md-nav__link">
        Lightning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-llama_index/" class="md-nav__link">
        Llama Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-mlflow/" class="md-nav__link">
        Mlflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-neptune/" class="md-nav__link">
        Neptune
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-neural_prophet/" class="md-nav__link">
        Neural Prophet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-numpy/" class="md-nav__link">
        Numpy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-openai/" class="md-nav__link">
        Openai
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-pandas/" class="md-nav__link">
        Pandas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-pigeon/" class="md-nav__link">
        Pigeon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-pillow/" class="md-nav__link">
        Pillow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-polars/" class="md-nav__link">
        Polars
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-prodigy/" class="md-nav__link">
        Prodigy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-pycaret/" class="md-nav__link">
        Pycaret
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-pytorch/" class="md-nav__link">
        Pytorch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-pytorch_lightning/" class="md-nav__link">
        Pytorch Lightning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-registry/" class="md-nav__link">
        Registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-s3/" class="md-nav__link">
        S3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-scipy/" class="md-nav__link">
        Scipy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-seldon/" class="md-nav__link">
        Seldon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-sklearn/" class="md-nav__link">
        Sklearn
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-skypilot/" class="md-nav__link">
        Skypilot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-skypilot_aws/" class="md-nav__link">
        Skypilot Aws
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-skypilot_azure/" class="md-nav__link">
        Skypilot Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-skypilot_gcp/" class="md-nav__link">
        Skypilot Gcp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-skypilot_kubernetes/" class="md-nav__link">
        Skypilot Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-skypilot_lambda/" class="md-nav__link">
        Skypilot Lambda
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-slack/" class="md-nav__link">
        Slack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-spark/" class="md-nav__link">
        Spark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-tekton/" class="md-nav__link">
        Tekton
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-tensorboard/" class="md-nav__link">
        Tensorboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-tensorflow/" class="md-nav__link">
        Tensorflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-wandb/" class="md-nav__link">
        Wandb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-whylogs/" class="md-nav__link">
        Whylogs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integration_code_docs/integrations-xgboost/" class="md-nav__link">
        Xgboost
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zenml.utils" class="md-nav__link">
    utils
  </a>
  
    <nav class="md-nav" aria-label="utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.archivable" class="md-nav__link">
    archivable
  </a>
  
    <nav class="md-nav" aria-label="archivable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.archivable.Archivable" class="md-nav__link">
    Archivable
  </a>
  
    <nav class="md-nav" aria-label="Archivable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.archivable.Archivable.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.archivable.Archivable.add_directory" class="md-nav__link">
    add_directory()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.archivable.Archivable.add_file" class="md-nav__link">
    add_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.archivable.Archivable.get_extra_files" class="md-nav__link">
    get_extra_files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.archivable.Archivable.get_files" class="md-nav__link">
    get_files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.archivable.Archivable.write_archive" class="md-nav__link">
    write_archive()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.cloud_utils" class="md-nav__link">
    cloud_utils
  </a>
  
    <nav class="md-nav" aria-label="cloud_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.cloud_utils.try_get_model_version_url" class="md-nav__link">
    try_get_model_version_url()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_repository_utils" class="md-nav__link">
    code_repository_utils
  </a>
  
    <nav class="md-nav" aria-label="code_repository_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_repository_utils.find_active_code_repository" class="md-nav__link">
    find_active_code_repository()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_repository_utils.set_custom_local_repository" class="md-nav__link">
    set_custom_local_repository()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils" class="md-nav__link">
    code_utils
  </a>
  
    <nav class="md-nav" aria-label="code_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.CodeArchive" class="md-nav__link">
    CodeArchive
  </a>
  
    <nav class="md-nav" aria-label="CodeArchive">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.CodeArchive.git_repo" class="md-nav__link">
    git_repo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.CodeArchive.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.CodeArchive.get_files" class="md-nav__link">
    get_files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.CodeArchive.write_archive" class="md-nav__link">
    write_archive()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.compute_file_hash" class="md-nav__link">
    compute_file_hash()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.download_and_extract_code" class="md-nav__link">
    download_and_extract_code()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.download_code_from_artifact_store" class="md-nav__link">
    download_code_from_artifact_store()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.download_notebook_code" class="md-nav__link">
    download_notebook_code()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.upload_code_if_necessary" class="md-nav__link">
    upload_code_if_necessary()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.code_utils.upload_notebook_code" class="md-nav__link">
    upload_notebook_code()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.cuda_utils" class="md-nav__link">
    cuda_utils
  </a>
  
    <nav class="md-nav" aria-label="cuda_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.cuda_utils.cleanup_gpu_memory" class="md-nav__link">
    cleanup_gpu_memory()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.daemon" class="md-nav__link">
    daemon
  </a>
  
    <nav class="md-nav" aria-label="daemon">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.daemon.check_if_daemon_is_running" class="md-nav__link">
    check_if_daemon_is_running()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.daemon.daemonize" class="md-nav__link">
    daemonize()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.daemon.get_daemon_pid_if_running" class="md-nav__link">
    get_daemon_pid_if_running()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.daemon.run_as_daemon" class="md-nav__link">
    run_as_daemon()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.daemon.stop_daemon" class="md-nav__link">
    stop_daemon()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.daemon.terminate_children" class="md-nav__link">
    terminate_children()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dashboard_utils" class="md-nav__link">
    dashboard_utils
  </a>
  
    <nav class="md-nav" aria-label="dashboard_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dashboard_utils.get_cloud_dashboard_url" class="md-nav__link">
    get_cloud_dashboard_url()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dashboard_utils.get_component_url" class="md-nav__link">
    get_component_url()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dashboard_utils.get_model_version_url" class="md-nav__link">
    get_model_version_url()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dashboard_utils.get_run_url" class="md-nav__link">
    get_run_url()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dashboard_utils.get_server_dashboard_url" class="md-nav__link">
    get_server_dashboard_url()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dashboard_utils.get_stack_url" class="md-nav__link">
    get_stack_url()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dashboard_utils.show_dashboard" class="md-nav__link">
    show_dashboard()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.deprecation_utils" class="md-nav__link">
    deprecation_utils
  </a>
  
    <nav class="md-nav" aria-label="deprecation_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.deprecation_utils.deprecate_pydantic_attributes" class="md-nav__link">
    deprecate_pydantic_attributes()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dict_utils" class="md-nav__link">
    dict_utils
  </a>
  
    <nav class="md-nav" aria-label="dict_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dict_utils.dict_to_bytes" class="md-nav__link">
    dict_to_bytes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dict_utils.recursive_update" class="md-nav__link">
    recursive_update()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.dict_utils.remove_none_values" class="md-nav__link">
    remove_none_values()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.docker_utils" class="md-nav__link">
    docker_utils
  </a>
  
    <nav class="md-nav" aria-label="docker_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.docker_utils.build_image" class="md-nav__link">
    build_image()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.docker_utils.check_docker" class="md-nav__link">
    check_docker()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.docker_utils.get_image_digest" class="md-nav__link">
    get_image_digest()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.docker_utils.is_local_image" class="md-nav__link">
    is_local_image()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.docker_utils.push_image" class="md-nav__link">
    push_image()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.docker_utils.tag_image" class="md-nav__link">
    tag_image()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.downloaded_repository_context" class="md-nav__link">
    downloaded_repository_context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.enum_utils" class="md-nav__link">
    enum_utils
  </a>
  
    <nav class="md-nav" aria-label="enum_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.enum_utils.StrEnum" class="md-nav__link">
    StrEnum
  </a>
  
    <nav class="md-nav" aria-label="StrEnum">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.enum_utils.StrEnum.__format__" class="md-nav__link">
    __format__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.enum_utils.StrEnum.__str__" class="md-nav__link">
    __str__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.env_utils" class="md-nav__link">
    env_utils
  </a>
  
    <nav class="md-nav" aria-label="env_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.env_utils.reconstruct_environment_variables" class="md-nav__link">
    reconstruct_environment_variables()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.env_utils.split_environment_variables" class="md-nav__link">
    split_environment_variables()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.env_utils.substitute_env_variable_placeholders" class="md-nav__link">
    substitute_env_variable_placeholders()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.filesync_model" class="md-nav__link">
    filesync_model
  </a>
  
    <nav class="md-nav" aria-label="filesync_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.filesync_model.FileSyncModel" class="md-nav__link">
    FileSyncModel
  </a>
  
    <nav class="md-nav" aria-label="FileSyncModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.filesync_model.FileSyncModel.__getattribute__" class="md-nav__link">
    __getattribute__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.filesync_model.FileSyncModel.__setattr__" class="md-nav__link">
    __setattr__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.filesync_model.FileSyncModel.config_validator" class="md-nav__link">
    config_validator()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.filesync_model.FileSyncModel.load_config" class="md-nav__link">
    load_config()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.filesync_model.FileSyncModel.model_post_init" class="md-nav__link">
    model_post_init()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.filesync_model.FileSyncModel.write_config" class="md-nav__link">
    write_config()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.function_utils" class="md-nav__link">
    function_utils
  </a>
  
    <nav class="md-nav" aria-label="function_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.function_utils.create_cli_wrapped_script" class="md-nav__link">
    create_cli_wrapped_script()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.git_utils" class="md-nav__link">
    git_utils
  </a>
  
    <nav class="md-nav" aria-label="git_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.git_utils.clone_git_repository" class="md-nav__link">
    clone_git_repository()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.integration_utils" class="md-nav__link">
    integration_utils
  </a>
  
    <nav class="md-nav" aria-label="integration_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.integration_utils.parse_requirement" class="md-nav__link">
    parse_requirement()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils" class="md-nav__link">
    io_utils
  </a>
  
    <nav class="md-nav" aria-label="io_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.copy_dir" class="md-nav__link">
    copy_dir()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.create_dir_if_not_exists" class="md-nav__link">
    create_dir_if_not_exists()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.create_dir_recursive_if_not_exists" class="md-nav__link">
    create_dir_recursive_if_not_exists()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.create_file_if_not_exists" class="md-nav__link">
    create_file_if_not_exists()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.find_files" class="md-nav__link">
    find_files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.get_global_config_directory" class="md-nav__link">
    get_global_config_directory()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.get_grandparent" class="md-nav__link">
    get_grandparent()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.get_parent" class="md-nav__link">
    get_parent()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.is_remote" class="md-nav__link">
    is_remote()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.is_root" class="md-nav__link">
    is_root()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.move" class="md-nav__link">
    move()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.read_file_contents_as_string" class="md-nav__link">
    read_file_contents_as_string()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.resolve_relative_path" class="md-nav__link">
    resolve_relative_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.io_utils.write_file_contents_as_string" class="md-nav__link">
    write_file_contents_as_string()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.json_utils" class="md-nav__link">
    json_utils
  </a>
  
    <nav class="md-nav" aria-label="json_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.json_utils.decimal_encoder" class="md-nav__link">
    decimal_encoder()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.json_utils.isoformat" class="md-nav__link">
    isoformat()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.materializer_utils" class="md-nav__link">
    materializer_utils
  </a>
  
    <nav class="md-nav" aria-label="materializer_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.materializer_utils.select_materializer" class="md-nav__link">
    select_materializer()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.networking_utils" class="md-nav__link">
    networking_utils
  </a>
  
    <nav class="md-nav" aria-label="networking_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.networking_utils.find_available_port" class="md-nav__link">
    find_available_port()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.networking_utils.get_or_create_ngrok_tunnel" class="md-nav__link">
    get_or_create_ngrok_tunnel()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.networking_utils.port_available" class="md-nav__link">
    port_available()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.networking_utils.port_is_open" class="md-nav__link">
    port_is_open()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.networking_utils.replace_internal_hostname_with_localhost" class="md-nav__link">
    replace_internal_hostname_with_localhost()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.networking_utils.replace_localhost_with_internal_hostname" class="md-nav__link">
    replace_localhost_with_internal_hostname()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.networking_utils.scan_for_available_port" class="md-nav__link">
    scan_for_available_port()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.notebook_utils" class="md-nav__link">
    notebook_utils
  </a>
  
    <nav class="md-nav" aria-label="notebook_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.notebook_utils.compute_cell_replacement_module_name" class="md-nav__link">
    compute_cell_replacement_module_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.notebook_utils.enable_notebook_code_extraction" class="md-nav__link">
    enable_notebook_code_extraction()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.notebook_utils.get_active_notebook_cell_code" class="md-nav__link">
    get_active_notebook_cell_code()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.notebook_utils.is_defined_in_notebook_cell" class="md-nav__link">
    is_defined_in_notebook_cell()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.notebook_utils.load_notebook_cell_code" class="md-nav__link">
    load_notebook_cell_code()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.notebook_utils.try_to_save_notebook_cell_code" class="md-nav__link">
    try_to_save_notebook_cell_code()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.notebook_utils.warn_about_notebook_cell_magic_commands" class="md-nav__link">
    warn_about_notebook_cell_magic_commands()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.package_utils" class="md-nav__link">
    package_utils
  </a>
  
    <nav class="md-nav" aria-label="package_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.package_utils.clean_requirements" class="md-nav__link">
    clean_requirements()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.package_utils.is_latest_zenml_version" class="md-nav__link">
    is_latest_zenml_version()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pagination_utils" class="md-nav__link">
    pagination_utils
  </a>
  
    <nav class="md-nav" aria-label="pagination_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pagination_utils.depaginate" class="md-nav__link">
    depaginate()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pipeline_docker_image_builder" class="md-nav__link">
    pipeline_docker_image_builder
  </a>
  
    <nav class="md-nav" aria-label="pipeline_docker_image_builder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pipeline_docker_image_builder.PipelineDockerImageBuilder" class="md-nav__link">
    PipelineDockerImageBuilder
  </a>
  
    <nav class="md-nav" aria-label="PipelineDockerImageBuilder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pipeline_docker_image_builder.PipelineDockerImageBuilder.build_docker_image" class="md-nav__link">
    build_docker_image()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pipeline_docker_image_builder.PipelineDockerImageBuilder.gather_requirements_files" class="md-nav__link">
    gather_requirements_files()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.proxy_utils" class="md-nav__link">
    proxy_utils
  </a>
  
    <nav class="md-nav" aria-label="proxy_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.proxy_utils.make_proxy_class" class="md-nav__link">
    make_proxy_class()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils" class="md-nav__link">
    pydantic_utils
  </a>
  
    <nav class="md-nav" aria-label="pydantic_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.TemplateGenerator" class="md-nav__link">
    TemplateGenerator
  </a>
  
    <nav class="md-nav" aria-label="TemplateGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.TemplateGenerator.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.TemplateGenerator.run" class="md-nav__link">
    run()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.YAMLSerializationMixin" class="md-nav__link">
    YAMLSerializationMixin
  </a>
  
    <nav class="md-nav" aria-label="YAMLSerializationMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.YAMLSerializationMixin.from_yaml" class="md-nav__link">
    from_yaml()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.YAMLSerializationMixin.yaml" class="md-nav__link">
    yaml()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.before_validator_handler" class="md-nav__link">
    before_validator_handler()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.has_validators" class="md-nav__link">
    has_validators()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.model_validator_data_handler" class="md-nav__link">
    model_validator_data_handler()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.update_model" class="md-nav__link">
    update_model()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.pydantic_utils.validate_function_args" class="md-nav__link">
    validate_function_args()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils" class="md-nav__link">
    secret_utils
  </a>
  
    <nav class="md-nav" aria-label="secret_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.SecretReference" class="md-nav__link">
    SecretReference
  </a>
  
    <nav class="md-nav" aria-label="SecretReference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.SecretReference.__getnewargs__" class="md-nav__link">
    __getnewargs__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.SecretReference.__new__" class="md-nav__link">
    __new__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.SecretReference.__repr__" class="md-nav__link">
    __repr__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.ClearTextField" class="md-nav__link">
    ClearTextField()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.SecretField" class="md-nav__link">
    SecretField()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.is_clear_text_field" class="md-nav__link">
    is_clear_text_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.is_secret_field" class="md-nav__link">
    is_secret_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.is_secret_reference" class="md-nav__link">
    is_secret_reference()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.secret_utils.parse_secret_reference" class="md-nav__link">
    parse_secret_reference()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils" class="md-nav__link">
    settings_utils
  </a>
  
    <nav class="md-nav" aria-label="settings_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils.get_flavor_setting_key" class="md-nav__link">
    get_flavor_setting_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils.get_general_settings" class="md-nav__link">
    get_general_settings()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils.get_stack_component_for_settings_key" class="md-nav__link">
    get_stack_component_for_settings_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils.get_stack_component_setting_key" class="md-nav__link">
    get_stack_component_setting_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils.is_general_setting_key" class="md-nav__link">
    is_general_setting_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils.is_stack_component_setting_key" class="md-nav__link">
    is_stack_component_setting_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils.is_valid_setting_key" class="md-nav__link">
    is_valid_setting_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.settings_utils.validate_setting_keys" class="md-nav__link">
    validate_setting_keys()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.singleton" class="md-nav__link">
    singleton
  </a>
  
    <nav class="md-nav" aria-label="singleton">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.singleton.SingletonMetaClass" class="md-nav__link">
    SingletonMetaClass
  </a>
  
    <nav class="md-nav" aria-label="SingletonMetaClass">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.singleton.SingletonMetaClass.__call__" class="md-nav__link">
    __call__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.singleton.SingletonMetaClass.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_code_utils" class="md-nav__link">
    source_code_utils
  </a>
  
    <nav class="md-nav" aria-label="source_code_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_code_utils.get_hashed_source_code" class="md-nav__link">
    get_hashed_source_code()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_code_utils.get_source_code" class="md-nav__link">
    get_source_code()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils" class="md-nav__link">
    source_utils
  </a>
  
    <nav class="md-nav" aria-label="source_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.get_resolved_notebook_sources" class="md-nav__link">
    get_resolved_notebook_sources()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.get_source_root" class="md-nav__link">
    get_source_root()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.get_source_type" class="md-nav__link">
    get_source_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.is_distribution_package_file" class="md-nav__link">
    is_distribution_package_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.is_internal_module" class="md-nav__link">
    is_internal_module()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.is_standard_lib_file" class="md-nav__link">
    is_standard_lib_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.is_user_file" class="md-nav__link">
    is_user_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.load" class="md-nav__link">
    load()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.load_and_validate_class" class="md-nav__link">
    load_and_validate_class()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.prepend_python_path" class="md-nav__link">
    prepend_python_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.resolve" class="md-nav__link">
    resolve()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.set_custom_source_root" class="md-nav__link">
    set_custom_source_root()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.source_utils.validate_source_class" class="md-nav__link">
    validate_source_class()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils" class="md-nav__link">
    string_utils
  </a>
  
    <nav class="md-nav" aria-label="string_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils.b64_decode" class="md-nav__link">
    b64_decode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils.b64_encode" class="md-nav__link">
    b64_encode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils.format_name_template" class="md-nav__link">
    format_name_template()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils.get_human_readable_filesize" class="md-nav__link">
    get_human_readable_filesize()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils.get_human_readable_time" class="md-nav__link">
    get_human_readable_time()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils.random_str" class="md-nav__link">
    random_str()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils.substitute_string" class="md-nav__link">
    substitute_string()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.string_utils.validate_name" class="md-nav__link">
    validate_name()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typed_model" class="md-nav__link">
    typed_model
  </a>
  
    <nav class="md-nav" aria-label="typed_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typed_model.BaseTypedModel" class="md-nav__link">
    BaseTypedModel
  </a>
  
    <nav class="md-nav" aria-label="BaseTypedModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typed_model.BaseTypedModel.from_dict" class="md-nav__link">
    from_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typed_model.BaseTypedModel.from_json" class="md-nav__link">
    from_json()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typed_model.BaseTypedModelMeta" class="md-nav__link">
    BaseTypedModelMeta
  </a>
  
    <nav class="md-nav" aria-label="BaseTypedModelMeta">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typed_model.BaseTypedModelMeta.__new__" class="md-nav__link">
    __new__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils" class="md-nav__link">
    typing_utils
  </a>
  
    <nav class="md-nav" aria-label="typing_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils.all_literal_values" class="md-nav__link">
    all_literal_values()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils.get_args" class="md-nav__link">
    get_args()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils.get_origin" class="md-nav__link">
    get_origin()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils.is_literal_type" class="md-nav__link">
    is_literal_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils.is_none_type" class="md-nav__link">
    is_none_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils.is_optional" class="md-nav__link">
    is_optional()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils.is_union" class="md-nav__link">
    is_union()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.typing_utils.literal_values" class="md-nav__link">
    literal_values()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.uuid_utils" class="md-nav__link">
    uuid_utils
  </a>
  
    <nav class="md-nav" aria-label="uuid_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.uuid_utils.generate_uuid_from_string" class="md-nav__link">
    generate_uuid_from_string()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.uuid_utils.is_valid_uuid" class="md-nav__link">
    is_valid_uuid()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.uuid_utils.parse_name_or_uuid" class="md-nav__link">
    parse_name_or_uuid()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.visualization_utils" class="md-nav__link">
    visualization_utils
  </a>
  
    <nav class="md-nav" aria-label="visualization_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.visualization_utils.format_csv_visualization_as_html" class="md-nav__link">
    format_csv_visualization_as_html()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.visualization_utils.visualize_artifact" class="md-nav__link">
    visualize_artifact()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils" class="md-nav__link">
    yaml_utils
  </a>
  
    <nav class="md-nav" aria-label="yaml_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.UUIDEncoder" class="md-nav__link">
    UUIDEncoder
  </a>
  
    <nav class="md-nav" aria-label="UUIDEncoder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.UUIDEncoder.default" class="md-nav__link">
    default()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.append_yaml" class="md-nav__link">
    append_yaml()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.comment_out_yaml" class="md-nav__link">
    comment_out_yaml()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.is_json_serializable" class="md-nav__link">
    is_json_serializable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.is_yaml" class="md-nav__link">
    is_yaml()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.read_json" class="md-nav__link">
    read_json()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.read_yaml" class="md-nav__link">
    read_yaml()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.write_json" class="md-nav__link">
    write_json()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zenml.utils.yaml_utils.write_yaml" class="md-nav__link">
    write_yaml()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/zenml-io/zenml/docs/core_code_docs/core-utils.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="utils">Utils</h1>


  <div class="doc doc-object doc-module">



<h2 id="zenml.utils" class="doc doc-heading">
        <code>zenml.utils</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h2>

    <div class="doc doc-contents first">

      <p>Initialization of the utils module.</p>
<p>The <code>utils</code> module contains utility functions handling analytics, reading and
writing YAML data as well as other general purpose functions.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.archivable" class="doc doc-heading">
        <code>archivable</code>



</h3>

    <div class="doc doc-contents ">

      <p>Archivable mixin.</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="zenml.utils.archivable.Archivable" class="doc doc-heading">
        <code>
Archivable            (<span title="abc.ABC">ABC</span>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Archivable mixin class.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/archivable.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Archivable</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Archivable mixin class.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the object.</span>

<span class="sd">        Args:</span>
<span class="sd">            *args: Unused args for subclasses.</span>
<span class="sd">            **kwargs: Unused keyword args for subclasses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_extra_files</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">add_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">destination</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a file to the archive.</span>

<span class="sd">        Args:</span>
<span class="sd">            source: The source of the file to add. This can either be a path</span>
<span class="sd">                or the file content.</span>
<span class="sd">            destination: The path inside the archive where the file</span>
<span class="sd">                should be added.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fileio</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
            <span class="k">with</span> <span class="n">fileio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">source</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_extra_files</span><span class="p">[</span><span class="n">destination</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_extra_files</span><span class="p">[</span><span class="n">destination</span><span class="p">]</span> <span class="o">=</span> <span class="n">source</span>

    <span class="k">def</span> <span class="nf">add_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">destination</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a directory to the archive.</span>

<span class="sd">        Args:</span>
<span class="sd">            source: Path to the directory.</span>
<span class="sd">            destination: The path inside the build context where the directory</span>
<span class="sd">                should be added.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If `source` does not point to a directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fileio</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t add directory </span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2"> to the build context as it &quot;</span>
                <span class="s2">&quot;does not exist or is not a directory.&quot;</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="nb">dir</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">fileio</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
            <span class="n">dir_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">fileio</span><span class="o">.</span><span class="n">convert_to_str</span><span class="p">(</span><span class="nb">dir</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">file_name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">file_name</span> <span class="o">=</span> <span class="n">fileio</span><span class="o">.</span><span class="n">convert_to_str</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
                <span class="n">file_source</span> <span class="o">=</span> <span class="n">dir_path</span> <span class="o">/</span> <span class="n">file_name</span>
                <span class="n">file_destination</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">Path</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
                    <span class="o">/</span> <span class="n">dir_path</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
                    <span class="o">/</span> <span class="n">file_name</span>
                <span class="p">)</span>

                <span class="k">with</span> <span class="n">file_source</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_extra_files</span><span class="p">[</span><span class="n">file_destination</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">write_archive</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">output_file</span><span class="p">:</span> <span class="n">IO</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="n">use_gzip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Writes an archive of the build context to the given file.</span>

<span class="sd">        Args:</span>
<span class="sd">            output_file: The file to write the archive to.</span>
<span class="sd">            use_gzip: Whether to use `gzip` to compress the file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_files</span><span class="p">()</span>
        <span class="n">extra_files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_extra_files</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">use_gzip</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">gzip</span> <span class="kn">import</span> <span class="n">GzipFile</span>

            <span class="c1"># We don&#39;t use the builtin gzip functionality of the `tarfile`</span>
            <span class="c1"># library as that one includes the tar filename and creation</span>
            <span class="c1"># timestamp in the archive which causes the hash of the resulting</span>
            <span class="c1"># file to be different each time. We use this hash to avoid</span>
            <span class="c1"># duplicate uploads, which is why we pass empty values for filename</span>
            <span class="c1"># and mtime here.</span>
            <span class="n">fileobj</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">GzipFile</span><span class="p">(</span>
                <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;wb&quot;</span><span class="p">,</span> <span class="n">fileobj</span><span class="o">=</span><span class="n">output_file</span><span class="p">,</span> <span class="n">mtime</span><span class="o">=</span><span class="mf">0.0</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fileobj</span> <span class="o">=</span> <span class="n">output_file</span>

        <span class="k">with</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">fileobj</span><span class="o">=</span><span class="n">fileobj</span><span class="p">)</span> <span class="k">as</span> <span class="n">tf</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">archive_path</span><span class="p">,</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="n">files</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">archive_path</span> <span class="ow">in</span> <span class="n">extra_files</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="k">if</span> <span class="n">info</span> <span class="o">:=</span> <span class="n">tf</span><span class="o">.</span><span class="n">gettarinfo</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">arcname</span><span class="o">=</span><span class="n">archive_path</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">isfile</span><span class="p">():</span>
                        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                            <span class="n">tf</span><span class="o">.</span><span class="n">addfile</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">tf</span><span class="o">.</span><span class="n">addfile</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">archive_path</span><span class="p">,</span> <span class="n">contents</span> <span class="ow">in</span> <span class="n">extra_files</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">info</span> <span class="o">=</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">TarInfo</span><span class="p">(</span><span class="n">archive_path</span><span class="p">)</span>
                <span class="n">contents_encoded</span> <span class="o">=</span> <span class="n">contents</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                <span class="n">info</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">contents_encoded</span><span class="p">)</span>
                <span class="n">tf</span><span class="o">.</span><span class="n">addfile</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">contents_encoded</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">use_gzip</span><span class="p">:</span>
            <span class="n">fileobj</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="n">output_file</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets all regular files that should be included in the archive.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dict {path_in_archive: path_on_filesystem} for all regular files</span>
<span class="sd">            in the archive.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get_extra_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets all extra files that should be included in the archive.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dict {path_in_archive: file_content} for all extra files in the</span>
<span class="sd">            archive.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extra_files</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.archivable.Archivable.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Initialize the object.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>*args</code></td>
        <td><code>Any</code></td>
        <td><p>Unused args for subclasses.</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Unused keyword args for subclasses.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/archivable.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the object.</span>

<span class="sd">    Args:</span>
<span class="sd">        *args: Unused args for subclasses.</span>
<span class="sd">        **kwargs: Unused keyword args for subclasses.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_extra_files</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.archivable.Archivable.add_directory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Adds a directory to the archive.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>str</code></td>
        <td><p>Path to the directory.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>destination</code></td>
        <td><code>str</code></td>
        <td><p>The path inside the build context where the directory
should be added.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If <code>source</code> does not point to a directory.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/archivable.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">destination</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a directory to the archive.</span>

<span class="sd">    Args:</span>
<span class="sd">        source: Path to the directory.</span>
<span class="sd">        destination: The path inside the build context where the directory</span>
<span class="sd">            should be added.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If `source` does not point to a directory.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">fileio</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Can&#39;t add directory </span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2"> to the build context as it &quot;</span>
            <span class="s2">&quot;does not exist or is not a directory.&quot;</span>
        <span class="p">)</span>

    <span class="k">for</span> <span class="nb">dir</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">fileio</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
        <span class="n">dir_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">fileio</span><span class="o">.</span><span class="n">convert_to_str</span><span class="p">(</span><span class="nb">dir</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">file_name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="n">file_name</span> <span class="o">=</span> <span class="n">fileio</span><span class="o">.</span><span class="n">convert_to_str</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
            <span class="n">file_source</span> <span class="o">=</span> <span class="n">dir_path</span> <span class="o">/</span> <span class="n">file_name</span>
            <span class="n">file_destination</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">Path</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
                <span class="o">/</span> <span class="n">dir_path</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
                <span class="o">/</span> <span class="n">file_name</span>
            <span class="p">)</span>

            <span class="k">with</span> <span class="n">file_source</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_extra_files</span><span class="p">[</span><span class="n">file_destination</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.archivable.Archivable.add_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Adds a file to the archive.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>str</code></td>
        <td><p>The source of the file to add. This can either be a path
or the file content.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>destination</code></td>
        <td><code>str</code></td>
        <td><p>The path inside the archive where the file
should be added.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/archivable.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">destination</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a file to the archive.</span>

<span class="sd">    Args:</span>
<span class="sd">        source: The source of the file to add. This can either be a path</span>
<span class="sd">            or the file content.</span>
<span class="sd">        destination: The path inside the archive where the file</span>
<span class="sd">            should be added.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fileio</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">fileio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">source</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_extra_files</span><span class="p">[</span><span class="n">destination</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_extra_files</span><span class="p">[</span><span class="n">destination</span><span class="p">]</span> <span class="o">=</span> <span class="n">source</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.archivable.Archivable.get_extra_files" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_extra_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Gets all extra files that should be included in the archive.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>A dict {path_in_archive</code></td>
      <td><p>file_content} for all extra files in the
archive.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/archivable.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_extra_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets all extra files that should be included in the archive.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dict {path_in_archive: file_content} for all extra files in the</span>
<span class="sd">        archive.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extra_files</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.archivable.Archivable.get_files" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Gets all regular files that should be included in the archive.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>A dict {path_in_archive</code></td>
      <td><p>path_on_filesystem} for all regular files
in the archive.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/archivable.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">get_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets all regular files that should be included in the archive.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dict {path_in_archive: path_on_filesystem} for all regular files</span>
<span class="sd">        in the archive.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.archivable.Archivable.write_archive" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write_archive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">use_gzip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Writes an archive of the build context to the given file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>output_file</code></td>
        <td><code>IO[bytes]</code></td>
        <td><p>The file to write the archive to.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>use_gzip</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to use <code>gzip</code> to compress the file.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/archivable.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">write_archive</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">output_file</span><span class="p">:</span> <span class="n">IO</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="n">use_gzip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Writes an archive of the build context to the given file.</span>

<span class="sd">    Args:</span>
<span class="sd">        output_file: The file to write the archive to.</span>
<span class="sd">        use_gzip: Whether to use `gzip` to compress the file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_files</span><span class="p">()</span>
    <span class="n">extra_files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_extra_files</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">use_gzip</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">gzip</span> <span class="kn">import</span> <span class="n">GzipFile</span>

        <span class="c1"># We don&#39;t use the builtin gzip functionality of the `tarfile`</span>
        <span class="c1"># library as that one includes the tar filename and creation</span>
        <span class="c1"># timestamp in the archive which causes the hash of the resulting</span>
        <span class="c1"># file to be different each time. We use this hash to avoid</span>
        <span class="c1"># duplicate uploads, which is why we pass empty values for filename</span>
        <span class="c1"># and mtime here.</span>
        <span class="n">fileobj</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">GzipFile</span><span class="p">(</span>
            <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;wb&quot;</span><span class="p">,</span> <span class="n">fileobj</span><span class="o">=</span><span class="n">output_file</span><span class="p">,</span> <span class="n">mtime</span><span class="o">=</span><span class="mf">0.0</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">fileobj</span> <span class="o">=</span> <span class="n">output_file</span>

    <span class="k">with</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">fileobj</span><span class="o">=</span><span class="n">fileobj</span><span class="p">)</span> <span class="k">as</span> <span class="n">tf</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">archive_path</span><span class="p">,</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="n">files</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">archive_path</span> <span class="ow">in</span> <span class="n">extra_files</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">info</span> <span class="o">:=</span> <span class="n">tf</span><span class="o">.</span><span class="n">gettarinfo</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">arcname</span><span class="o">=</span><span class="n">archive_path</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">isfile</span><span class="p">():</span>
                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                        <span class="n">tf</span><span class="o">.</span><span class="n">addfile</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">tf</span><span class="o">.</span><span class="n">addfile</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">archive_path</span><span class="p">,</span> <span class="n">contents</span> <span class="ow">in</span> <span class="n">extra_files</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">TarInfo</span><span class="p">(</span><span class="n">archive_path</span><span class="p">)</span>
            <span class="n">contents_encoded</span> <span class="o">=</span> <span class="n">contents</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            <span class="n">info</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">contents_encoded</span><span class="p">)</span>
            <span class="n">tf</span><span class="o">.</span><span class="n">addfile</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">contents_encoded</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">use_gzip</span><span class="p">:</span>
        <span class="n">fileobj</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="n">output_file</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.cloud_utils" class="doc doc-heading">
        <code>cloud_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utilities for ZenML Pro.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.cloud_utils.try_get_model_version_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">try_get_model_version_url</span><span class="p">(</span><span class="n">model_version</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Check if a model version is from a ZenML Pro server and return its' URL.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>model_version</code></td>
        <td><code>ModelVersionResponse</code></td>
        <td><p>The model version to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>URL if the model version is from a ZenML Pro server, else empty string.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/cloud_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">try_get_model_version_url</span><span class="p">(</span><span class="n">model_version</span><span class="p">:</span> <span class="n">ModelVersionResponse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if a model version is from a ZenML Pro server and return its&#39; URL.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_version: The model version to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        URL if the model version is from a ZenML Pro server, else empty string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model_version_url</span> <span class="o">=</span> <span class="n">get_model_version_url</span><span class="p">(</span><span class="n">model_version</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">model_version_url</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="s2">&quot;Dashboard URL for created Model Version &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">model_version</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">::</span><span class="si">{</span><span class="n">model_version</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">`:</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="o">+</span> <span class="n">model_version_url</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.code_repository_utils" class="doc doc-heading">
        <code>code_repository_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utilities for code repositories.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.code_repository_utils.find_active_code_repository" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_active_code_repository</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Find the active code repository for a given path.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>path</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Path at which to look for the code repository. If not given, the
source root will be used.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[LocalRepositoryContext]</code></td>
      <td><p>The local repository context active at that path or None.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/code_repository_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_active_code_repository</span><span class="p">(</span>
    <span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;LocalRepositoryContext&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find the active code repository for a given path.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: Path at which to look for the code repository. If not given, the</span>
<span class="sd">            source root will be used.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The local repository context active at that path or None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_CODE_REPOSITORY_CACHE</span>
    <span class="kn">from</span> <span class="nn">zenml.client</span> <span class="kn">import</span> <span class="n">Client</span>
    <span class="kn">from</span> <span class="nn">zenml.code_repositories</span> <span class="kn">import</span> <span class="n">BaseCodeRepository</span>

    <span class="n">path</span> <span class="o">=</span> <span class="n">path</span> <span class="ow">or</span> <span class="n">source_utils</span><span class="o">.</span><span class="n">get_source_root</span><span class="p">()</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">_CODE_REPOSITORY_CACHE</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">_CODE_REPOSITORY_CACHE</span><span class="p">[</span><span class="n">path</span><span class="p">]</span>

    <span class="n">local_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;LocalRepositoryContext&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">depaginate</span><span class="p">(</span><span class="n">list_method</span><span class="o">=</span><span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">list_code_repositories</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">repo</span> <span class="o">=</span> <span class="n">BaseCodeRepository</span><span class="o">.</span><span class="n">from_model</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Failed to instantiate code repository class.&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
            <span class="k">continue</span>

        <span class="n">local_context</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_local_context</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">local_context</span><span class="p">:</span>
            <span class="k">break</span>

    <span class="n">_CODE_REPOSITORY_CACHE</span><span class="p">[</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">local_context</span>
    <span class="k">return</span> <span class="n">local_context</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.code_repository_utils.set_custom_local_repository" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_custom_local_repository</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">commit</span><span class="p">,</span> <span class="n">repo</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Manually defines a local repository for a path.</p>
<p>To explain what this function does we need to take a dive into source
resolving and what happens inside the Docker image entrypoint:
* When trying to resolve an object to a source, we first determine whether
the file is a user file or not.
* If the file is a user file, we check if that user file is inside a clean
code repository using the
<code>code_repository_utils.find_active_code_repository(...)</code> function. If that
is the case, the object will be resolved to a <code>CodeRepositorySource</code> which
includes additional information about the current commit and the ID of the
code repository.
* The <code>code_repository_utils.find_active_code_repository(...)</code> uses the
code repository implementation classes to check whether the code repository
"exists" at that local path. For git repositories, this check might look as
follows: The code repository first checks if there is a git repository at
that path or in any parent directory. If there is, the remote URLs of this
git repository will be checked to see if one matches the URL defined for
the code repository.
* When running a step inside a Docker image, ZenML potentially downloads
files from a code repository. This usually does not download the entire
repository (and in the case of git might not download a .git directory which
defines a local git repository) but only specific files. If we now try to
resolve any object while running in this container, it will not get resolved
to a <code>CodeRepositorySource</code> as
<code>code_repository_utils.find_active_code_repository(...)</code> won't find an
active repository. As we downloaded these files, we however know that they
belong to a certain code repository at a specific commit, and that's what we
can define using this function.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>root</code></td>
        <td><code>str</code></td>
        <td><p>The repository root.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>commit</code></td>
        <td><code>str</code></td>
        <td><p>The commit of the repository.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>repo</code></td>
        <td><code>BaseCodeRepository</code></td>
        <td><p>The code repository associated with the local repository.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/code_repository_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_custom_local_repository</span><span class="p">(</span>
    <span class="n">root</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">commit</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">repo</span><span class="p">:</span> <span class="s2">&quot;BaseCodeRepository&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Manually defines a local repository for a path.</span>

<span class="sd">    To explain what this function does we need to take a dive into source</span>
<span class="sd">    resolving and what happens inside the Docker image entrypoint:</span>
<span class="sd">    * When trying to resolve an object to a source, we first determine whether</span>
<span class="sd">    the file is a user file or not.</span>
<span class="sd">    * If the file is a user file, we check if that user file is inside a clean</span>
<span class="sd">    code repository using the</span>
<span class="sd">    `code_repository_utils.find_active_code_repository(...)` function. If that</span>
<span class="sd">    is the case, the object will be resolved to a `CodeRepositorySource` which</span>
<span class="sd">    includes additional information about the current commit and the ID of the</span>
<span class="sd">    code repository.</span>
<span class="sd">    * The `code_repository_utils.find_active_code_repository(...)` uses the</span>
<span class="sd">    code repository implementation classes to check whether the code repository</span>
<span class="sd">    &quot;exists&quot; at that local path. For git repositories, this check might look as</span>
<span class="sd">    follows: The code repository first checks if there is a git repository at</span>
<span class="sd">    that path or in any parent directory. If there is, the remote URLs of this</span>
<span class="sd">    git repository will be checked to see if one matches the URL defined for</span>
<span class="sd">    the code repository.</span>
<span class="sd">    * When running a step inside a Docker image, ZenML potentially downloads</span>
<span class="sd">    files from a code repository. This usually does not download the entire</span>
<span class="sd">    repository (and in the case of git might not download a .git directory which</span>
<span class="sd">    defines a local git repository) but only specific files. If we now try to</span>
<span class="sd">    resolve any object while running in this container, it will not get resolved</span>
<span class="sd">    to a `CodeRepositorySource` as</span>
<span class="sd">    `code_repository_utils.find_active_code_repository(...)` won&#39;t find an</span>
<span class="sd">    active repository. As we downloaded these files, we however know that they</span>
<span class="sd">    belong to a certain code repository at a specific commit, and that&#39;s what we</span>
<span class="sd">    can define using this function.</span>

<span class="sd">    Args:</span>
<span class="sd">        root: The repository root.</span>
<span class="sd">        commit: The commit of the repository.</span>
<span class="sd">        repo: The code repository associated with the local repository.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">zenml.utils.downloaded_repository_context</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">_DownloadedRepositoryContext</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">global</span> <span class="n">_CODE_REPOSITORY_CACHE</span>

    <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">source_utils</span><span class="o">.</span><span class="n">get_source_root</span><span class="p">())</span>
    <span class="n">_CODE_REPOSITORY_CACHE</span><span class="p">[</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">_DownloadedRepositoryContext</span><span class="p">(</span>
        <span class="n">code_repository_id</span><span class="o">=</span><span class="n">repo</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">root</span><span class="o">=</span><span class="n">root</span><span class="p">,</span> <span class="n">commit</span><span class="o">=</span><span class="n">commit</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.code_utils" class="doc doc-heading">
        <code>code_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Code utilities.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="zenml.utils.code_utils.CodeArchive" class="doc doc-heading">
        <code>
CodeArchive            (<a class="autorefs autorefs-internal" title="zenml.utils.archivable.Archivable" href="#zenml.utils.archivable.Archivable">Archivable</a>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Code archive class.</p>
<p>This class is used to archive user code before uploading it to the artifact
store. If the user code is stored in a Git repository, only files not
excluded by gitignores will be included in the archive.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/code_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">CodeArchive</span><span class="p">(</span><span class="n">Archivable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Code archive class.</span>

<span class="sd">    This class is used to archive user code before uploading it to the artifact</span>
<span class="sd">    store. If the user code is stored in a Git repository, only files not</span>
<span class="sd">    excluded by gitignores will be included in the archive.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the object.</span>

<span class="sd">        Args:</span>
<span class="sd">            root: Root directory of the archive.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">git_repo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Repo&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Git repository active at the code archive root.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The git repository if available.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># These imports fail when git is not installed on the machine</span>
            <span class="kn">from</span> <span class="nn">git.exc</span> <span class="kn">import</span> <span class="n">InvalidGitRepositoryError</span>
            <span class="kn">from</span> <span class="nn">git.repo.base</span> <span class="kn">import</span> <span class="n">Repo</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">git_repo</span> <span class="o">=</span> <span class="n">Repo</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">,</span> <span class="n">search_parent_directories</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">InvalidGitRepositoryError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">git_repo</span>

    <span class="k">def</span> <span class="nf">_get_all_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">archive_root</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all files inside the archive root.</span>

<span class="sd">        Args:</span>
<span class="sd">            archive_root: The root directory from which to get all files.</span>

<span class="sd">        Returns:</span>
<span class="sd">            All files inside the archive root.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_files</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">archive_root</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
                <span class="n">path_in_archive</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">archive_root</span><span class="p">)</span>
                <span class="n">all_files</span><span class="p">[</span><span class="n">path_in_archive</span><span class="p">]</span> <span class="o">=</span> <span class="n">file_path</span>

        <span class="k">return</span> <span class="n">all_files</span>

    <span class="k">def</span> <span class="nf">get_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets all regular files that should be included in the archive.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If the code archive would not include any files.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dict {path_in_archive: path_on_filesystem} for all regular files</span>
<span class="sd">            in the archive.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{}</span>

        <span class="n">all_files</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">repo</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">git_repo</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">ls_files</span><span class="p">(</span>
                    <span class="s2">&quot;--cached&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;--others&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;--modified&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;--exclude-standard&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to get non-ignored files from git: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">all_files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_files</span><span class="p">(</span><span class="n">archive_root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">split</span><span class="p">():</span>
                    <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repo</span><span class="o">.</span><span class="n">working_dir</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
                    <span class="n">path_in_archive</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
                        <span class="n">all_files</span><span class="p">[</span><span class="n">path_in_archive</span><span class="p">]</span> <span class="o">=</span> <span class="n">file_path</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">all_files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_files</span><span class="p">(</span><span class="n">archive_root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">all_files</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;The code archive to be uploaded does not contain any files. &quot;</span>
                <span class="s2">&quot;This is probably because all files in your source root &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="si">}</span><span class="s2">` are ignored by a .gitignore file.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Explicitly remove .zen directories as we write an updated version</span>
        <span class="c1"># to disk everytime ZenML is called. This updates the mtime of the</span>
        <span class="c1"># file, which invalidates the code upload caching. The values in</span>
        <span class="c1"># the .zen directory are not needed anyway as we set them as</span>
        <span class="c1"># environment variables.</span>
        <span class="n">all_files</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">path_in_archive</span><span class="p">:</span> <span class="n">file_path</span>
            <span class="k">for</span> <span class="n">path_in_archive</span><span class="p">,</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">all_files</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
            <span class="k">if</span> <span class="s2">&quot;.zen&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="n">path_in_archive</span><span class="p">)</span><span class="o">.</span><span class="n">parts</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">all_files</span>

    <span class="k">def</span> <span class="nf">write_archive</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">output_file</span><span class="p">:</span> <span class="n">IO</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="n">use_gzip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Writes an archive of the build context to the given file.</span>

<span class="sd">        Args:</span>
<span class="sd">            output_file: The file to write the archive to.</span>
<span class="sd">            use_gzip: Whether to use `gzip` to compress the file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">write_archive</span><span class="p">(</span><span class="n">output_file</span><span class="o">=</span><span class="n">output_file</span><span class="p">,</span> <span class="n">use_gzip</span><span class="o">=</span><span class="n">use_gzip</span><span class="p">)</span>
        <span class="n">archive_size</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">output_file</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">archive_size</span> <span class="o">&gt;</span> <span class="mi">20</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Code archive size: `</span><span class="si">%s</span><span class="s2">`. If you believe this is &quot;</span>
                <span class="s2">&quot;unreasonably large, make sure to version your code in git and &quot;</span>
                <span class="s2">&quot;ignore unnecessary files using a `.gitignore` file.&quot;</span><span class="p">,</span>
                <span class="n">string_utils</span><span class="o">.</span><span class="n">get_human_readable_filesize</span><span class="p">(</span><span class="n">archive_size</span><span class="p">),</span>
            <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="zenml.utils.code_utils.CodeArchive.git_repo" class="doc doc-heading">
<code class="highlight language-python"><span class="n">git_repo</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Repo</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Git repository active at the code archive root.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[Repo]</code></td>
      <td><p>The git repository if available.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>






  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.code_utils.CodeArchive.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Initialize the object.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>root</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Root directory of the archive.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/code_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the object.</span>

<span class="sd">    Args:</span>
<span class="sd">        root: Root directory of the archive.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.code_utils.CodeArchive.get_files" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Gets all regular files that should be included in the archive.</p>

<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If the code archive would not include any files.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>A dict {path_in_archive</code></td>
      <td><p>path_on_filesystem} for all regular files
in the archive.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/code_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets all regular files that should be included in the archive.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the code archive would not include any files.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dict {path_in_archive: path_on_filesystem} for all regular files</span>
<span class="sd">        in the archive.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="n">all_files</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">repo</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">git_repo</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">ls_files</span><span class="p">(</span>
                <span class="s2">&quot;--cached&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--others&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--modified&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--exclude-standard&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Failed to get non-ignored files from git: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">all_files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_files</span><span class="p">(</span><span class="n">archive_root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">split</span><span class="p">():</span>
                <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repo</span><span class="o">.</span><span class="n">working_dir</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
                <span class="n">path_in_archive</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
                    <span class="n">all_files</span><span class="p">[</span><span class="n">path_in_archive</span><span class="p">]</span> <span class="o">=</span> <span class="n">file_path</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">all_files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_files</span><span class="p">(</span><span class="n">archive_root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">all_files</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;The code archive to be uploaded does not contain any files. &quot;</span>
            <span class="s2">&quot;This is probably because all files in your source root &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="si">}</span><span class="s2">` are ignored by a .gitignore file.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Explicitly remove .zen directories as we write an updated version</span>
    <span class="c1"># to disk everytime ZenML is called. This updates the mtime of the</span>
    <span class="c1"># file, which invalidates the code upload caching. The values in</span>
    <span class="c1"># the .zen directory are not needed anyway as we set them as</span>
    <span class="c1"># environment variables.</span>
    <span class="n">all_files</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">path_in_archive</span><span class="p">:</span> <span class="n">file_path</span>
        <span class="k">for</span> <span class="n">path_in_archive</span><span class="p">,</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">all_files</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        <span class="k">if</span> <span class="s2">&quot;.zen&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="n">path_in_archive</span><span class="p">)</span><span class="o">.</span><span class="n">parts</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">all_files</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.code_utils.CodeArchive.write_archive" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write_archive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">use_gzip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Writes an archive of the build context to the given file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>output_file</code></td>
        <td><code>IO[bytes]</code></td>
        <td><p>The file to write the archive to.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>use_gzip</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to use <code>gzip</code> to compress the file.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/code_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">write_archive</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">output_file</span><span class="p">:</span> <span class="n">IO</span><span class="p">[</span><span class="nb">bytes</span><span class="p">],</span> <span class="n">use_gzip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Writes an archive of the build context to the given file.</span>

<span class="sd">    Args:</span>
<span class="sd">        output_file: The file to write the archive to.</span>
<span class="sd">        use_gzip: Whether to use `gzip` to compress the file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">write_archive</span><span class="p">(</span><span class="n">output_file</span><span class="o">=</span><span class="n">output_file</span><span class="p">,</span> <span class="n">use_gzip</span><span class="o">=</span><span class="n">use_gzip</span><span class="p">)</span>
    <span class="n">archive_size</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">output_file</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">archive_size</span> <span class="o">&gt;</span> <span class="mi">20</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Code archive size: `</span><span class="si">%s</span><span class="s2">`. If you believe this is &quot;</span>
            <span class="s2">&quot;unreasonably large, make sure to version your code in git and &quot;</span>
            <span class="s2">&quot;ignore unnecessary files using a `.gitignore` file.&quot;</span><span class="p">,</span>
            <span class="n">string_utils</span><span class="o">.</span><span class="n">get_human_readable_filesize</span><span class="p">(</span><span class="n">archive_size</span><span class="p">),</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.code_utils.compute_file_hash" class="doc doc-heading">
<code class="highlight language-python"><span class="n">compute_file_hash</span><span class="p">(</span><span class="n">file</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Compute a hash of the content of a file.</p>
<p>This function will not seek the file before or after the hash computation.
This means that the content will be computed based on the current cursor
until the end of the file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>file</code></td>
        <td><code>IO[bytes]</code></td>
        <td><p>The file for which to compute the hash.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>A hash of the file content.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/code_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">compute_file_hash</span><span class="p">(</span><span class="n">file</span><span class="p">:</span> <span class="n">IO</span><span class="p">[</span><span class="nb">bytes</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compute a hash of the content of a file.</span>

<span class="sd">    This function will not seek the file before or after the hash computation.</span>
<span class="sd">    This means that the content will be computed based on the current cursor</span>
<span class="sd">    until the end of the file.</span>

<span class="sd">    Args:</span>
<span class="sd">        file: The file for which to compute the hash.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A hash of the file content.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">hash_</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">()</span>  <span class="c1"># nosec</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">64</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="n">hash_</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">hash_</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.code_utils.download_and_extract_code" class="doc doc-heading">
<code class="highlight language-python"><span class="n">download_and_extract_code</span><span class="p">(</span><span class="n">code_path</span><span class="p">,</span> <span class="n">extract_dir</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Download and extract code.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>code_path</code></td>
        <td><code>str</code></td>
        <td><p>Path where the code is uploaded.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>extract_dir</code></td>
        <td><code>str</code></td>
        <td><p>Directory where to code should be extracted to.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If the code is stored in an artifact store which is
not active.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/code_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">download_and_extract_code</span><span class="p">(</span><span class="n">code_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">extract_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Download and extract code.</span>

<span class="sd">    Args:</span>
<span class="sd">        code_path: Path where the code is uploaded.</span>
<span class="sd">        extract_dir: Directory where to code should be extracted to.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the code is stored in an artifact store which is</span>
<span class="sd">            not active.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">artifact_store</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">active_stack</span><span class="o">.</span><span class="n">artifact_store</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">code_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">artifact_store</span><span class="o">.</span><span class="n">path</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Code stored in different artifact store.&quot;</span><span class="p">)</span>

    <span class="n">download_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">code_path</span><span class="p">)</span>
    <span class="n">fileio</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">code_path</span><span class="p">,</span> <span class="n">download_path</span><span class="p">)</span>

    <span class="n">shutil</span><span class="o">.</span><span class="n">unpack_archive</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">download_path</span><span class="p">,</span> <span class="n">extract_dir</span><span class="o">=</span><span class="n">extract_dir</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">download_path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.code_utils.download_code_from_artifact_store" class="doc doc-heading">
<code class="highlight language-python"><span class="n">download_code_from_artifact_store</span><span class="p">(</span><span class="n">code_path</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Download code from the artifact store.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>code_path</code></td>
        <td><code>str</code></td>
        <td><p>Path where the code is stored.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/code_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">download_code_from_artifact_store</span><span class="p">(</span><span class="n">code_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Download code from the artifact store.</span>

<span class="sd">    Args:</span>
<span class="sd">        code_path: Path where the code is stored.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Downloading code from artifact store path `</span><span class="si">%s</span><span class="s2">`.&quot;</span><span class="p">,</span> <span class="n">code_path</span><span class="p">)</span>

    <span class="c1"># Do not remove this line, we need to instantiate the artifact store to</span>
    <span class="c1"># register the filesystem needed for the file download</span>
    <span class="n">_</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">active_stack</span><span class="o">.</span><span class="n">artifact_store</span>

    <span class="n">extract_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">extract_dir</span><span class="p">)</span>

    <span class="n">download_and_extract_code</span><span class="p">(</span><span class="n">code_path</span><span class="o">=</span><span class="n">code_path</span><span class="p">,</span> <span class="n">extract_dir</span><span class="o">=</span><span class="n">extract_dir</span><span class="p">)</span>

    <span class="n">source_utils</span><span class="o">.</span><span class="n">set_custom_source_root</span><span class="p">(</span><span class="n">extract_dir</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">extract_dir</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">extract_dir</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.code_utils.download_notebook_code" class="doc doc-heading">
<code class="highlight language-python"><span class="n">download_notebook_code</span><span class="p">(</span><span class="n">artifact_store</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">download_path</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Download code extracted from a notebook cell.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>artifact_store</code></td>
        <td><code>BaseArtifactStore</code></td>
        <td><p>The artifact store from which to download the code.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>file_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the code file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>download_path</code></td>
        <td><code>str</code></td>
        <td><p>The local path where the file should be downloaded to.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>If no file with the given filename exists in this
artifact store.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/code_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">download_notebook_code</span><span class="p">(</span>
    <span class="n">artifact_store</span><span class="p">:</span> <span class="s2">&quot;BaseArtifactStore&quot;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">download_path</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Download code extracted from a notebook cell.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact_store: The artifact store from which to download the code.</span>
<span class="sd">        file_name: The name of the code file.</span>
<span class="sd">        download_path: The local path where the file should be downloaded to.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: If no file with the given filename exists in this</span>
<span class="sd">            artifact store.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">code_dir</span> <span class="o">=</span> <span class="n">_get_notebook_upload_dir</span><span class="p">(</span><span class="n">artifact_store</span><span class="o">=</span><span class="n">artifact_store</span><span class="p">)</span>
    <span class="n">code_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">code_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">fileio</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">code_path</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Notebook code at path </span><span class="si">{</span><span class="n">code_path</span><span class="si">}</span><span class="s2"> not found.&quot;</span>
        <span class="p">)</span>

    <span class="n">fileio</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">code_path</span><span class="p">,</span> <span class="n">download_path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.code_utils.upload_code_if_necessary" class="doc doc-heading">
<code class="highlight language-python"><span class="n">upload_code_if_necessary</span><span class="p">(</span><span class="n">code_archive</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Upload code to the artifact store if necessary.</p>
<p>This function computes a hash of the code to be uploaded, and if an archive
with the same hash already exists it will not re-upload but instead return
the path to the existing archive.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>code_archive</code></td>
        <td><code>CodeArchive</code></td>
        <td><p>The code archive to upload.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The path where the archived code is uploaded.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/code_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">upload_code_if_necessary</span><span class="p">(</span><span class="n">code_archive</span><span class="p">:</span> <span class="n">CodeArchive</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Upload code to the artifact store if necessary.</span>

<span class="sd">    This function computes a hash of the code to be uploaded, and if an archive</span>
<span class="sd">    with the same hash already exists it will not re-upload but instead return</span>
<span class="sd">    the path to the existing archive.</span>

<span class="sd">    Args:</span>
<span class="sd">        code_archive: The code archive to upload.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The path where the archived code is uploaded.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">artifact_store</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span><span class="o">.</span><span class="n">active_stack</span><span class="o">.</span><span class="n">artifact_store</span>

    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">(</span>
        <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w+b&quot;</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;.tar.gz&quot;</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">code_archive</span><span class="o">.</span><span class="n">write_archive</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">archive_path</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span>
        <span class="n">archive_hash</span> <span class="o">=</span> <span class="n">compute_file_hash</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="n">upload_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">artifact_store</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;code_uploads&quot;</span><span class="p">)</span>
    <span class="n">fileio</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">upload_dir</span><span class="p">)</span>
    <span class="n">upload_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">upload_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">archive_hash</span><span class="si">}</span><span class="s2">.tar.gz&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">fileio</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">upload_path</span><span class="p">):</span>
        <span class="n">archive_size</span> <span class="o">=</span> <span class="n">string_utils</span><span class="o">.</span><span class="n">get_human_readable_filesize</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">archive_path</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Uploading code to `</span><span class="si">%s</span><span class="s2">` (Size: </span><span class="si">%s</span><span class="s2">).&quot;</span><span class="p">,</span> <span class="n">upload_path</span><span class="p">,</span> <span class="n">archive_size</span>
        <span class="p">)</span>
        <span class="n">fileio</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">archive_path</span><span class="p">,</span> <span class="n">upload_path</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Code upload finished.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Code already exists in artifact store, skipping upload.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">archive_path</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">archive_path</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">upload_path</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.code_utils.upload_notebook_code" class="doc doc-heading">
<code class="highlight language-python"><span class="n">upload_notebook_code</span><span class="p">(</span><span class="n">artifact_store</span><span class="p">,</span> <span class="n">cell_code</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Upload code extracted from a notebook cell.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>artifact_store</code></td>
        <td><code>BaseArtifactStore</code></td>
        <td><p>The artifact store in which to upload the code.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>cell_code</code></td>
        <td><code>str</code></td>
        <td><p>The notebook cell code.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>file_name</code></td>
        <td><code>str</code></td>
        <td><p>The filename to use for storing the cell code.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/code_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">upload_notebook_code</span><span class="p">(</span>
    <span class="n">artifact_store</span><span class="p">:</span> <span class="s2">&quot;BaseArtifactStore&quot;</span><span class="p">,</span> <span class="n">cell_code</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Upload code extracted from a notebook cell.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact_store: The artifact store in which to upload the code.</span>
<span class="sd">        cell_code: The notebook cell code.</span>
<span class="sd">        file_name: The filename to use for storing the cell code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">upload_dir</span> <span class="o">=</span> <span class="n">_get_notebook_upload_dir</span><span class="p">(</span><span class="n">artifact_store</span><span class="o">=</span><span class="n">artifact_store</span><span class="p">)</span>
    <span class="n">fileio</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">upload_dir</span><span class="p">)</span>
    <span class="n">upload_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">upload_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">fileio</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">upload_path</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">fileio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">upload_path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cell_code</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Uploaded notebook cell code to </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span> <span class="n">upload_path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.cuda_utils" class="doc doc-heading">
        <code>cuda_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utilities for managing GPU memory.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.cuda_utils.cleanup_gpu_memory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cleanup_gpu_memory</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Clean up GPU memory.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>force</code></td>
        <td><code>bool</code></td>
        <td><p>whether to force the cleanup of GPU memory (must be passed explicitly)</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/cuda_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">cleanup_gpu_memory</span><span class="p">(</span><span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clean up GPU memory.</span>

<span class="sd">    Args:</span>
<span class="sd">        force: whether to force the cleanup of GPU memory (must be passed explicitly)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;This will clean up all GPU memory on current physical machine. &quot;</span>
            <span class="s2">&quot;This action is considered to be dangerous by default, since &quot;</span>
            <span class="s2">&quot;it might affect other processes running in the same environment. &quot;</span>
            <span class="s2">&quot;If this is intended, please explicitly pass `force=True`.&quot;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">torch</span>
        <span class="k">except</span> <span class="ne">ModuleNotFoundError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;No PyTorch installed. Skipping GPU memory cleanup.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Cleaning up GPU memory...&quot;</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">():</span>
            <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">empty_cache</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.daemon" class="doc doc-heading">
        <code>daemon</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utility functions to start/stop daemon processes.</p>
<p>This is only implemented for UNIX systems and therefore doesn't work on
Windows. Based on
https://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.daemon.check_if_daemon_is_running" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_if_daemon_is_running</span><span class="p">(</span><span class="n">pid_file</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks whether a daemon process indicated by the PID file is running.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pid_file</code></td>
        <td><code>str</code></td>
        <td><p>Path to file containing the PID of the daemon
process to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if the daemon process is running, otherwise False.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/daemon.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_if_daemon_is_running</span><span class="p">(</span><span class="n">pid_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks whether a daemon process indicated by the PID file is running.</span>

<span class="sd">    Args:</span>
<span class="sd">        pid_file: Path to file containing the PID of the daemon</span>
<span class="sd">            process to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the daemon process is running, otherwise False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">get_daemon_pid_if_running</span><span class="p">(</span><span class="n">pid_file</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.daemon.daemonize" class="doc doc-heading">
<code class="highlight language-python"><span class="n">daemonize</span><span class="p">(</span><span class="n">pid_file</span><span class="p">,</span> <span class="n">log_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">working_directory</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Decorator that executes the decorated function as a daemon process.</p>
<p>Use this decorator to easily transform any function into a daemon
process.</p>
<p>For example,</p>
<pre><code class="language-python">import time
from zenml.utils.daemon import daemonize


@daemonize(log_file='/tmp/daemon.log', pid_file='/tmp/daemon.pid')
def sleeping_daemon(period: int) -&gt; None:
    print(f&quot;I'm a daemon! I will sleep for {period} seconds.&quot;)
    time.sleep(period)
    print(&quot;Done sleeping, flying away.&quot;)

sleeping_daemon(period=30)

print(&quot;I'm the daemon's parent!.&quot;)
time.sleep(10) # just to prove that the daemon is running in parallel
</code></pre>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pid_file</code></td>
        <td><code>str</code></td>
        <td><p>a file where the PID of the daemon process will
be stored.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>log_file</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>file where stdout and stderr are redirected for the daemon
process. If not supplied, the daemon will be silenced (i.e. have
its stdout/stderr redirected to /dev/null).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>working_directory</code></td>
        <td><code>str</code></td>
        <td><p>working directory for the daemon process,
defaults to the root directory.</p></td>
        <td><code>&#39;/&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Callable[[~F], ~F]</code></td>
      <td><p>Decorated function that, when called, will detach from the current
process and continue executing in the background, as a daemon
process.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/daemon.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">daemonize</span><span class="p">(</span>
    <span class="n">pid_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">log_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">working_directory</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">F</span><span class="p">],</span> <span class="n">F</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator that executes the decorated function as a daemon process.</span>

<span class="sd">    Use this decorator to easily transform any function into a daemon</span>
<span class="sd">    process.</span>

<span class="sd">    For example,</span>

<span class="sd">    ```python</span>
<span class="sd">    import time</span>
<span class="sd">    from zenml.utils.daemon import daemonize</span>


<span class="sd">    @daemonize(log_file=&#39;/tmp/daemon.log&#39;, pid_file=&#39;/tmp/daemon.pid&#39;)</span>
<span class="sd">    def sleeping_daemon(period: int) -&gt; None:</span>
<span class="sd">        print(f&quot;I&#39;m a daemon! I will sleep for {period} seconds.&quot;)</span>
<span class="sd">        time.sleep(period)</span>
<span class="sd">        print(&quot;Done sleeping, flying away.&quot;)</span>

<span class="sd">    sleeping_daemon(period=30)</span>

<span class="sd">    print(&quot;I&#39;m the daemon&#39;s parent!.&quot;)</span>
<span class="sd">    time.sleep(10) # just to prove that the daemon is running in parallel</span>
<span class="sd">    ```</span>

<span class="sd">    Args:</span>
<span class="sd">        pid_file: a file where the PID of the daemon process will</span>
<span class="sd">            be stored.</span>
<span class="sd">        log_file: file where stdout and stderr are redirected for the daemon</span>
<span class="sd">            process. If not supplied, the daemon will be silenced (i.e. have</span>
<span class="sd">            its stdout/stderr redirected to /dev/null).</span>
<span class="sd">        working_directory: working directory for the daemon process,</span>
<span class="sd">            defaults to the root directory.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Decorated function that, when called, will detach from the current</span>
<span class="sd">        process and continue executing in the background, as a daemon</span>
<span class="sd">        process.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">inner_decorator</span><span class="p">(</span><span class="n">_func</span><span class="p">:</span> <span class="n">F</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">F</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">daemon</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Standard daemonization of a process.</span>

<span class="sd">            Args:</span>
<span class="sd">                *args: Arguments to be passed to the decorated function.</span>
<span class="sd">                **kwargs: Keyword arguments to be passed to the decorated</span>
<span class="sd">                    function.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s2">&quot;win32&quot;</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                    <span class="s2">&quot;Daemon functionality is currently not supported on Windows.&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">run_as_daemon</span><span class="p">(</span>
                    <span class="n">_func</span><span class="p">,</span>
                    <span class="n">log_file</span><span class="o">=</span><span class="n">log_file</span><span class="p">,</span>
                    <span class="n">pid_file</span><span class="o">=</span><span class="n">pid_file</span><span class="p">,</span>
                    <span class="n">working_directory</span><span class="o">=</span><span class="n">working_directory</span><span class="p">,</span>
                    <span class="o">*</span><span class="n">args</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">F</span><span class="p">,</span> <span class="n">daemon</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">inner_decorator</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.daemon.get_daemon_pid_if_running" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_daemon_pid_if_running</span><span class="p">(</span><span class="n">pid_file</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Read and return the PID value from a PID file.</p>
<p>It does this if the daemon process tracked by the PID file is running.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pid_file</code></td>
        <td><code>str</code></td>
        <td><p>Path to file containing the PID of the daemon
process to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[int]</code></td>
      <td><p>The PID of the daemon process if it is running, otherwise None.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/daemon.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_daemon_pid_if_running</span><span class="p">(</span><span class="n">pid_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read and return the PID value from a PID file.</span>

<span class="sd">    It does this if the daemon process tracked by the PID file is running.</span>

<span class="sd">    Args:</span>
<span class="sd">        pid_file: Path to file containing the PID of the daemon</span>
<span class="sd">            process to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The PID of the daemon process if it is running, otherwise None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">pid_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">pid</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">IOError</span><span class="p">,</span> <span class="ne">FileNotFoundError</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Daemon PID file &#39;</span><span class="si">{</span><span class="n">pid_file</span><span class="si">}</span><span class="s2">&#39; does not exist or cannot be read.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">pid</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">psutil</span><span class="o">.</span><span class="n">pid_exists</span><span class="p">(</span><span class="n">pid</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Daemon with PID &#39;</span><span class="si">{</span><span class="n">pid</span><span class="si">}</span><span class="s2">&#39; is no longer running.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Daemon with PID &#39;</span><span class="si">{</span><span class="n">pid</span><span class="si">}</span><span class="s2">&#39; is running.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pid</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.daemon.run_as_daemon" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run_as_daemon</span><span class="p">(</span><span class="n">daemon_function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">pid_file</span><span class="p">,</span> <span class="n">log_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">working_directory</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Runs a function as a daemon process.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>daemon_function</code></td>
        <td><code>~F</code></td>
        <td><p>The function to run as a daemon.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>pid_file</code></td>
        <td><code>str</code></td>
        <td><p>Path to file in which to store the PID of the daemon
process.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>log_file</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Optional file to which the daemons stdout/stderr will be
redirected to.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>working_directory</code></td>
        <td><code>str</code></td>
        <td><p>Working directory for the daemon process,
defaults to the root directory.</p></td>
        <td><code>&#39;/&#39;</code></td>
      </tr>
      <tr>
        <td><code>args</code></td>
        <td><code>Any</code></td>
        <td><p>Positional arguments to pass to the daemon function.</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Keyword arguments to pass to the daemon function.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileExistsError</code></td>
        <td><p>If the PID file already exists.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/daemon.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_as_daemon</span><span class="p">(</span>
    <span class="n">daemon_function</span><span class="p">:</span> <span class="n">F</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">pid_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">log_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">working_directory</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Runs a function as a daemon process.</span>

<span class="sd">    Args:</span>
<span class="sd">        daemon_function: The function to run as a daemon.</span>
<span class="sd">        pid_file: Path to file in which to store the PID of the daemon</span>
<span class="sd">            process.</span>
<span class="sd">        log_file: Optional file to which the daemons stdout/stderr will be</span>
<span class="sd">            redirected to.</span>
<span class="sd">        working_directory: Working directory for the daemon process,</span>
<span class="sd">            defaults to the root directory.</span>
<span class="sd">        args: Positional arguments to pass to the daemon function.</span>
<span class="sd">        kwargs: Keyword arguments to pass to the daemon function.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileExistsError: If the PID file already exists.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># convert to absolute path as we will change working directory later</span>
    <span class="k">if</span> <span class="n">pid_file</span><span class="p">:</span>
        <span class="n">pid_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">pid_file</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">log_file</span><span class="p">:</span>
        <span class="n">log_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span>

    <span class="c1"># create parent directory if necessary</span>
    <span class="n">dir_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">pid_file</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dir_name</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">dir_name</span><span class="p">)</span>

    <span class="c1"># check if PID file exists</span>
    <span class="k">if</span> <span class="n">pid_file</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">pid_file</span><span class="p">):</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">get_daemon_pid_if_running</span><span class="p">(</span><span class="n">pid_file</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pid</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">FileExistsError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The PID file &#39;</span><span class="si">{</span><span class="n">pid_file</span><span class="si">}</span><span class="s2">&#39; already exists and a daemon &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;process with the same PID &#39;</span><span class="si">{</span><span class="n">pid</span><span class="si">}</span><span class="s2">&#39; is already running.&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Please remove the PID file or kill the daemon process &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;before starting a new daemon.&quot;</span>
            <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Removing left over PID file &#39;</span><span class="si">{</span><span class="n">pid_file</span><span class="si">}</span><span class="s2">&#39; from a previous &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;daemon process that didn&#39;t shut down correctly.&quot;</span>
        <span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">pid_file</span><span class="p">)</span>

    <span class="c1"># first fork</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">fork</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">pid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># this is the process that called `run_as_daemon` so we</span>
            <span class="c1"># wait for the child process to finish to avoid creating</span>
            <span class="c1"># zombie processes. Then we simply return so the current process</span>
            <span class="c1"># can continue what it was doing.</span>
            <span class="n">os</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
            <span class="k">return</span>
    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Unable to fork (error code: </span><span class="si">%d</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># decouple from parent environment</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">working_directory</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">setsid</span><span class="p">()</span>
    <span class="n">os</span><span class="o">.</span><span class="n">umask</span><span class="p">(</span><span class="mo">0o22</span><span class="p">)</span>

    <span class="c1"># second fork</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">fork</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">pid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># this is the parent of the future daemon process, kill it</span>
            <span class="c1"># so the daemon gets adopted by the init process.</span>
            <span class="c1"># we use os._exit here to prevent the inherited code from</span>
            <span class="c1"># catching the SystemExit exception and doing something else.</span>
            <span class="n">os</span><span class="o">.</span><span class="n">_exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unable to fork (error code: </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">errno</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
        <span class="c1"># we use os._exit here to prevent the inherited code from</span>
        <span class="c1"># catching the SystemExit exception and doing something else.</span>
        <span class="n">os</span><span class="o">.</span><span class="n">_exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># redirect standard file descriptors to devnull (or the given logfile)</span>
    <span class="n">devnull</span> <span class="o">=</span> <span class="s2">&quot;/dev/null&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s2">&quot;devnull&quot;</span><span class="p">):</span>
        <span class="n">devnull</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">devnull</span>

    <span class="n">devnull_fd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">devnull</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">O_RDWR</span><span class="p">)</span>
    <span class="n">log_fd</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">log_file</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">O_CREAT</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">O_RDWR</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">O_APPEND</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">log_file</span>
        <span class="k">else</span> <span class="kc">None</span>
    <span class="p">)</span>
    <span class="n">out_fd</span> <span class="o">=</span> <span class="n">log_fd</span> <span class="ow">or</span> <span class="n">devnull_fd</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">dup2</span><span class="p">(</span><span class="n">devnull_fd</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">fileno</span><span class="p">())</span>
    <span class="k">except</span> <span class="n">io</span><span class="o">.</span><span class="n">UnsupportedOperation</span><span class="p">:</span>
        <span class="c1"># stdin is not a file descriptor</span>
        <span class="k">pass</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">dup2</span><span class="p">(</span><span class="n">out_fd</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">fileno</span><span class="p">())</span>
    <span class="k">except</span> <span class="n">io</span><span class="o">.</span><span class="n">UnsupportedOperation</span><span class="p">:</span>
        <span class="c1"># stdout is not a file descriptor</span>
        <span class="k">pass</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">dup2</span><span class="p">(</span><span class="n">out_fd</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">fileno</span><span class="p">())</span>
    <span class="k">except</span> <span class="n">io</span><span class="o">.</span><span class="n">UnsupportedOperation</span><span class="p">:</span>
        <span class="c1"># stderr is not a file descriptor</span>
        <span class="k">pass</span>

    <span class="k">if</span> <span class="n">pid_file</span><span class="p">:</span>
        <span class="c1"># write the PID file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">pid_file</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># register actions in case this process exits/gets killed</span>
    <span class="k">def</span> <span class="nf">cleanup</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Daemon cleanup.&quot;&quot;&quot;</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Cleanup: terminating children processes...</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">terminate_children</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">pid_file</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">pid_file</span><span class="p">):</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cleanup: removing PID file </span><span class="si">{</span><span class="n">pid_file</span><span class="si">}</span><span class="s2">...</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">pid_file</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">sighndl</span><span class="p">(</span><span class="n">signum</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">frame</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">types</span><span class="o">.</span><span class="n">FrameType</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Daemon signal handler.</span>

<span class="sd">        Args:</span>
<span class="sd">            signum: Signal number.</span>
<span class="sd">            frame: Frame object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Handling signal </span><span class="si">{</span><span class="n">signum</span><span class="si">}</span><span class="s2">...</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">cleanup</span><span class="p">()</span>

    <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGTERM</span><span class="p">,</span> <span class="n">sighndl</span><span class="p">)</span>
    <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGINT</span><span class="p">,</span> <span class="n">sighndl</span><span class="p">)</span>
    <span class="n">atexit</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">cleanup</span><span class="p">)</span>

    <span class="c1"># finally run the actual daemon code</span>
    <span class="n">daemon_function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.daemon.stop_daemon" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stop_daemon</span><span class="p">(</span><span class="n">pid_file</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Stops a daemon process.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pid_file</code></td>
        <td><code>str</code></td>
        <td><p>Path to file containing the PID of the daemon process to
kill.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/daemon.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">stop_daemon</span><span class="p">(</span><span class="n">pid_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stops a daemon process.</span>

<span class="sd">    Args:</span>
<span class="sd">        pid_file: Path to file containing the PID of the daemon process to</span>
<span class="sd">            kill.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">pid_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">pid</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">IOError</span><span class="p">,</span> <span class="ne">FileNotFoundError</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Daemon PID file &#39;</span><span class="si">%s</span><span class="s2">&#39; does not exist.&quot;</span><span class="p">,</span> <span class="n">pid_file</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">psutil</span><span class="o">.</span><span class="n">pid_exists</span><span class="p">(</span><span class="n">pid</span><span class="p">):</span>
        <span class="n">process</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
        <span class="n">process</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;PID from &#39;</span><span class="si">%s</span><span class="s2">&#39; does not exist.&quot;</span><span class="p">,</span> <span class="n">pid_file</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.daemon.terminate_children" class="doc doc-heading">
<code class="highlight language-python"><span class="n">terminate_children</span><span class="p">()</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Terminate all processes that are children of the currently running process.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/daemon.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">terminate_children</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Terminate all processes that are children of the currently running process.&quot;&quot;&quot;</span>
    <span class="n">pid</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">psutil</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
        <span class="c1"># could not find parent process id</span>
        <span class="k">return</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">children</span><span class="p">(</span><span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">children</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Terminating child process with PID </span><span class="si">{</span><span class="n">p</span><span class="o">.</span><span class="n">pid</span><span class="si">}</span><span class="s2">...</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">alive</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">wait_procs</span><span class="p">(</span>
        <span class="n">children</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">CHILD_PROCESS_WAIT_TIMEOUT</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">alive</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Killing child process with PID </span><span class="si">{</span><span class="n">p</span><span class="o">.</span><span class="n">pid</span><span class="si">}</span><span class="s2">...</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">kill</span><span class="p">()</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">alive</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">wait_procs</span><span class="p">(</span>
        <span class="n">children</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">CHILD_PROCESS_WAIT_TIMEOUT</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.dashboard_utils" class="doc doc-heading">
        <code>dashboard_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utility class to help with interacting with the dashboard.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.dashboard_utils.get_cloud_dashboard_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_cloud_dashboard_url</span><span class="p">()</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Get the base url of the cloud dashboard if the server is a cloud tenant.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>The base url of the cloud dashboard.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/dashboard_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_cloud_dashboard_url</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the base url of the cloud dashboard if the server is a cloud tenant.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The base url of the cloud dashboard.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">client</span><span class="o">.</span><span class="n">zen_store</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">StoreType</span><span class="o">.</span><span class="n">REST</span><span class="p">:</span>
        <span class="n">server_info</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">zen_store</span><span class="o">.</span><span class="n">get_store_info</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">server_info</span><span class="o">.</span><span class="n">deployment_type</span> <span class="o">==</span> <span class="n">ServerDeploymentType</span><span class="o">.</span><span class="n">CLOUD</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">server_info</span><span class="o">.</span><span class="n">dashboard_url</span>

    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.dashboard_utils.get_component_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_component_url</span><span class="p">(</span><span class="n">component</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Function to get the dashboard URL of a given component model.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>component</code></td>
        <td><code>ComponentResponse</code></td>
        <td><p>the response model of the given component.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>the URL to the component if the dashboard is available, else None.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/dashboard_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_component_url</span><span class="p">(</span><span class="n">component</span><span class="p">:</span> <span class="n">ComponentResponse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Function to get the dashboard URL of a given component model.</span>

<span class="sd">    Args:</span>
<span class="sd">        component: the response model of the given component.</span>

<span class="sd">    Returns:</span>
<span class="sd">        the URL to the component if the dashboard is available, else None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">base_url</span> <span class="o">=</span> <span class="n">get_server_dashboard_url</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">base_url</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">base_url</span> <span class="o">+</span> <span class="n">constants</span><span class="o">.</span><span class="n">STACKS</span>

    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.dashboard_utils.get_model_version_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_model_version_url</span><span class="p">(</span><span class="n">model_version_id</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Function to get the dashboard URL of a given model version.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>model_version_id</code></td>
        <td><code>UUID</code></td>
        <td><p>the id of the model version.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>the URL to the model version if the dashboard is available, else None.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/dashboard_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_model_version_url</span><span class="p">(</span><span class="n">model_version_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Function to get the dashboard URL of a given model version.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_version_id: the id of the model version.</span>

<span class="sd">    Returns:</span>
<span class="sd">        the URL to the model version if the dashboard is available, else None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cloud_url</span> <span class="o">=</span> <span class="n">get_cloud_dashboard_url</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">cloud_url</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cloud_url</span><span class="si">}</span><span class="s2">/model-versions/</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">model_version_id</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.dashboard_utils.get_run_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_run_url</span><span class="p">(</span><span class="n">run</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Function to get the dashboard URL of a given pipeline run.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>run</code></td>
        <td><code>PipelineRunResponse</code></td>
        <td><p>the response model of the given pipeline run.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>the URL to the pipeline run if the dashboard is available, else None.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/dashboard_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_run_url</span><span class="p">(</span><span class="n">run</span><span class="p">:</span> <span class="n">PipelineRunResponse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Function to get the dashboard URL of a given pipeline run.</span>

<span class="sd">    Args:</span>
<span class="sd">        run: the response model of the given pipeline run.</span>

<span class="sd">    Returns:</span>
<span class="sd">        the URL to the pipeline run if the dashboard is available, else None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cloud_url</span> <span class="o">=</span> <span class="n">get_cloud_dashboard_url</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">cloud_url</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cloud_url</span><span class="si">}{</span><span class="n">constants</span><span class="o">.</span><span class="n">RUNS</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">run</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">dashboard_url</span> <span class="o">=</span> <span class="n">get_server_dashboard_url</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">dashboard_url</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dashboard_url</span><span class="si">}{</span><span class="n">constants</span><span class="o">.</span><span class="n">RUNS</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">run</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.dashboard_utils.get_server_dashboard_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_server_dashboard_url</span><span class="p">()</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Get the base url of the dashboard deployed by the server.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>The server dashboard url.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/dashboard_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_server_dashboard_url</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the base url of the dashboard deployed by the server.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The server dashboard url.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">client</span><span class="o">.</span><span class="n">zen_store</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">StoreType</span><span class="o">.</span><span class="n">REST</span><span class="p">:</span>
        <span class="n">server_info</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">zen_store</span><span class="o">.</span><span class="n">get_store_info</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">server_info</span><span class="o">.</span><span class="n">server_url</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">server_info</span><span class="o">.</span><span class="n">server_url</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">zen_store</span><span class="o">.</span><span class="n">url</span>

        <span class="k">return</span> <span class="n">url</span>

    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.dashboard_utils.get_stack_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_stack_url</span><span class="p">(</span><span class="n">stack</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Function to get the dashboard URL of a given stack model.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>stack</code></td>
        <td><code>StackResponse</code></td>
        <td><p>the response model of the given stack.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>the URL to the stack if the dashboard is available, else None.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/dashboard_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_stack_url</span><span class="p">(</span><span class="n">stack</span><span class="p">:</span> <span class="n">StackResponse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Function to get the dashboard URL of a given stack model.</span>

<span class="sd">    Args:</span>
<span class="sd">        stack: the response model of the given stack.</span>

<span class="sd">    Returns:</span>
<span class="sd">        the URL to the stack if the dashboard is available, else None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">base_url</span> <span class="o">=</span> <span class="n">get_server_dashboard_url</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">base_url</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">base_url</span> <span class="o">+</span> <span class="n">constants</span><span class="o">.</span><span class="n">STACKS</span>

    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.dashboard_utils.show_dashboard" class="doc doc-heading">
<code class="highlight language-python"><span class="n">show_dashboard</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Show the ZenML dashboard at the given URL.</p>
<p>In native environments, the dashboard is opened in the default browser.
In notebook environments, the dashboard is embedded in an iframe.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>URL of the ZenML dashboard.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/dashboard_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">show_dashboard</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Show the ZenML dashboard at the given URL.</span>

<span class="sd">    In native environments, the dashboard is opened in the default browser.</span>
<span class="sd">    In notebook environments, the dashboard is embedded in an iframe.</span>

<span class="sd">    Args:</span>
<span class="sd">        url: URL of the ZenML dashboard.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">environment</span> <span class="o">=</span> <span class="n">get_environment</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">environment</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EnvironmentType</span><span class="o">.</span><span class="n">NOTEBOOK</span><span class="p">,</span> <span class="n">EnvironmentType</span><span class="o">.</span><span class="n">COLAB</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">IPython.core.display</span> <span class="kn">import</span> <span class="n">display</span>
        <span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">IFrame</span>

        <span class="n">display</span><span class="p">(</span><span class="n">IFrame</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;100%&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">720</span><span class="p">))</span>

    <span class="k">elif</span> <span class="n">environment</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EnvironmentType</span><span class="o">.</span><span class="n">NATIVE</span><span class="p">,</span> <span class="n">EnvironmentType</span><span class="o">.</span><span class="n">WSL</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">constants</span><span class="o">.</span><span class="n">handle_bool_env_var</span><span class="p">(</span>
            <span class="n">constants</span><span class="o">.</span><span class="n">ENV_AUTO_OPEN_DASHBOARD</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="kn">import</span> <span class="nn">webbrowser</span>

                <span class="k">if</span> <span class="n">environment</span> <span class="o">==</span> <span class="n">EnvironmentType</span><span class="o">.</span><span class="n">WSL</span><span class="p">:</span>
                    <span class="n">webbrowser</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;wslview </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;Automatically opening the dashboard in your &quot;</span>
                    <span class="s2">&quot;browser. To disable this, set the env variable &quot;</span>
                    <span class="s2">&quot;AUTO_OPEN_DASHBOARD=false.&quot;</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;To open the dashboard in a browser automatically, &quot;</span>
                <span class="s2">&quot;set the env variable AUTO_OPEN_DASHBOARD=true.&quot;</span>
            <span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The ZenML dashboard is available at </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.deprecation_utils" class="doc doc-heading">
        <code>deprecation_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Deprecation utilities.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.deprecation_utils.deprecate_pydantic_attributes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">deprecate_pydantic_attributes</span><span class="p">(</span><span class="o">*</span><span class="n">attributes</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Utility function for deprecating and migrating pydantic attributes.</p>
<p><strong>Usage</strong>:
To use this, you can specify it on any pydantic BaseModel subclass like
this (all the deprecated attributes need to be non-required):</p>
<pre><code class="language-python">from pydantic import BaseModel
from typing import Optional

class MyModel(BaseModel):
    deprecated: Optional[int] = None

    old_name: Optional[str] = None
    new_name: str

    _deprecation_validator = deprecate_pydantic_attributes(
        &quot;deprecated&quot;, (&quot;old_name&quot;, &quot;new_name&quot;)
    )
</code></pre>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>*attributes</code></td>
        <td><code>Union[str, Tuple[str, str]]</code></td>
        <td><p>List of attributes to deprecate. This is either the name
of the attribute to deprecate, or a tuple containing the name of
the deprecated attribute, and it's replacement.</p></td>
        <td><code>()</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>Pydantic validator class method to be used on BaseModel subclasses
to deprecate or migrate attributes.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/deprecation_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">deprecate_pydantic_attributes</span><span class="p">(</span>
    <span class="o">*</span><span class="n">attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Utility function for deprecating and migrating pydantic attributes.</span>

<span class="sd">    **Usage**:</span>
<span class="sd">    To use this, you can specify it on any pydantic BaseModel subclass like</span>
<span class="sd">    this (all the deprecated attributes need to be non-required):</span>

<span class="sd">    ```python</span>
<span class="sd">    from pydantic import BaseModel</span>
<span class="sd">    from typing import Optional</span>

<span class="sd">    class MyModel(BaseModel):</span>
<span class="sd">        deprecated: Optional[int] = None</span>

<span class="sd">        old_name: Optional[str] = None</span>
<span class="sd">        new_name: str</span>

<span class="sd">        _deprecation_validator = deprecate_pydantic_attributes(</span>
<span class="sd">            &quot;deprecated&quot;, (&quot;old_name&quot;, &quot;new_name&quot;)</span>
<span class="sd">        )</span>
<span class="sd">    ```</span>

<span class="sd">    Args:</span>
<span class="sd">        *attributes: List of attributes to deprecate. This is either the name</span>
<span class="sd">            of the attribute to deprecate, or a tuple containing the name of</span>
<span class="sd">            the deprecated attribute, and it&#39;s replacement.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Pydantic validator class method to be used on BaseModel subclasses</span>
<span class="sd">        to deprecate or migrate attributes.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore[misc]</span>
    <span class="nd">@classmethod</span>
    <span class="nd">@before_validator_handler</span>
    <span class="k">def</span> <span class="nf">_deprecation_validator</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">],</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Pydantic validator function for deprecating pydantic attributes.</span>

<span class="sd">        Args:</span>
<span class="sd">            cls: The class on which the attributes are defined.</span>
<span class="sd">            data: All values passed at model initialization.</span>

<span class="sd">        Raises:</span>
<span class="sd">            AssertionError: If either the deprecated or replacement attribute</span>
<span class="sd">                don&#39;t exist.</span>
<span class="sd">            TypeError: If the deprecated attribute is a required attribute.</span>
<span class="sd">            ValueError: If the deprecated attribute and replacement attribute</span>
<span class="sd">                contain different values.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Input values with potentially migrated values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">previous_deprecation_warnings</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
            <span class="bp">cls</span><span class="p">,</span> <span class="n">PREVIOUS_DEPRECATION_WARNINGS_ATTRIBUTE</span><span class="p">,</span> <span class="nb">set</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">_warn</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Logs and raises a warning for a deprecated attribute.</span>

<span class="sd">            Args:</span>
<span class="sd">                message: The warning message.</span>
<span class="sd">                attribute: The name of the attribute.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="n">attribute</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">previous_deprecation_warnings</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
                <span class="n">previous_deprecation_warnings</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">attribute</span><span class="p">)</span>

            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="n">message</span><span class="p">,</span>
                <span class="ne">DeprecationWarning</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">deprecated_attribute</span> <span class="o">=</span> <span class="n">attribute</span>
                <span class="n">replacement_attribute</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">deprecated_attribute</span><span class="p">,</span> <span class="n">replacement_attribute</span> <span class="o">=</span> <span class="n">attribute</span>

                <span class="k">assert</span> <span class="p">(</span>
                    <span class="n">replacement_attribute</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_fields</span>
                <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Unable to find attribute </span><span class="si">{</span><span class="n">replacement_attribute</span><span class="si">}</span><span class="s2">.&quot;</span>

            <span class="k">assert</span> <span class="p">(</span>
                <span class="n">deprecated_attribute</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_fields</span>
            <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Unable to find attribute </span><span class="si">{</span><span class="n">deprecated_attribute</span><span class="si">}</span><span class="s2">.&quot;</span>

            <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_fields</span><span class="p">[</span><span class="n">deprecated_attribute</span><span class="p">]</span><span class="o">.</span><span class="n">is_required</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Unable to deprecate attribute &#39;</span><span class="si">{</span><span class="n">deprecated_attribute</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;of class </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">. In order to deprecate an &quot;</span>
                    <span class="s2">&quot;attribute, it needs to be a non-required attribute. &quot;</span>
                    <span class="s2">&quot;To do so, mark the attribute with an `Optional[...] type &quot;</span>
                    <span class="s2">&quot;annotation.&quot;</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">deprecated_attribute</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">replacement_attribute</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">_warn</span><span class="p">(</span>
                    <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;The attribute `</span><span class="si">{</span><span class="n">deprecated_attribute</span><span class="si">}</span><span class="s2">` of class &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">` will be deprecated soon.&quot;</span><span class="p">,</span>
                    <span class="n">attribute</span><span class="o">=</span><span class="n">deprecated_attribute</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">continue</span>

            <span class="n">_warn</span><span class="p">(</span>
                <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;The attribute `</span><span class="si">{</span><span class="n">deprecated_attribute</span><span class="si">}</span><span class="s2">` of class &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">` will be deprecated soon. Use the &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;attribute `</span><span class="si">{</span><span class="n">replacement_attribute</span><span class="si">}</span><span class="s2">` instead.&quot;</span><span class="p">,</span>
                <span class="n">attribute</span><span class="o">=</span><span class="n">deprecated_attribute</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">replacement_attribute</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;Migrating value of deprecated attribute </span><span class="si">%s</span><span class="s2"> to &quot;</span>
                    <span class="s2">&quot;replacement attribute </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span>
                    <span class="n">deprecated_attribute</span><span class="p">,</span>
                    <span class="n">replacement_attribute</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">data</span><span class="p">[</span><span class="n">replacement_attribute</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">deprecated_attribute</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">data</span><span class="p">[</span><span class="n">deprecated_attribute</span><span class="p">]</span> <span class="o">!=</span> <span class="n">data</span><span class="p">[</span><span class="n">replacement_attribute</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Got different values for deprecated attribute &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">deprecated_attribute</span><span class="si">}</span><span class="s2"> and replacement &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;attribute </span><span class="si">{</span><span class="n">replacement_attribute</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Both values are identical, no need to do anything</span>
                <span class="k">pass</span>

        <span class="nb">setattr</span><span class="p">(</span>
            <span class="bp">cls</span><span class="p">,</span>
            <span class="n">PREVIOUS_DEPRECATION_WARNINGS_ATTRIBUTE</span><span class="p">,</span>
            <span class="n">previous_deprecation_warnings</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">data</span>

    <span class="k">return</span> <span class="n">_deprecation_validator</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.dict_utils" class="doc doc-heading">
        <code>dict_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Util functions for dictionaries.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.dict_utils.dict_to_bytes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">dict_to_bytes</span><span class="p">(</span><span class="n">dict_</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Converts a dictionary to bytes.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>dict_</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>The dictionary to convert.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bytes</code></td>
      <td><p>The dictionary as bytes.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/dict_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">dict_to_bytes</span><span class="p">(</span><span class="n">dict_</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts a dictionary to bytes.</span>

<span class="sd">    Args:</span>
<span class="sd">        dict_: The dictionary to convert.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The dictionary as bytes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
            <span class="n">dict_</span><span class="p">,</span>
            <span class="n">sort_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="n">pydantic_encoder</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.dict_utils.recursive_update" class="doc doc-heading">
<code class="highlight language-python"><span class="n">recursive_update</span><span class="p">(</span><span class="n">original</span><span class="p">,</span> <span class="n">update</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Recursively updates a dictionary.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>original</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>The dictionary to update.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>update</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>The dictionary containing the updated values.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>The updated dictionary.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/dict_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">recursive_update</span><span class="p">(</span>
    <span class="n">original</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">update</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Recursively updates a dictionary.</span>

<span class="sd">    Args:</span>
<span class="sd">        original: The dictionary to update.</span>
<span class="sd">        update: The dictionary containing the updated values.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">update</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Dict</span><span class="p">):</span>
            <span class="n">original_value</span> <span class="o">=</span> <span class="n">original</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">original_value</span><span class="p">,</span> <span class="n">Dict</span><span class="p">):</span>
                <span class="n">original</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">recursive_update</span><span class="p">(</span><span class="n">original_value</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">original</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">original</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">original</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.dict_utils.remove_none_values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_none_values</span><span class="p">(</span><span class="n">dict_</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Removes all key-value pairs with <code>None</code> value.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>dict_</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>The dict from which the key-value pairs should be removed.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>recursive</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code>, will recursively remove <code>None</code> values in all
child dicts.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>The updated dictionary.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/dict_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_none_values</span><span class="p">(</span>
    <span class="n">dict_</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">recursive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Removes all key-value pairs with `None` value.</span>

<span class="sd">    Args:</span>
<span class="sd">        dict_: The dict from which the key-value pairs should be removed.</span>
<span class="sd">        recursive: If `True`, will recursively remove `None` values in all</span>
<span class="sd">            child dicts.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_maybe_recurse</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calls `remove_none_values` recursively if required.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: A dictionary value.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The updated dictionary value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">recursive</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">remove_none_values</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span>

    <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">_maybe_recurse</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">dict_</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.docker_utils" class="doc doc-heading">
        <code>docker_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utility functions relating to Docker.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.docker_utils.build_image" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_image</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span> <span class="n">dockerfile</span><span class="p">,</span> <span class="n">build_context_root</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dockerignore</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">extra_files</span><span class="o">=</span><span class="p">(),</span> <span class="o">**</span><span class="n">custom_build_options</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Builds a docker image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image_name</code></td>
        <td><code>str</code></td>
        <td><p>The name to use for the built docker image.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>dockerfile</code></td>
        <td><code>Union[str, List[str]]</code></td>
        <td><p>Path to a dockerfile or a list of strings representing the
Dockerfile lines/commands.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>build_context_root</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Optional path to a directory that will be sent to
the Docker daemon as build context. If left empty, the Docker build
context will be empty.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>dockerignore</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Optional path to a dockerignore file. If no value is
given, the .dockerignore in the root of the build context will be
used if it exists. Otherwise, all files inside <code>build_context_root</code>
are included in the build context.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>extra_files</code></td>
        <td><code>Sequence[Tuple[str, str]]</code></td>
        <td><p>Additional files to include in the build context. The
files should be passed as a tuple
(filepath_inside_build_context, file_content) and will overwrite
existing files in the build context if they share the same path.</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>**custom_build_options</code></td>
        <td><code>Any</code></td>
        <td><p>Additional options that will be passed
unmodified to the Docker build call when building the image. You
can use this to for example specify build args or a target stage.
See https://docker-py.readthedocs.io/en/stable/images.html#docker.models.images.ImageCollection.build
for a full list of available options.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/docker_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">build_image</span><span class="p">(</span>
    <span class="n">image_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">dockerfile</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
    <span class="n">build_context_root</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">dockerignore</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">extra_files</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(),</span>
    <span class="o">**</span><span class="n">custom_build_options</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Builds a docker image.</span>

<span class="sd">    Args:</span>
<span class="sd">        image_name: The name to use for the built docker image.</span>
<span class="sd">        dockerfile: Path to a dockerfile or a list of strings representing the</span>
<span class="sd">            Dockerfile lines/commands.</span>
<span class="sd">        build_context_root: Optional path to a directory that will be sent to</span>
<span class="sd">            the Docker daemon as build context. If left empty, the Docker build</span>
<span class="sd">            context will be empty.</span>
<span class="sd">        dockerignore: Optional path to a dockerignore file. If no value is</span>
<span class="sd">            given, the .dockerignore in the root of the build context will be</span>
<span class="sd">            used if it exists. Otherwise, all files inside `build_context_root`</span>
<span class="sd">            are included in the build context.</span>
<span class="sd">        extra_files: Additional files to include in the build context. The</span>
<span class="sd">            files should be passed as a tuple</span>
<span class="sd">            (filepath_inside_build_context, file_content) and will overwrite</span>
<span class="sd">            existing files in the build context if they share the same path.</span>
<span class="sd">        **custom_build_options: Additional options that will be passed</span>
<span class="sd">            unmodified to the Docker build call when building the image. You</span>
<span class="sd">            can use this to for example specify build args or a target stage.</span>
<span class="sd">            See https://docker-py.readthedocs.io/en/stable/images.html#docker.models.images.ImageCollection.build</span>
<span class="sd">            for a full list of available options.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dockerfile</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">dockerfile_contents</span> <span class="o">=</span> <span class="n">io_utils</span><span class="o">.</span><span class="n">read_file_contents_as_string</span><span class="p">(</span><span class="n">dockerfile</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Using Dockerfile `</span><span class="si">%s</span><span class="s2">`.&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">dockerfile</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">dockerfile_contents</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dockerfile</span><span class="p">)</span>

    <span class="n">build_context</span> <span class="o">=</span> <span class="n">_create_custom_build_context</span><span class="p">(</span>
        <span class="n">dockerfile_contents</span><span class="o">=</span><span class="n">dockerfile_contents</span><span class="p">,</span>
        <span class="n">build_context_root</span><span class="o">=</span><span class="n">build_context_root</span><span class="p">,</span>
        <span class="n">dockerignore</span><span class="o">=</span><span class="n">dockerignore</span><span class="p">,</span>
        <span class="n">extra_files</span><span class="o">=</span><span class="n">extra_files</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">build_options</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;rm&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>  <span class="c1"># don&#39;t remove intermediate containers to improve caching</span>
        <span class="s2">&quot;pull&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># always pull parent images</span>
        <span class="o">**</span><span class="n">custom_build_options</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Building Docker image `</span><span class="si">%s</span><span class="s2">`.&quot;</span><span class="p">,</span> <span class="n">image_name</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Docker build options: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">build_options</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Building the image might take a while...&quot;</span><span class="p">)</span>

    <span class="n">docker_client</span> <span class="o">=</span> <span class="n">_try_get_docker_client_from_env</span><span class="p">()</span>

    <span class="c1"># We use the client api directly here, so we can stream the logs</span>
    <span class="n">output_stream</span> <span class="o">=</span> <span class="n">docker_client</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">build</span><span class="p">(</span>
        <span class="n">fileobj</span><span class="o">=</span><span class="n">build_context</span><span class="p">,</span>
        <span class="n">custom_context</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">tag</span><span class="o">=</span><span class="n">image_name</span><span class="p">,</span>
        <span class="o">**</span><span class="n">build_options</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">_process_stream</span><span class="p">(</span><span class="n">output_stream</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Finished building Docker image `</span><span class="si">%s</span><span class="s2">`.&quot;</span><span class="p">,</span> <span class="n">image_name</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.docker_utils.check_docker" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_docker</span><span class="p">()</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks if Docker is installed and running.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p><code>True</code> if Docker is installed, <code>False</code> otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/docker_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_docker</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if Docker is installed and running.</span>

<span class="sd">    Returns:</span>
<span class="sd">        `True` if Docker is installed, `False` otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Try to ping Docker, to see if it&#39;s running</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">docker_client</span> <span class="o">=</span> <span class="n">DockerClient</span><span class="o">.</span><span class="n">from_env</span><span class="p">()</span>
        <span class="n">docker_client</span><span class="o">.</span><span class="n">ping</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Docker is not running.&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.docker_utils.get_image_digest" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_image_digest</span><span class="p">(</span><span class="n">image_name</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Gets the digest of an image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the image to get the digest for.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>Returns the repo digest for the given image if there exists exactly one.
If there are zero or multiple repo digests, returns <code>None</code>.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/docker_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_image_digest</span><span class="p">(</span><span class="n">image_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the digest of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        image_name: Name of the image to get the digest for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Returns the repo digest for the given image if there exists exactly one.</span>
<span class="sd">        If there are zero or multiple repo digests, returns `None`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">docker_client</span> <span class="o">=</span> <span class="n">_try_get_docker_client_from_env</span><span class="p">()</span>

    <span class="n">image</span> <span class="o">=</span> <span class="n">docker_client</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">image_name</span><span class="p">)</span>
    <span class="n">repo_digests</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;RepoDigests&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">repo_digests</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">repo_digests</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Found zero or more repo digests for docker image &#39;</span><span class="si">%s</span><span class="s2">&#39;: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">image_name</span><span class="p">,</span>
            <span class="n">repo_digests</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.docker_utils.is_local_image" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_local_image</span><span class="p">(</span><span class="n">image_name</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Returns whether an image was pulled from a registry or not.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the image to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p><code>True</code> if the image was pulled from a registry, <code>False</code> otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/docker_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_local_image</span><span class="p">(</span><span class="n">image_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns whether an image was pulled from a registry or not.</span>

<span class="sd">    Args:</span>
<span class="sd">        image_name: Name of the image to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        `True` if the image was pulled from a registry, `False` otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">docker_client</span> <span class="o">=</span> <span class="n">_try_get_docker_client_from_env</span><span class="p">()</span>
    <span class="n">images</span> <span class="o">=</span> <span class="n">docker_client</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">image_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">images</span><span class="p">:</span>
        <span class="c1"># An image with this name is available locally -&gt; now check whether it</span>
        <span class="c1"># was pulled from a repo or built locally (in which case the repo</span>
        <span class="c1"># digest is empty)</span>
        <span class="k">return</span> <span class="n">get_image_digest</span><span class="p">(</span><span class="n">image_name</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># no image with this name found locally</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.docker_utils.push_image" class="doc doc-heading">
<code class="highlight language-python"><span class="n">push_image</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span> <span class="n">docker_client</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Pushes an image to a container registry.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image_name</code></td>
        <td><code>str</code></td>
        <td><p>The full name (including a tag) of the image to push.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>docker_client</code></td>
        <td><code>Optional[docker.client.DockerClient]</code></td>
        <td><p>Optional Docker client to use for pushing the image. If
no client is given, a new client will be created using the default
Docker environment.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The Docker repository digest of the pushed image.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If fetching the repository digest of the image failed.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/docker_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">push_image</span><span class="p">(</span>
    <span class="n">image_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">docker_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DockerClient</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Pushes an image to a container registry.</span>

<span class="sd">    Args:</span>
<span class="sd">        image_name: The full name (including a tag) of the image to push.</span>
<span class="sd">        docker_client: Optional Docker client to use for pushing the image. If</span>
<span class="sd">            no client is given, a new client will be created using the default</span>
<span class="sd">            Docker environment.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The Docker repository digest of the pushed image.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If fetching the repository digest of the image failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Pushing Docker image `</span><span class="si">%s</span><span class="s2">`.&quot;</span><span class="p">,</span> <span class="n">image_name</span><span class="p">)</span>
    <span class="n">docker_client</span> <span class="o">=</span> <span class="n">docker_client</span> <span class="ow">or</span> <span class="n">_try_get_docker_client_from_env</span><span class="p">()</span>
    <span class="n">output_stream</span> <span class="o">=</span> <span class="n">docker_client</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">aux_info</span> <span class="o">=</span> <span class="n">_process_stream</span><span class="p">(</span><span class="n">output_stream</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Finished pushing Docker image.&quot;</span><span class="p">)</span>

    <span class="n">image_name_without_tag</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">image_name</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">aux_info</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">repo_digest</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;Digest&quot;</span><span class="p">]</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">image_name_without_tag</span><span class="si">}</span><span class="s2">@</span><span class="si">{</span><span class="n">repo_digest</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to find repo digest after pushing image </span><span class="si">{</span><span class="n">image_name</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.docker_utils.tag_image" class="doc doc-heading">
<code class="highlight language-python"><span class="n">tag_image</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Tags an image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the image to tag.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>target</code></td>
        <td><code>str</code></td>
        <td><p>The full target name including a tag.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/docker_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">tag_image</span><span class="p">(</span><span class="n">image_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tags an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        image_name: The name of the image to tag.</span>
<span class="sd">        target: The full target name including a tag.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">docker_client</span> <span class="o">=</span> <span class="n">_try_get_docker_client_from_env</span><span class="p">()</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">docker_client</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">image_name</span><span class="p">)</span>
    <span class="n">image</span><span class="o">.</span><span class="n">tag</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.downloaded_repository_context" class="doc doc-heading">
        <code>downloaded_repository_context</code>



</h3>

    <div class="doc doc-contents ">

      <p>Downloaded code repository.</p>


    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.enum_utils" class="doc doc-heading">
        <code>enum_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Util functions for enums.</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="zenml.utils.enum_utils.StrEnum" class="doc doc-heading">
        <code>
StrEnum            (<span title="str">str</span>, <span title="enum.Enum">Enum</span>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Base enum type for string enum values.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/enum_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StrEnum</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base enum type for string enum values.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the enum string value.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The enum string value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>  <span class="c1"># type: ignore</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">names</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all enum names as a list of strings.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of all enum names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">cls</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all enum values as a list of strings.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of all enum values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">cls</span><span class="p">]</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.enum_utils.StrEnum.__format__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__format__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_spec</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Default object formatter.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/enum_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__format__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_spec</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">str</span><span class="o">.</span><span class="fm">__format__</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">format_spec</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.enum_utils.StrEnum.__str__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Returns the enum string value.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The enum string value.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/enum_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the enum string value.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The enum string value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>  <span class="c1"># type: ignore</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.env_utils" class="doc doc-heading">
        <code>env_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utility functions for handling environment variables.</p>



  <div class="doc doc-children">












  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.env_utils.reconstruct_environment_variables" class="doc doc-heading">
<code class="highlight language-python"><span class="n">reconstruct_environment_variables</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Reconstruct environment variables that were split into chunks.</p>
<p>Reconstructs the environment variables with values that were split into
individual chunks because they were too large. The input environment
variables are modified in-place.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>env</code></td>
        <td><code>Optional[Dict[str, str]]</code></td>
        <td><p>Input environment variables dictionary. If not supplied, the OS
environment variables are used.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/env_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">reconstruct_environment_variables</span><span class="p">(</span>
    <span class="n">env</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reconstruct environment variables that were split into chunks.</span>

<span class="sd">    Reconstructs the environment variables with values that were split into</span>
<span class="sd">    individual chunks because they were too large. The input environment</span>
<span class="sd">    variables are modified in-place.</span>

<span class="sd">    Args:</span>
<span class="sd">        env: Input environment variables dictionary. If not supplied, the OS</span>
<span class="sd">            environment variables are used.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">env</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">)</span>

    <span class="n">chunks</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">env</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">ENV_VAR_CHUNK_SUFFIX</span><span class="p">):</span>
            <span class="k">continue</span>

        <span class="c1"># Collect all chunks of the same environment variable</span>
        <span class="n">original_key</span> <span class="o">=</span> <span class="n">key</span><span class="p">[:</span> <span class="o">-</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ENV_VAR_CHUNK_SUFFIX</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="n">chunks</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">original_key</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">chunks</span><span class="p">[</span><span class="n">original_key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="c1"># Reconstruct the environment variables from their chunks</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">chunk_keys</span> <span class="ow">in</span> <span class="n">chunks</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">chunk_keys</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">env</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">chunk_keys</span><span class="p">])</span>
        <span class="n">env</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="c1"># Remove the chunk environment variables</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">chunk_keys</span><span class="p">:</span>
            <span class="n">env</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.env_utils.split_environment_variables" class="doc doc-heading">
<code class="highlight language-python"><span class="n">split_environment_variables</span><span class="p">(</span><span class="n">size_limit</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Split long environment variables into chunks.</p>
<p>Splits the input environment variables with values that exceed the supplied
maximum length into individual components. The input environment variables
are modified in-place.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>size_limit</code></td>
        <td><code>int</code></td>
        <td><p>Maximum length of an environment variable value.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>env</code></td>
        <td><code>Optional[Dict[str, str]]</code></td>
        <td><p>Input environment variables dictionary. If not supplied, the
OS environment variables are used.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If an environment variable value is too large and requires
more than 10 chunks.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/env_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">split_environment_variables</span><span class="p">(</span>
    <span class="n">size_limit</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">env</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Split long environment variables into chunks.</span>

<span class="sd">    Splits the input environment variables with values that exceed the supplied</span>
<span class="sd">    maximum length into individual components. The input environment variables</span>
<span class="sd">    are modified in-place.</span>

<span class="sd">    Args:</span>
<span class="sd">        size_limit: Maximum length of an environment variable value.</span>
<span class="sd">        env: Input environment variables dictionary. If not supplied, the</span>
<span class="sd">            OS environment variables are used.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If an environment variable value is too large and requires</span>
<span class="sd">            more than 10 chunks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">env</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">env</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">size_limit</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="c1"># We keep the number of chunks to a maximum of 10 to avoid generating</span>
        <span class="c1"># too many environment variables chunks and also to make the</span>
        <span class="c1"># reconstruction easier to implement</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">size_limit</span> <span class="o">*</span> <span class="mi">10</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Environment variable </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> exceeds the maximum length of &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">size_limit</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">10</span><span class="si">}</span><span class="s2"> characters.&quot;</span>
            <span class="p">)</span>

        <span class="n">env</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

        <span class="c1"># Split the environment variable into chunks</span>
        <span class="n">chunks</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">value</span><span class="p">[</span><span class="n">i</span> <span class="p">:</span> <span class="n">i</span> <span class="o">+</span> <span class="n">size_limit</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">),</span> <span class="n">size_limit</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">chunks</span><span class="p">):</span>
            <span class="n">env</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}{</span><span class="n">ENV_VAR_CHUNK_SUFFIX</span><span class="si">}{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chunk</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.env_utils.substitute_env_variable_placeholders" class="doc doc-heading">
<code class="highlight language-python"><span class="n">substitute_env_variable_placeholders</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">raise_when_missing</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Substitute environment variable placeholders in an object.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>value</code></td>
        <td><code>~V</code></td>
        <td><p>The object in which to substitute the placeholders.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>raise_when_missing</code></td>
        <td><code>bool</code></td>
        <td><p>If True, an exception will be raised when an
environment variable is missing. Otherwise, a warning will be logged
instead.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>~V</code></td>
      <td><p>The object with placeholders substituted.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/env_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">substitute_env_variable_placeholders</span><span class="p">(</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">V</span><span class="p">,</span> <span class="n">raise_when_missing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">V</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Substitute environment variable placeholders in an object.</span>

<span class="sd">    Args:</span>
<span class="sd">        value: The object in which to substitute the placeholders.</span>
<span class="sd">        raise_when_missing: If True, an exception will be raised when an</span>
<span class="sd">            environment variable is missing. Otherwise, a warning will be logged</span>
<span class="sd">            instead.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The object with placeholders substituted.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_replace_with_env_variable_value</span><span class="p">(</span><span class="n">match</span><span class="p">:</span> <span class="n">Match</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">raise_when_missing</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
                    <span class="s2">&quot;Unable to substitute environment variable placeholder &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; because the environment variable is not set.&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Unable to substitute environment variable placeholder </span><span class="si">%s</span><span class="s2"> &quot;</span>
                    <span class="s2">&quot;because the environment variable is not set, using an &quot;</span>
                    <span class="s2">&quot;empty string instead.&quot;</span><span class="p">,</span>
                    <span class="n">key</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="s2">&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_substitution_func</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ENV_VARIABLE_PLACEHOLDER_PATTERN</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
            <span class="n">_replace_with_env_variable_value</span><span class="p">,</span> <span class="n">v</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">string_utils</span><span class="o">.</span><span class="n">substitute_string</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">substitution_func</span><span class="o">=</span><span class="n">_substitution_func</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.filesync_model" class="doc doc-heading">
        <code>filesync_model</code>



</h3>

    <div class="doc doc-contents ">

      <p>Filesync utils for ZenML.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="zenml.utils.filesync_model.FileSyncModel" class="doc doc-heading">
        <code>
FileSyncModel            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Pydantic model synchronized with a configuration file.</p>
<p>Use this class as a base Pydantic model that is automatically synchronized
with a configuration file on disk.</p>
<p>This class overrides the <strong>setattr</strong> and <strong>getattr</strong> magic methods to
ensure that the FileSyncModel instance acts as an in-memory cache of the
information stored in the associated configuration file.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/filesync_model.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">FileSyncModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Pydantic model synchronized with a configuration file.</span>

<span class="sd">    Use this class as a base Pydantic model that is automatically synchronized</span>
<span class="sd">    with a configuration file on disk.</span>

<span class="sd">    This class overrides the __setattr__ and __getattr__ magic methods to</span>
<span class="sd">    ensure that the FileSyncModel instance acts as an in-memory cache of the</span>
<span class="sd">    information stored in the associated configuration file.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_config_file</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">_config_file_timestamp</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;wrap&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">config_validator</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="n">handler</span><span class="p">:</span> <span class="n">ValidatorFunctionWrapHandler</span><span class="p">,</span>
        <span class="n">info</span><span class="p">:</span> <span class="n">ValidationInfo</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FileSyncModel&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wrap model validator to infer the config_file during initialization.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: The raw data that is provided before the validation.</span>
<span class="sd">            handler: The actual validation function pydantic would use for the</span>
<span class="sd">                built-in validation function.</span>
<span class="sd">            info: The context information during the execution of this</span>
<span class="sd">                validation function.</span>

<span class="sd">        Returns:</span>
<span class="sd">            the actual instance after the validation</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValidationError: if you try to validate through a JSON string. You</span>
<span class="sd">                need to provide a config_file path when you create a</span>
<span class="sd">                FileSyncModel.</span>
<span class="sd">            AssertionError: if the raw input does not include a config_file</span>
<span class="sd">                path for the configuration file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Disable json validation</span>
        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span>
                <span class="s2">&quot;You can not instantiate filesync models using the JSON mode.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="c1"># Assert that the config file is defined</span>
            <span class="k">assert</span> <span class="p">(</span>
                <span class="s2">&quot;config_file&quot;</span> <span class="ow">in</span> <span class="n">data</span>
            <span class="p">),</span> <span class="s2">&quot;You have to provide a path for the configuration file.&quot;</span>

            <span class="n">config_file</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;config_file&quot;</span><span class="p">)</span>

            <span class="c1"># Load the current values and update with new values</span>
            <span class="n">config_dict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">fileio</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">config_file</span><span class="p">):</span>
                <span class="n">config_dict</span> <span class="o">=</span> <span class="n">yaml_utils</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
            <span class="n">config_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

            <span class="c1"># Execute the regular validation</span>
            <span class="n">model</span> <span class="o">=</span> <span class="n">handler</span><span class="p">(</span><span class="n">config_dict</span><span class="p">)</span>

            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span>

            <span class="c1"># Assign the private attribute and save the config</span>
            <span class="n">model</span><span class="o">.</span><span class="n">_config_file</span> <span class="o">=</span> <span class="n">config_file</span>
            <span class="n">model</span><span class="o">.</span><span class="n">write_config</span><span class="p">()</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># If the raw value is not a dict, apply proper validation.</span>
            <span class="n">model</span> <span class="o">=</span> <span class="n">handler</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">model</span>

    <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets an attribute on the model and persists it in the configuration file.</span>

<span class="sd">        Args:</span>
<span class="sd">            key: attribute name.</span>
<span class="sd">            value: attribute value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FileSyncModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_config</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets an attribute value for a specific key.</span>

<span class="sd">        Args:</span>
<span class="sd">            key: attribute name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            attribute value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_config</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">FileSyncModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">write_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Writes the model to the configuration file.&quot;&quot;&quot;</span>
        <span class="n">yaml_utils</span><span class="o">.</span><span class="n">write_yaml</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config_file_timestamp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config_file</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">load_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Loads the model from the configuration file on disk.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fileio</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config_file</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="c1"># don&#39;t reload the configuration if the file hasn&#39;t</span>
        <span class="c1"># been updated since the last load</span>
        <span class="n">file_timestamp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config_file</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">file_timestamp</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config_file_timestamp</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config_file_timestamp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reloading configuration file </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_config_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># refresh the model from the configuration file values</span>
        <span class="n">config_dict</span> <span class="o">=</span> <span class="n">yaml_utils</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config_file</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">config_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">FileSyncModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_config_file_timestamp</span> <span class="o">=</span> <span class="n">file_timestamp</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">
























  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.filesync_model.FileSyncModel.__getattribute__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Gets an attribute value for a specific key.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>key</code></td>
        <td><code>str</code></td>
        <td><p>attribute name.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>attribute value.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/filesync_model.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets an attribute value for a specific key.</span>

<span class="sd">    Args:</span>
<span class="sd">        key: attribute name.</span>

<span class="sd">    Returns:</span>
<span class="sd">        attribute value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_config</span><span class="p">()</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">FileSyncModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.filesync_model.FileSyncModel.__setattr__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Sets an attribute on the model and persists it in the configuration file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>key</code></td>
        <td><code>str</code></td>
        <td><p>attribute name.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>value</code></td>
        <td><code>Any</code></td>
        <td><p>attribute value.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/filesync_model.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets an attribute on the model and persists it in the configuration file.</span>

<span class="sd">    Args:</span>
<span class="sd">        key: attribute name.</span>
<span class="sd">        value: attribute value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">FileSyncModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">):</span>
        <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">write_config</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.filesync_model.FileSyncModel.config_validator" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config_validator</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Wrap model validator to infer the config_file during initialization.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>Any</code></td>
        <td><p>The raw data that is provided before the validation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>handler</code></td>
        <td><code>ValidatorFunctionWrapHandler</code></td>
        <td><p>The actual validation function pydantic would use for the
built-in validation function.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>info</code></td>
        <td><code>ValidationInfo</code></td>
        <td><p>The context information during the execution of this
validation function.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>FileSyncModel</code></td>
      <td><p>the actual instance after the validation</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValidationError</code></td>
        <td><p>if you try to validate through a JSON string. You
need to provide a config_file path when you create a
FileSyncModel.</p></td>
      </tr>
      <tr>
        <td><code>AssertionError</code></td>
        <td><p>if the raw input does not include a config_file
path for the configuration file.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/filesync_model.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;wrap&quot;</span><span class="p">)</span>
<span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">config_validator</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">handler</span><span class="p">:</span> <span class="n">ValidatorFunctionWrapHandler</span><span class="p">,</span>
    <span class="n">info</span><span class="p">:</span> <span class="n">ValidationInfo</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FileSyncModel&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wrap model validator to infer the config_file during initialization.</span>

<span class="sd">    Args:</span>
<span class="sd">        data: The raw data that is provided before the validation.</span>
<span class="sd">        handler: The actual validation function pydantic would use for the</span>
<span class="sd">            built-in validation function.</span>
<span class="sd">        info: The context information during the execution of this</span>
<span class="sd">            validation function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        the actual instance after the validation</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValidationError: if you try to validate through a JSON string. You</span>
<span class="sd">            need to provide a config_file path when you create a</span>
<span class="sd">            FileSyncModel.</span>
<span class="sd">        AssertionError: if the raw input does not include a config_file</span>
<span class="sd">            path for the configuration file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Disable json validation</span>
    <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="s2">&quot;You can not instantiate filesync models using the JSON mode.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="c1"># Assert that the config file is defined</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="s2">&quot;config_file&quot;</span> <span class="ow">in</span> <span class="n">data</span>
        <span class="p">),</span> <span class="s2">&quot;You have to provide a path for the configuration file.&quot;</span>

        <span class="n">config_file</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;config_file&quot;</span><span class="p">)</span>

        <span class="c1"># Load the current values and update with new values</span>
        <span class="n">config_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">fileio</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">config_file</span><span class="p">):</span>
            <span class="n">config_dict</span> <span class="o">=</span> <span class="n">yaml_utils</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
        <span class="n">config_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># Execute the regular validation</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">handler</span><span class="p">(</span><span class="n">config_dict</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span>

        <span class="c1"># Assign the private attribute and save the config</span>
        <span class="n">model</span><span class="o">.</span><span class="n">_config_file</span> <span class="o">=</span> <span class="n">config_file</span>
        <span class="n">model</span><span class="o">.</span><span class="n">write_config</span><span class="p">()</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># If the raw value is not a dict, apply proper validation.</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">handler</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">model</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.filesync_model.FileSyncModel.load_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Loads the model from the configuration file on disk.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/filesync_model.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">load_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Loads the model from the configuration file on disk.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">fileio</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config_file</span><span class="p">):</span>
        <span class="k">return</span>

    <span class="c1"># don&#39;t reload the configuration if the file hasn&#39;t</span>
    <span class="c1"># been updated since the last load</span>
    <span class="n">file_timestamp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config_file</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">file_timestamp</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config_file_timestamp</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config_file_timestamp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reloading configuration file </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_config_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># refresh the model from the configuration file values</span>
    <span class="n">config_dict</span> <span class="o">=</span> <span class="n">yaml_utils</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config_file</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">config_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FileSyncModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_config_file_timestamp</span> <span class="o">=</span> <span class="n">file_timestamp</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.filesync_model.FileSyncModel.model_post_init" class="doc doc-heading">
<code class="highlight language-python"><span class="n">model_post_init</span><span class="p">(</span><span class="o">/</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>This function is meant to behave like a BaseModel method to initialise private attributes.</p>
<p>It takes context as an argument since that's what pydantic-core passes when calling it.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>self</code></td>
        <td><code>BaseModel</code></td>
        <td><p>The BaseModel instance.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>context</code></td>
        <td><code>Any</code></td>
        <td><p>The context.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/filesync_model.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">init_private_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This function is meant to behave like a BaseModel method to initialise private attributes.</span>

<span class="sd">    It takes context as an argument since that&#39;s what pydantic-core passes when calling it.</span>

<span class="sd">    Args:</span>
<span class="sd">        self: The BaseModel instance.</span>
<span class="sd">        context: The context.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;__pydantic_private__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pydantic_private</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">private_attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__private_attributes__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">default</span> <span class="o">=</span> <span class="n">private_attr</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">PydanticUndefined</span><span class="p">:</span>
                <span class="n">pydantic_private</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">default</span>
        <span class="n">object_setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;__pydantic_private__&#39;</span><span class="p">,</span> <span class="n">pydantic_private</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.filesync_model.FileSyncModel.write_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Writes the model to the configuration file.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/filesync_model.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">write_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Writes the model to the configuration file.&quot;&quot;&quot;</span>
    <span class="n">yaml_utils</span><span class="o">.</span><span class="n">write_yaml</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config_file</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_config_file_timestamp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config_file</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.function_utils" class="doc doc-heading">
        <code>function_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utility functions for python functions.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.function_utils.create_cli_wrapped_script" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_cli_wrapped_script</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">flavor</span><span class="o">=</span><span class="s1">&#39;accelerate&#39;</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Create a script with the CLI-wrapped function.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>func</code></td>
        <td><code>~F</code></td>
        <td><p>The function to use.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>flavor</code></td>
        <td><code>str</code></td>
        <td><p>The flavor to use.</p></td>
        <td><code>&#39;accelerate&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Yields:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Iterator[Tuple[pathlib.Path, pathlib.Path]]</code></td>
      <td><p>The paths of the script and the output.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the function is not defined in a module.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/function_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@contextmanager</span>
<span class="k">def</span> <span class="nf">create_cli_wrapped_script</span><span class="p">(</span>
    <span class="n">func</span><span class="p">:</span> <span class="n">F</span><span class="p">,</span> <span class="n">flavor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;accelerate&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="n">Path</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a script with the CLI-wrapped function.</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The function to use.</span>
<span class="sd">        flavor: The flavor to use.</span>

<span class="sd">    Yields:</span>
<span class="sd">        The paths of the script and the output.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the function is not defined in a module.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">random_name</span> <span class="o">=</span> <span class="n">random_str</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">script_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">random_name</span> <span class="o">+</span> <span class="s2">&quot;.py&quot;</span><span class="p">)</span>
        <span class="n">output_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">random_name</span> <span class="o">+</span> <span class="s2">&quot;.out&quot;</span><span class="p">)</span>

        <span class="n">module</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmodule</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">module</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Function `</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">` must be defined in a &quot;</span>
                <span class="s2">&quot;module to be used with Accelerate.&quot;</span>
            <span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">script_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">path</span> <span class="o">:=</span> <span class="n">module</span><span class="o">.</span><span class="vm">__file__</span><span class="p">:</span>
                <span class="n">func_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
                <span class="n">relative_path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">func_path</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">)</span>
                <span class="n">relative_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">relative_path</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">clean_module_name</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">relative_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">))</span>
                <span class="n">script</span> <span class="o">=</span> <span class="n">_CLI_WRAPPED_SCRIPT_TEMPLATE_HEADER</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">func_path</span><span class="o">=</span><span class="n">func_path</span><span class="p">,</span>
                    <span class="n">func_module</span><span class="o">=</span><span class="n">clean_module_name</span><span class="p">,</span>
                    <span class="n">func_name</span><span class="o">=</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">script</span> <span class="o">+=</span> <span class="n">_CLI_WRAPPED_MAINS</span><span class="p">[</span><span class="n">flavor</span><span class="p">]</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">output_file</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">output_path</span><span class="o">.</span><span class="n">absolute</span><span class="p">())</span>
                <span class="p">)</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">script</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Cannot find module file path for function `</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">`.&quot;</span>
                <span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created script:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">script</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">yield</span> <span class="n">script_path</span><span class="p">,</span> <span class="n">output_path</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">script_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">script_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">output_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">output_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.git_utils" class="doc doc-heading">
        <code>git_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utility function to clone a Git repository.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.git_utils.clone_git_repository" class="doc doc-heading">
<code class="highlight language-python"><span class="n">clone_git_repository</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">to_path</span><span class="p">,</span> <span class="n">branch</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">commit</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Clone a Git repository.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>URL of the repository to clone.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>to_path</code></td>
        <td><code>str</code></td>
        <td><p>Path to clone the repository to.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>branch</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Branch to clone. Defaults to "main".</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>commit</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Commit to checkout. If specified, the branch argument is
ignored.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Repo</code></td>
      <td><p>The cloned repository.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If the repository could not be cloned.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/git_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">clone_git_repository</span><span class="p">(</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">to_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">branch</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">commit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Repo</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clone a Git repository.</span>

<span class="sd">    Args:</span>
<span class="sd">        url: URL of the repository to clone.</span>
<span class="sd">        to_path: Path to clone the repository to.</span>
<span class="sd">        branch: Branch to clone. Defaults to &quot;main&quot;.</span>
<span class="sd">        commit: Commit to checkout. If specified, the branch argument is</span>
<span class="sd">            ignored.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The cloned repository.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the repository could not be cloned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">to_path</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">commit</span><span class="p">:</span>
            <span class="n">repo</span> <span class="o">=</span> <span class="n">Repo</span><span class="o">.</span><span class="n">clone_from</span><span class="p">(</span>
                <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                <span class="n">to_path</span><span class="o">=</span><span class="n">to_path</span><span class="p">,</span>
                <span class="n">no_checkout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">repo</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">checkout</span><span class="p">(</span><span class="n">commit</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">repo</span> <span class="o">=</span> <span class="n">Repo</span><span class="o">.</span><span class="n">clone_from</span><span class="p">(</span>
                <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                <span class="n">to_path</span><span class="o">=</span><span class="n">to_path</span><span class="p">,</span>
                <span class="n">branch</span><span class="o">=</span><span class="n">branch</span> <span class="ow">or</span> <span class="s2">&quot;main&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">repo</span>
    <span class="k">except</span> <span class="n">GitCommandError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span> <span class="kn">from</span> <span class="nn">e</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.integration_utils" class="doc doc-heading">
        <code>integration_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Util functions for integration.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.integration_utils.parse_requirement" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_requirement</span><span class="p">(</span><span class="n">requirement</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Parse a requirement string into name and extras.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>requirement</code></td>
        <td><code>str</code></td>
        <td><p>A requirement string.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tuple[Optional[str], Optional[str]]</code></td>
      <td><p>A tuple of name and extras.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/integration_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_requirement</span><span class="p">(</span><span class="n">requirement</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse a requirement string into name and extras.</span>

<span class="sd">    Args:</span>
<span class="sd">        requirement: A requirement string.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A tuple of name and extras.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">match</span> <span class="o">:=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
        <span class="sa">r</span><span class="s2">&quot;([a-zA-Z0-9\-_]+)(?![^\[]*\s)(\[[a-zA-Z0-9\-_,]+\])?&quot;</span><span class="p">,</span> <span class="n">requirement</span>
    <span class="p">):</span>
        <span class="n">name</span><span class="p">,</span> <span class="n">extras</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="n">requirement</span> <span class="k">else</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">extras</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.io_utils" class="doc doc-heading">
        <code>io_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Various utility functions for the io module.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.io_utils.copy_dir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">copy_dir</span><span class="p">(</span><span class="n">source_dir</span><span class="p">,</span> <span class="n">destination_dir</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Copies dir from source to destination.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source_dir</code></td>
        <td><code>str</code></td>
        <td><p>Path to copy from.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>destination_dir</code></td>
        <td><code>str</code></td>
        <td><p>Path to copy to.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>overwrite</code></td>
        <td><code>bool</code></td>
        <td><p>Boolean. If false, function throws an error before overwrite.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/io_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">copy_dir</span><span class="p">(</span>
    <span class="n">source_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">destination_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Copies dir from source to destination.</span>

<span class="sd">    Args:</span>
<span class="sd">        source_dir: Path to copy from.</span>
<span class="sd">        destination_dir: Path to copy to.</span>
<span class="sd">        overwrite: Boolean. If false, function throws an error before overwrite.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">source_file</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="n">source_dir</span><span class="p">):</span>
        <span class="n">source_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_dir</span><span class="p">,</span> <span class="n">convert_to_str</span><span class="p">(</span><span class="n">source_file</span><span class="p">))</span>
        <span class="n">destination_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">destination_dir</span><span class="p">,</span> <span class="n">convert_to_str</span><span class="p">(</span><span class="n">source_file</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">isdir</span><span class="p">(</span><span class="n">source_path</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">source_path</span> <span class="o">==</span> <span class="n">destination_dir</span><span class="p">:</span>
                <span class="c1"># if the destination is a subdirectory of the source, we skip</span>
                <span class="c1"># copying it to avoid an infinite loop.</span>
                <span class="k">continue</span>
            <span class="n">copy_dir</span><span class="p">(</span><span class="n">source_path</span><span class="p">,</span> <span class="n">destination_path</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">create_dir_recursive_if_not_exists</span><span class="p">(</span>
                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">destination_path</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">copy</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">source_path</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">destination_path</span><span class="p">),</span> <span class="n">overwrite</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.io_utils.create_dir_if_not_exists" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_dir_if_not_exists</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Creates directory if it does not exist.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>dir_path</code></td>
        <td><code>str</code></td>
        <td><p>Local path in filesystem.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/io_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_dir_if_not_exists</span><span class="p">(</span><span class="n">dir_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates directory if it does not exist.</span>

<span class="sd">    Args:</span>
<span class="sd">        dir_path: Local path in filesystem.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">isdir</span><span class="p">(</span><span class="n">dir_path</span><span class="p">):</span>
        <span class="n">mkdir</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.io_utils.create_dir_recursive_if_not_exists" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_dir_recursive_if_not_exists</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Creates directory recursively if it does not exist.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>dir_path</code></td>
        <td><code>str</code></td>
        <td><p>Local path in filesystem.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/io_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_dir_recursive_if_not_exists</span><span class="p">(</span><span class="n">dir_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates directory recursively if it does not exist.</span>

<span class="sd">    Args:</span>
<span class="sd">        dir_path: Local path in filesystem.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">isdir</span><span class="p">(</span><span class="n">dir_path</span><span class="p">):</span>
        <span class="n">makedirs</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.io_utils.create_file_if_not_exists" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_file_if_not_exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">file_contents</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Creates file if it does not exist.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>file_path</code></td>
        <td><code>str</code></td>
        <td><p>Local path in filesystem.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>file_contents</code></td>
        <td><code>str</code></td>
        <td><p>Contents of file.</p></td>
        <td><code>&#39;{}&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/io_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_file_if_not_exists</span><span class="p">(</span>
    <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">file_contents</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates file if it does not exist.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_path: Local path in filesystem.</span>
<span class="sd">        file_contents: Contents of file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">full_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
        <span class="n">create_dir_recursive_if_not_exists</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">full_path</span><span class="o">.</span><span class="n">parent</span><span class="p">))</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">full_path</span><span class="p">),</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_contents</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.io_utils.find_files" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_files</span><span class="p">(</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Find files in a directory that match pattern.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>dir_path</code></td>
        <td><code>PathType</code></td>
        <td><p>The path to directory.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>pattern</code></td>
        <td><code>str</code></td>
        <td><p>pattern like *.png.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Yields:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Iterable[str]</code></td>
      <td><p>All matching filenames in the directory.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/io_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_files</span><span class="p">(</span><span class="n">dir_path</span><span class="p">:</span> <span class="s2">&quot;PathType&quot;</span><span class="p">,</span> <span class="n">pattern</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find files in a directory that match pattern.</span>

<span class="sd">    Args:</span>
<span class="sd">        dir_path: The path to directory.</span>
<span class="sd">        pattern: pattern like *.png.</span>

<span class="sd">    Yields:</span>
<span class="sd">        All matching filenames in the directory.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">walk</span><span class="p">(</span><span class="n">dir_path</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">basename</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">fnmatch</span><span class="p">(</span><span class="n">convert_to_str</span><span class="p">(</span><span class="n">basename</span><span class="p">),</span> <span class="n">pattern</span><span class="p">):</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="n">convert_to_str</span><span class="p">(</span><span class="n">root</span><span class="p">),</span> <span class="n">convert_to_str</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="k">yield</span> <span class="n">filename</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.io_utils.get_global_config_directory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_global_config_directory</span><span class="p">()</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Gets the global config directory for ZenML.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The global config directory for ZenML.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/io_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_global_config_directory</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the global config directory for ZenML.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The global config directory for ZenML.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">env_var_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="n">ENV_ZENML_CONFIG_PATH</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">env_var_path</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">env_var_path</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">click</span><span class="o">.</span><span class="n">get_app_dir</span><span class="p">(</span><span class="n">APP_NAME</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.io_utils.get_grandparent" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_grandparent</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Get grandparent of dir.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>dir_path</code></td>
        <td><code>str</code></td>
        <td><p>The path to directory.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The input paths parents parent.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If dir_path does not exist.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/io_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_grandparent</span><span class="p">(</span><span class="n">dir_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get grandparent of dir.</span>

<span class="sd">    Args:</span>
<span class="sd">        dir_path: The path to directory.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The input paths parents parent.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If dir_path does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dir_path</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Path &#39;</span><span class="si">{</span><span class="n">dir_path</span><span class="si">}</span><span class="s2">&#39; does not exist.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">stem</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.io_utils.get_parent" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_parent</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Get parent of dir.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>dir_path</code></td>
        <td><code>str</code></td>
        <td><p>The path to directory.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Parent (stem) of the dir as a string.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If dir_path does not exist.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/io_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_parent</span><span class="p">(</span><span class="n">dir_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get parent of dir.</span>

<span class="sd">    Args:</span>
<span class="sd">        dir_path: The path to directory.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Parent (stem) of the dir as a string.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If dir_path does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dir_path</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Path &#39;</span><span class="si">{</span><span class="n">dir_path</span><span class="si">}</span><span class="s2">&#39; does not exist.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">stem</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.io_utils.is_remote" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_remote</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Returns True if path exists remotely.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>path</code></td>
        <td><code>str</code></td>
        <td><p>Any path as a string.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if remote path, else False.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/io_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_remote</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns True if path exists remotely.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: Any path as a string.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if remote path, else False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">REMOTE_FS_PREFIX</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.io_utils.is_root" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_root</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Returns true if path has no parent in local filesystem.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>path</code></td>
        <td><code>str</code></td>
        <td><p>Local path in filesystem.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if root, else False.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/io_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_root</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns true if path has no parent in local filesystem.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: Local path in filesystem.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if root, else False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">==</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.io_utils.move" class="doc doc-heading">
<code class="highlight language-python"><span class="n">move</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Moves dir or file from source to destination. Can be used to rename.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>str</code></td>
        <td><p>Local path to copy from.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>destination</code></td>
        <td><code>str</code></td>
        <td><p>Local path to copy to.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>overwrite</code></td>
        <td><code>bool</code></td>
        <td><p>boolean, if false, then throws an error before overwrite.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/io_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">destination</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Moves dir or file from source to destination. Can be used to rename.</span>

<span class="sd">    Args:</span>
<span class="sd">        source: Local path to copy from.</span>
<span class="sd">        destination: Local path to copy to.</span>
<span class="sd">        overwrite: boolean, if false, then throws an error before overwrite.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rename</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.io_utils.read_file_contents_as_string" class="doc doc-heading">
<code class="highlight language-python"><span class="n">read_file_contents_as_string</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Reads contents of file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>file_path</code></td>
        <td><code>str</code></td>
        <td><p>Path to file.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Contents of file.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>If file does not exist.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/io_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">read_file_contents_as_string</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reads contents of file.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_path: Path to file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Contents of file.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: If file does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2"> does not exist!&quot;</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c1"># type: ignore[no-any-return]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.io_utils.resolve_relative_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">resolve_relative_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Takes relative path and resolves it absolutely.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>path</code></td>
        <td><code>str</code></td>
        <td><p>Local path in filesystem.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Resolved path.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/io_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">resolve_relative_path</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Takes relative path and resolves it absolutely.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: Local path in filesystem.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Resolved path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">is_remote</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">path</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">())</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.io_utils.write_file_contents_as_string" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write_file_contents_as_string</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Writes contents of file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>file_path</code></td>
        <td><code>str</code></td>
        <td><p>Path to file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>content</code></td>
        <td><code>str</code></td>
        <td><p>Contents of file.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If content is not of type str.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/io_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">write_file_contents_as_string</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Writes contents of file.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_path: Path to file.</span>
<span class="sd">        content: Contents of file.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If content is not of type str.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Content must be of type str, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">content</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.json_utils" class="doc doc-heading">
        <code>json_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Carried over version of some functions from the pydantic v1 json module.</p>
<p>Check out the latest version here:
https://github.com/pydantic/pydantic/blob/v1.10.15/pydantic/json.py</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.json_utils.decimal_encoder" class="doc doc-heading">
<code class="highlight language-python"><span class="n">decimal_encoder</span><span class="p">(</span><span class="n">dec_value</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Encodes a Decimal as int of there's no exponent, otherwise float.</p>
<p>This is useful when we use ConstrainedDecimal to represent Numeric(x,0)
where an integer (but not int typed) is used. Encoding this as a float
results in failed round-tripping between encode and parse.
Our ID type is a prime example of this.</p>
<blockquote>
<blockquote>
<blockquote>
<p>decimal_encoder(Decimal("1.0"))
1.0</p>
<p>decimal_encoder(Decimal("1"))
1</p>
</blockquote>
</blockquote>
</blockquote>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>dec_value</code></td>
        <td><code>Decimal</code></td>
        <td><p>The input Decimal value</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Union[int, float]</code></td>
      <td><p>the encoded result</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/json_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">decimal_encoder</span><span class="p">(</span><span class="n">dec_value</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Encodes a Decimal as int of there&#39;s no exponent, otherwise float.</span>

<span class="sd">    This is useful when we use ConstrainedDecimal to represent Numeric(x,0)</span>
<span class="sd">    where an integer (but not int typed) is used. Encoding this as a float</span>
<span class="sd">    results in failed round-tripping between encode and parse.</span>
<span class="sd">    Our ID type is a prime example of this.</span>

<span class="sd">    &gt;&gt;&gt; decimal_encoder(Decimal(&quot;1.0&quot;))</span>
<span class="sd">    1.0</span>

<span class="sd">    &gt;&gt;&gt; decimal_encoder(Decimal(&quot;1&quot;))</span>
<span class="sd">    1</span>

<span class="sd">    Args:</span>
<span class="sd">        dec_value: The input Decimal value</span>

<span class="sd">    Returns:</span>
<span class="sd">        the encoded result</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">dec_value</span><span class="o">.</span><span class="n">as_tuple</span><span class="p">()</span><span class="o">.</span><span class="n">exponent</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># type: ignore[operator]</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">dec_value</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">dec_value</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.json_utils.isoformat" class="doc doc-heading">
<code class="highlight language-python"><span class="n">isoformat</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Function to convert a datetime into iso format.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>obj</code></td>
        <td><code>Union[datetime.date, datetime.time]</code></td>
        <td><p>input datetime</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>the corresponding time in iso format.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/json_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">isoformat</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Function to convert a datetime into iso format.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj: input datetime</span>

<span class="sd">    Returns:</span>
<span class="sd">        the corresponding time in iso format.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.materializer_utils" class="doc doc-heading">
        <code>materializer_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Util functions for materializers.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.materializer_utils.select_materializer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">select_materializer</span><span class="p">(</span><span class="n">data_type</span><span class="p">,</span> <span class="n">materializer_classes</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Select a materializer for a given data type.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data_type</code></td>
        <td><code>Type[Any]</code></td>
        <td><p>The data type for which to select the materializer.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>materializer_classes</code></td>
        <td><code>Sequence[Type[BaseMaterializer]]</code></td>
        <td><p>Available materializer classes.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If no materializer can handle the given data type.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[BaseMaterializer]</code></td>
      <td><p>The first materializer that can handle the given data type.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/materializer_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">select_materializer</span><span class="p">(</span>
    <span class="n">data_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span>
    <span class="n">materializer_classes</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseMaterializer&quot;</span><span class="p">]],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseMaterializer&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Select a materializer for a given data type.</span>

<span class="sd">    Args:</span>
<span class="sd">        data_type: The data type for which to select the materializer.</span>
<span class="sd">        materializer_classes: Available materializer classes.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If no materializer can handle the given data type.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The first materializer that can handle the given data type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fallback</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseMaterializer&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">for</span> <span class="n">class_</span> <span class="ow">in</span> <span class="n">data_type</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">materializer_class</span> <span class="ow">in</span> <span class="n">materializer_classes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">class_</span> <span class="ow">in</span> <span class="n">materializer_class</span><span class="o">.</span><span class="n">ASSOCIATED_TYPES</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">materializer_class</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">fallback</span> <span class="ow">and</span> <span class="n">materializer_class</span><span class="o">.</span><span class="n">can_handle_type</span><span class="p">(</span><span class="n">class_</span><span class="p">):</span>
                <span class="n">fallback</span> <span class="o">=</span> <span class="n">materializer_class</span>

    <span class="k">if</span> <span class="n">fallback</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">fallback</span>

    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No materializer found for type </span><span class="si">{</span><span class="n">data_type</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.networking_utils" class="doc doc-heading">
        <code>networking_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utility functions for networking.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.networking_utils.find_available_port" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_available_port</span><span class="p">()</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Finds a local random unoccupied TCP port.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>int</code></td>
      <td><p>A random unoccupied TCP port.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/networking_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_available_port</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finds a local random unoccupied TCP port.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A random unoccupied TCP port.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span> <span class="k">as</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">port</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">getsockname</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.networking_utils.get_or_create_ngrok_tunnel" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_or_create_ngrok_tunnel</span><span class="p">(</span><span class="n">ngrok_token</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Get or create an ngrok tunnel at the given port.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ngrok_token</code></td>
        <td><code>str</code></td>
        <td><p>The ngrok auth token.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>port</code></td>
        <td><code>int</code></td>
        <td><p>The port to tunnel.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The public URL of the ngrok tunnel.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ImportError</code></td>
        <td><p>If the <code>pyngrok</code> package is not installed.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/networking_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_or_create_ngrok_tunnel</span><span class="p">(</span><span class="n">ngrok_token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get or create an ngrok tunnel at the given port.</span>

<span class="sd">    Args:</span>
<span class="sd">        ngrok_token: The ngrok auth token.</span>
<span class="sd">        port: The port to tunnel.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The public URL of the ngrok tunnel.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ImportError: If the `pyngrok` package is not installed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">pyngrok</span> <span class="kn">import</span> <span class="n">ngrok</span> <span class="k">as</span> <span class="n">ngrok_client</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="s2">&quot;The `pyngrok` package is required to create ngrok tunnels. &quot;</span>
            <span class="s2">&quot;Please install it by running `pip install pyngrok`.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Check if ngrok is already tunneling the port</span>
    <span class="n">tunnels</span> <span class="o">=</span> <span class="n">ngrok_client</span><span class="o">.</span><span class="n">get_tunnels</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">tunnel</span> <span class="ow">in</span> <span class="n">tunnels</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">tunnel</span><span class="o">.</span><span class="n">config</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tunnel</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">tunnel_protocol</span> <span class="o">=</span> <span class="n">tunnel</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;proto&quot;</span><span class="p">)</span>
            <span class="n">tunnel_port</span> <span class="o">=</span> <span class="n">tunnel</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;addr&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">tunnel_protocol</span> <span class="o">==</span> <span class="s2">&quot;http&quot;</span> <span class="ow">and</span> <span class="n">tunnel_port</span> <span class="o">==</span> <span class="n">port</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">tunnel</span><span class="o">.</span><span class="n">public_url</span><span class="p">)</span>

    <span class="c1"># Create new tunnel</span>
    <span class="n">ngrok_client</span><span class="o">.</span><span class="n">set_auth_token</span><span class="p">(</span><span class="n">ngrok_token</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ngrok_client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">port</span><span class="p">)</span><span class="o">.</span><span class="n">public_url</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.networking_utils.port_available" class="doc doc-heading">
<code class="highlight language-python"><span class="n">port_available</span><span class="p">(</span><span class="n">port</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks if a local port is available.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>port</code></td>
        <td><code>int</code></td>
        <td><p>TCP port number</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>address</code></td>
        <td><code>str</code></td>
        <td><p>IP address on the local machine</p></td>
        <td><code>&#39;127.0.0.1&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if the port is available, otherwise False</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/networking_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">port_available</span><span class="p">(</span><span class="n">port</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">address</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if a local port is available.</span>

<span class="sd">    Args:</span>
<span class="sd">        port: TCP port number</span>
<span class="sd">        address: IP address on the local machine</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the port is available, otherwise False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span> <span class="k">as</span> <span class="n">s</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_REUSEADDR</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">socket</span><span class="p">,</span> <span class="s2">&quot;SO_REUSEPORT&quot;</span><span class="p">):</span>
                <span class="n">s</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_REUSEPORT</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># The SO_REUSEPORT socket option is not supported on Windows.</span>
                <span class="c1"># This if clause exists just for mypy to not complain about</span>
                <span class="c1"># missing code paths.</span>
                <span class="k">pass</span>
            <span class="n">s</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="n">address</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Port </span><span class="si">%d</span><span class="s2"> unavailable on </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.networking_utils.port_is_open" class="doc doc-heading">
<code class="highlight language-python"><span class="n">port_is_open</span><span class="p">(</span><span class="n">hostname</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Check if a TCP port is open on a remote host.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>hostname</code></td>
        <td><code>str</code></td>
        <td><p>hostname of the remote machine</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>port</code></td>
        <td><code>int</code></td>
        <td><p>TCP port number</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if the port is open, False otherwise</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/networking_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">port_is_open</span><span class="p">(</span><span class="n">hostname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if a TCP port is open on a remote host.</span>

<span class="sd">    Args:</span>
<span class="sd">        hostname: hostname of the remote machine</span>
<span class="sd">        port: TCP port number</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the port is open, False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span> <span class="k">as</span> <span class="n">sock</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">connect_ex</span><span class="p">((</span><span class="n">hostname</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Error checking TCP port </span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2"> on host </span><span class="si">{</span><span class="n">hostname</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.networking_utils.replace_internal_hostname_with_localhost" class="doc doc-heading">
<code class="highlight language-python"><span class="n">replace_internal_hostname_with_localhost</span><span class="p">(</span><span class="n">hostname</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Replaces an internal Docker or K3D hostname with localhost.</p>
<p>Localhost URLs that are directly accessible on the host machine are not
accessible from within a Docker or K3D container running on that same
machine, but there are special hostnames featured by both Docker
(<code>host.docker.internal</code>) and K3D (<code>host.k3d.internal</code>) that can be used to
access host services from within the containers.</p>
<p>Use this method to replace one of these special hostnames with localhost
if used outside a container or in a container where special hostnames are
not available.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>hostname</code></td>
        <td><code>str</code></td>
        <td><p>The hostname to replace.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The original or replaced hostname.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/networking_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">replace_internal_hostname_with_localhost</span><span class="p">(</span><span class="n">hostname</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Replaces an internal Docker or K3D hostname with localhost.</span>

<span class="sd">    Localhost URLs that are directly accessible on the host machine are not</span>
<span class="sd">    accessible from within a Docker or K3D container running on that same</span>
<span class="sd">    machine, but there are special hostnames featured by both Docker</span>
<span class="sd">    (`host.docker.internal`) and K3D (`host.k3d.internal`) that can be used to</span>
<span class="sd">    access host services from within the containers.</span>

<span class="sd">    Use this method to replace one of these special hostnames with localhost</span>
<span class="sd">    if used outside a container or in a container where special hostnames are</span>
<span class="sd">    not available.</span>

<span class="sd">    Args:</span>
<span class="sd">        hostname: The hostname to replace.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The original or replaced hostname.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">hostname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;host.docker.internal&quot;</span><span class="p">,</span> <span class="s2">&quot;host.k3d.internal&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">hostname</span>

    <span class="k">if</span> <span class="n">Environment</span><span class="o">.</span><span class="n">in_container</span><span class="p">():</span>
        <span class="c1"># Try to resolve one of the special hostnames to see if it is available</span>
        <span class="c1"># inside the container and use that if it is.</span>
        <span class="k">for</span> <span class="n">internal_hostname</span> <span class="ow">in</span> <span class="p">(</span>
            <span class="s2">&quot;host.docker.internal&quot;</span><span class="p">,</span>
            <span class="s2">&quot;host.k3d.internal&quot;</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">socket</span><span class="o">.</span><span class="n">gethostbyname</span><span class="p">(</span><span class="n">internal_hostname</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">internal_hostname</span> <span class="o">!=</span> <span class="n">hostname</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Replacing internal hostname </span><span class="si">{</span><span class="n">hostname</span><span class="si">}</span><span class="s2"> with &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">internal_hostname</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="k">return</span> <span class="n">internal_hostname</span>
            <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">gaierror</span><span class="p">:</span>
                <span class="k">continue</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Replacing internal hostname </span><span class="si">{</span><span class="n">hostname</span><span class="si">}</span><span class="s2"> with localhost.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="s2">&quot;127.0.0.1&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.networking_utils.replace_localhost_with_internal_hostname" class="doc doc-heading">
<code class="highlight language-python"><span class="n">replace_localhost_with_internal_hostname</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Replaces the localhost with an internal Docker or K3D hostname in a given URL.</p>
<p>Localhost URLs that are directly accessible on the host machine are not
accessible from within a Docker or K3D container running on that same
machine, but there are special hostnames featured by both Docker
(<code>host.docker.internal</code>) and K3D (<code>host.k3d.internal</code>) that can be used to
access host services from within the containers.</p>
<p>Use this method to attempt to replace <code>localhost</code> in a URL with one of these
special hostnames, if they are available inside a container.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The URL to update.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The updated URL.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/networking_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">replace_localhost_with_internal_hostname</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Replaces the localhost with an internal Docker or K3D hostname in a given URL.</span>

<span class="sd">    Localhost URLs that are directly accessible on the host machine are not</span>
<span class="sd">    accessible from within a Docker or K3D container running on that same</span>
<span class="sd">    machine, but there are special hostnames featured by both Docker</span>
<span class="sd">    (`host.docker.internal`) and K3D (`host.k3d.internal`) that can be used to</span>
<span class="sd">    access host services from within the containers.</span>

<span class="sd">    Use this method to attempt to replace `localhost` in a URL with one of these</span>
<span class="sd">    special hostnames, if they are available inside a container.</span>

<span class="sd">    Args:</span>
<span class="sd">        url: The URL to update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated URL.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">Environment</span><span class="o">.</span><span class="n">in_container</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">url</span>

    <span class="n">parsed_url</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">hostname</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">internal_hostname</span> <span class="ow">in</span> <span class="p">(</span>
            <span class="s2">&quot;host.docker.internal&quot;</span><span class="p">,</span>
            <span class="s2">&quot;host.k3d.internal&quot;</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">socket</span><span class="o">.</span><span class="n">gethostbyname</span><span class="p">(</span><span class="n">internal_hostname</span><span class="p">)</span>
                <span class="n">parsed_url</span> <span class="o">=</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">_replace</span><span class="p">(</span>
                    <span class="n">netloc</span><span class="o">=</span><span class="n">parsed_url</span><span class="o">.</span><span class="n">netloc</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                        <span class="n">parsed_url</span><span class="o">.</span><span class="n">hostname</span><span class="p">,</span>
                        <span class="n">internal_hostname</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Replacing localhost with </span><span class="si">{</span><span class="n">internal_hostname</span><span class="si">}</span><span class="s2"> in URL: &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">geturl</span><span class="p">()</span>

            <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">gaierror</span><span class="p">:</span>
                <span class="k">continue</span>

    <span class="k">return</span> <span class="n">url</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.networking_utils.scan_for_available_port" class="doc doc-heading">
<code class="highlight language-python"><span class="n">scan_for_available_port</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">8000</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">65535</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Scan the local network for an available port in the given range.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>start</code></td>
        <td><code>int</code></td>
        <td><p>the beginning of the port range value to scan</p></td>
        <td><code>8000</code></td>
      </tr>
      <tr>
        <td><code>stop</code></td>
        <td><code>int</code></td>
        <td><p>the (inclusive) end of the port range value to scan</p></td>
        <td><code>65535</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[int]</code></td>
      <td><p>The first available port in the given range, or None if no available
port is found.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/networking_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">scan_for_available_port</span><span class="p">(</span>
    <span class="n">start</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">SCAN_PORT_RANGE</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">stop</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">SCAN_PORT_RANGE</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Scan the local network for an available port in the given range.</span>

<span class="sd">    Args:</span>
<span class="sd">        start: the beginning of the port range value to scan</span>
<span class="sd">        stop: the (inclusive) end of the port range value to scan</span>

<span class="sd">    Returns:</span>
<span class="sd">        The first available port in the given range, or None if no available</span>
<span class="sd">        port is found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">port_available</span><span class="p">(</span><span class="n">port</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">port</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;No free TCP ports found in the range </span><span class="si">%d</span><span class="s2"> - </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">start</span><span class="p">,</span>
        <span class="n">stop</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.notebook_utils" class="doc doc-heading">
        <code>notebook_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Notebook utilities.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.notebook_utils.compute_cell_replacement_module_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">compute_cell_replacement_module_name</span><span class="p">(</span><span class="n">cell_code</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Compute the replacement module name for a given cell code.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>cell_code</code></td>
        <td><code>str</code></td>
        <td><p>The code of the notebook cell.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The replacement module name.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/notebook_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">compute_cell_replacement_module_name</span><span class="p">(</span><span class="n">cell_code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compute the replacement module name for a given cell code.</span>

<span class="sd">    Args:</span>
<span class="sd">        cell_code: The code of the notebook cell.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The replacement module name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">code_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">(</span><span class="n">cell_code</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>  <span class="c1"># nosec</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;extracted_notebook_code_</span><span class="si">{</span><span class="n">code_hash</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.notebook_utils.enable_notebook_code_extraction" class="doc doc-heading">
<code class="highlight language-python"><span class="n">enable_notebook_code_extraction</span><span class="p">(</span><span class="n">_obj</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Decorator to enable code extraction from notebooks.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>_obj</code></td>
        <td><code>Optional[AnyObject]</code></td>
        <td><p>The class or function for which to enable code extraction.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Union[AnyObject, Callable[[AnyObject], AnyObject]]</code></td>
      <td><p>The decorated class or function.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/notebook_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">enable_notebook_code_extraction</span><span class="p">(</span>
    <span class="n">_obj</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;AnyObject&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;AnyObject&quot;</span><span class="p">,</span> <span class="n">Callable</span><span class="p">[[</span><span class="s2">&quot;AnyObject&quot;</span><span class="p">],</span> <span class="s2">&quot;AnyObject&quot;</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to enable code extraction from notebooks.</span>

<span class="sd">    Args:</span>
<span class="sd">        _obj: The class or function for which to enable code extraction.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The decorated class or function.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">inner_decorator</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;AnyObject&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;AnyObject&quot;</span><span class="p">:</span>
        <span class="n">try_to_save_notebook_cell_code</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">if</span> <span class="n">_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">inner_decorator</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">inner_decorator</span><span class="p">(</span><span class="n">_obj</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.notebook_utils.get_active_notebook_cell_code" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_active_notebook_cell_code</span><span class="p">()</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Get the code of the currently active notebook cell.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>The code of the currently active notebook cell.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/notebook_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_active_notebook_cell_code</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the code of the currently active notebook cell.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The code of the currently active notebook cell.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cell_code</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ipython</span> <span class="o">=</span> <span class="n">get_ipython</span><span class="p">()</span>  <span class="c1"># type: ignore[name-defined]</span>
        <span class="n">cell_code</span> <span class="o">=</span> <span class="n">ipython</span><span class="o">.</span><span class="n">get_parent</span><span class="p">()[</span><span class="s2">&quot;content&quot;</span><span class="p">][</span><span class="s2">&quot;code&quot;</span><span class="p">]</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">NameError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unable to extract cell code: </span><span class="si">%s</span><span class="s2">.&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">cell_code</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.notebook_utils.is_defined_in_notebook_cell" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_defined_in_notebook_cell</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Check whether an object is defined in a notebook cell.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>obj</code></td>
        <td><code>Any</code></td>
        <td><p>The object to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Whether the object is defined in a notebook cell.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/notebook_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_defined_in_notebook_cell</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check whether an object is defined in a notebook cell.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj: The object to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Whether the object is defined in a notebook cell.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">Environment</span><span class="o">.</span><span class="n">in_notebook</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">module_name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;__module__&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">module_name</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.notebook_utils.load_notebook_cell_code" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_notebook_cell_code</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Load the notebook cell code for an object.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>obj</code></td>
        <td><code>Any</code></td>
        <td><p>The object for which to load the cell code.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[str]</code></td>
      <td><p>The notebook cell code if it was saved.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/notebook_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">load_notebook_cell_code</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load the notebook cell code for an object.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj: The object for which to load the cell code.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The notebook cell code if it was saved.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">ZENML_NOTEBOOK_CELL_CODE_ATTRIBUTE_NAME</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.notebook_utils.try_to_save_notebook_cell_code" class="doc doc-heading">
<code class="highlight language-python"><span class="n">try_to_save_notebook_cell_code</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Try to save the notebook cell code for an object.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>obj</code></td>
        <td><code>Any</code></td>
        <td><p>The object for which to save the notebook cell code.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/notebook_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">try_to_save_notebook_cell_code</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Try to save the notebook cell code for an object.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj: The object for which to save the notebook cell code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">is_defined_in_notebook_cell</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">cell_code</span> <span class="o">:=</span> <span class="n">get_active_notebook_cell_code</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span>
                <span class="n">obj</span><span class="p">,</span>
                <span class="n">ZENML_NOTEBOOK_CELL_CODE_ATTRIBUTE_NAME</span><span class="p">,</span>
                <span class="n">cell_code</span><span class="p">,</span>
            <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.notebook_utils.warn_about_notebook_cell_magic_commands" class="doc doc-heading">
<code class="highlight language-python"><span class="n">warn_about_notebook_cell_magic_commands</span><span class="p">(</span><span class="n">cell_code</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Warn about magic commands in the cell code.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>cell_code</code></td>
        <td><code>str</code></td>
        <td><p>The cell code.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/notebook_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">warn_about_notebook_cell_magic_commands</span><span class="p">(</span><span class="n">cell_code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Warn about magic commands in the cell code.</span>

<span class="sd">    Args:</span>
<span class="sd">        cell_code: The cell code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">((</span><span class="s2">&quot;%&quot;</span><span class="p">,</span> <span class="s2">&quot;!&quot;</span><span class="p">))</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">cell_code</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Some lines in your notebook cell start with a `!` or `%` &quot;</span>
            <span class="s2">&quot;character. Running a ZenML step remotely from a notebook &quot;</span>
            <span class="s2">&quot;only works if the cell only contains python code. If any &quot;</span>
            <span class="s2">&quot;of these lines contain Jupyter notebook magic commands, &quot;</span>
            <span class="s2">&quot;remove them and try again.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.package_utils" class="doc doc-heading">
        <code>package_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utility functions for the package.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.package_utils.clean_requirements" class="doc doc-heading">
<code class="highlight language-python"><span class="n">clean_requirements</span><span class="p">(</span><span class="n">requirements</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Clean requirements list from redundant requirements.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>requirements</code></td>
        <td><code>List[str]</code></td>
        <td><p>List of requirements.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[str]</code></td>
      <td><p>Cleaned list of requirements</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If input is not a list</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If any element in the list is not a string</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/package_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">clean_requirements</span><span class="p">(</span><span class="n">requirements</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clean requirements list from redundant requirements.</span>

<span class="sd">    Args:</span>
<span class="sd">        requirements: List of requirements.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Cleaned list of requirements</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If input is not a list</span>
<span class="sd">        ValueError: If any element in the list is not a string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">requirements</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Input must be a list&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">for</span> <span class="n">req</span> <span class="ow">in</span> <span class="n">requirements</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;All elements in the list must be strings&quot;</span><span class="p">)</span>

    <span class="n">cleaned</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">req</span> <span class="ow">in</span> <span class="n">requirements</span><span class="p">:</span>
        <span class="n">package</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">req</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;&gt;=&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;==&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;&lt;&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;~=&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;^=&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">package</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">cleaned</span> <span class="ow">or</span> <span class="nb">any</span><span class="p">(</span>
            <span class="n">op</span> <span class="ow">in</span> <span class="n">req</span> <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;&quot;</span><span class="p">,</span> <span class="s2">&quot;~&quot;</span><span class="p">,</span> <span class="s2">&quot;^&quot;</span><span class="p">]</span>
        <span class="p">):</span>
            <span class="n">cleaned</span><span class="p">[</span><span class="n">package</span><span class="p">]</span> <span class="o">=</span> <span class="n">req</span>
    <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">cleaned</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.package_utils.is_latest_zenml_version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_latest_zenml_version</span><span class="p">()</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks if the currently running ZenML package is on the latest version.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True in case the current running zenml code is the latest available version on PYPI, otherwise False.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>In case something goe wrong</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/package_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_latest_zenml_version</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if the currently running ZenML package is on the latest version.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True in case the current running zenml code is the latest available version on PYPI, otherwise False.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: In case something goe wrong</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">zenml</span> <span class="kn">import</span> <span class="n">__version__</span>

    <span class="c1"># Get the current version of the package</span>
    <span class="n">current_local_version</span> <span class="o">=</span> <span class="n">__version__</span>

    <span class="c1"># Get the latest version from PyPI</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://pypi.org/pypi/zenml/json&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
        <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="n">latest_published_version</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;info&quot;</span><span class="p">][</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Failed to fetch the latest version from PyPI: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Compare versions</span>
    <span class="k">if</span> <span class="n">version</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">latest_published_version</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">version</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span>
        <span class="n">current_local_version</span>
    <span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.pagination_utils" class="doc doc-heading">
        <code>pagination_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Pagination utilities.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.pagination_utils.depaginate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">depaginate</span><span class="p">(</span><span class="n">list_method</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Depaginate the results from a client or store method that returns pages.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>list_method</code></td>
        <td><code>Callable[..., zenml.models.v2.base.page.Page[~AnyResponse]]</code></td>
        <td><p>The list method to depaginate.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Arguments for the list method.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[~AnyResponse]</code></td>
      <td><p>A list of the corresponding Response Models.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/pagination_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">depaginate</span><span class="p">(</span>
    <span class="n">list_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Page</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">]],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyResponse</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Depaginate the results from a client or store method that returns pages.</span>

<span class="sd">    Args:</span>
<span class="sd">        list_method: The list method to depaginate.</span>
<span class="sd">        **kwargs: Arguments for the list method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of the corresponding Response Models.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">list_method</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">items</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">page</span><span class="o">.</span><span class="n">index</span> <span class="o">&lt;</span> <span class="n">page</span><span class="o">.</span><span class="n">total_pages</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;page&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">list_method</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">items</span> <span class="o">+=</span> <span class="nb">list</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">items</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.pipeline_docker_image_builder" class="doc doc-heading">
        <code>pipeline_docker_image_builder</code>



</h3>

    <div class="doc doc-contents ">

      <p>Implementation of Docker image builds to run ZenML pipelines.</p>



  <div class="doc doc-children">














  <div class="doc doc-object doc-class">



<h4 id="zenml.utils.pipeline_docker_image_builder.PipelineDockerImageBuilder" class="doc doc-heading">
        <code>
PipelineDockerImageBuilder        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Builds Docker images to run a ZenML pipeline.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/pipeline_docker_image_builder.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineDockerImageBuilder</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Builds Docker images to run a ZenML pipeline.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">build_docker_image</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">docker_settings</span><span class="p">:</span> <span class="s2">&quot;DockerSettings&quot;</span><span class="p">,</span>
        <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">,</span>
        <span class="n">include_files</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">download_files</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">entrypoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">extra_files</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">code_repository</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;BaseCodeRepository&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Builds (and optionally pushes) a Docker image to run a pipeline.</span>

<span class="sd">        Use the image name returned by this method whenever you need to uniquely</span>
<span class="sd">        reference the pushed image in order to pull or run it.</span>

<span class="sd">        Args:</span>
<span class="sd">            docker_settings: The settings for the image build.</span>
<span class="sd">            tag: The tag to use for the image.</span>
<span class="sd">            stack: The stack on which the pipeline will be deployed.</span>
<span class="sd">            include_files: Whether to include files in the build context.</span>
<span class="sd">            download_files: Whether to download files in the build context.</span>
<span class="sd">            entrypoint: Entrypoint to use for the final image. If left empty,</span>
<span class="sd">                no entrypoint will be included in the image.</span>
<span class="sd">            extra_files: Extra files to add to the build context. Keys are the</span>
<span class="sd">                path inside the build context, values are either the file</span>
<span class="sd">                content or a file path.</span>
<span class="sd">            code_repository: The code repository from which files will be</span>
<span class="sd">                downloaded.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tuple (image_digest, dockerfile, requirements):</span>
<span class="sd">            - The Docker image repo digest or local name, depending on whether</span>
<span class="sd">            the image was pushed or is just stored locally.</span>
<span class="sd">            - Dockerfile will contain the contents of the Dockerfile used to</span>
<span class="sd">            build the image.</span>
<span class="sd">            - Requirements is a string with a single pip requirement per line.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If the stack does not contain an image builder.</span>
<span class="sd">            ValueError: If no Dockerfile and/or custom parent image is</span>
<span class="sd">                specified and the Docker configuration doesn&#39;t require an</span>
<span class="sd">                image build.</span>
<span class="sd">            ValueError: If the specified Dockerfile does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">requirements</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">dockerfile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">skip_build</span><span class="p">:</span>
            <span class="k">assert</span> <span class="p">(</span>
                <span class="n">docker_settings</span><span class="o">.</span><span class="n">parent_image</span>
            <span class="p">)</span>  <span class="c1"># checked via validator already</span>

            <span class="c1"># Should we tag this here and push it to the container registry of</span>
            <span class="c1"># the stack to make sure it&#39;s always accessible when running the</span>
            <span class="c1"># pipeline?</span>
            <span class="k">return</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">parent_image</span><span class="p">,</span> <span class="n">dockerfile</span><span class="p">,</span> <span class="n">requirements</span>

        <span class="k">if</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">dockerfile</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span>
            <span class="n">docker_settings</span><span class="o">.</span><span class="n">dockerfile</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Dockerfile at path &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">dockerfile</span><span class="p">)</span><span class="si">}</span><span class="s2"> not found.&quot;</span>
            <span class="p">)</span>

        <span class="n">stack</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
        <span class="n">image_builder</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">image_builder</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">image_builder</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;Unable to build Docker images without an image builder in the &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;stack `</span><span class="si">{</span><span class="n">stack</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">`.&quot;</span>
            <span class="p">)</span>

        <span class="n">container_registry</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">container_registry</span>

        <span class="n">build_context_class</span> <span class="o">=</span> <span class="n">image_builder</span><span class="o">.</span><span class="n">build_context_class</span>
        <span class="n">target_image_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_target_image_name</span><span class="p">(</span>
            <span class="n">docker_settings</span><span class="o">=</span><span class="n">docker_settings</span><span class="p">,</span>
            <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">,</span>
            <span class="n">container_registry</span><span class="o">=</span><span class="n">container_registry</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">requires_zenml_build</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">docker_settings</span><span class="o">.</span><span class="n">requirements</span><span class="p">,</span>
                <span class="n">docker_settings</span><span class="o">.</span><span class="n">required_integrations</span><span class="p">,</span>
                <span class="n">docker_settings</span><span class="o">.</span><span class="n">required_hub_plugins</span><span class="p">,</span>
                <span class="n">docker_settings</span><span class="o">.</span><span class="n">replicate_local_python_environment</span><span class="p">,</span>
                <span class="n">docker_settings</span><span class="o">.</span><span class="n">install_stack_requirements</span><span class="p">,</span>
                <span class="n">docker_settings</span><span class="o">.</span><span class="n">apt_packages</span><span class="p">,</span>
                <span class="n">docker_settings</span><span class="o">.</span><span class="n">environment</span><span class="p">,</span>
                <span class="n">include_files</span><span class="p">,</span>
                <span class="n">download_files</span><span class="p">,</span>
                <span class="n">entrypoint</span><span class="p">,</span>
                <span class="n">extra_files</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># Fallback to the value defined on the stack component if the</span>
        <span class="c1"># pipeline configuration doesn&#39;t have a configured value</span>
        <span class="n">parent_image</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">docker_settings</span><span class="o">.</span><span class="n">parent_image</span> <span class="ow">or</span> <span class="n">DEFAULT_DOCKER_PARENT_IMAGE</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">dockerfile</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">parent_image</span> <span class="o">!=</span> <span class="n">DEFAULT_DOCKER_PARENT_IMAGE</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;You&#39;ve specified both a Dockerfile and a custom parent &quot;</span>
                    <span class="s2">&quot;image, ignoring the parent image.&quot;</span>
                <span class="p">)</span>

            <span class="n">push</span> <span class="o">=</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="n">image_builder</span><span class="o">.</span><span class="n">is_building_locally</span>
                <span class="ow">or</span> <span class="ow">not</span> <span class="n">requires_zenml_build</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">requires_zenml_build</span><span class="p">:</span>
                <span class="c1"># We will build an additional image on top of this one later</span>
                <span class="c1"># to include user files and/or install requirements. The image</span>
                <span class="c1"># we build now will be used as the parent for the next build.</span>
                <span class="n">repository</span> <span class="o">=</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">target_repository</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">repository</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">container_registry</span><span class="p">:</span>
                        <span class="n">repository</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="n">container_registry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">default_repository</span>
                        <span class="p">)</span>

                <span class="n">repository</span> <span class="o">=</span> <span class="n">repository</span> <span class="ow">or</span> <span class="n">DEFAULT_ZENML_DOCKER_REPOSITORY</span>
                <span class="n">user_image_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">repository</span><span class="si">}</span><span class="s2">:&quot;</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">-intermediate-build&quot;</span>
                <span class="k">if</span> <span class="n">push</span> <span class="ow">and</span> <span class="n">container_registry</span><span class="p">:</span>
                    <span class="n">user_image_name</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">container_registry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">uri</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">user_image_name</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>

                <span class="n">parent_image</span> <span class="o">=</span> <span class="n">user_image_name</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># The image we&#39;ll build from the custom Dockerfile will be</span>
                <span class="c1"># used directly, so we tag it with the requested target name.</span>
                <span class="n">user_image_name</span> <span class="o">=</span> <span class="n">target_image_name</span>

            <span class="n">build_config</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">docker_settings</span><span class="o">.</span><span class="n">parent_image_build_config</span>
                <span class="ow">or</span> <span class="n">DockerBuildConfig</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="n">build_context</span> <span class="o">=</span> <span class="n">build_context_class</span><span class="p">(</span>
                <span class="n">root</span><span class="o">=</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">build_context_root</span><span class="p">,</span>
                <span class="n">dockerignore_file</span><span class="o">=</span><span class="n">build_config</span><span class="o">.</span><span class="n">dockerignore</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">build_context</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span>
                <span class="n">source</span><span class="o">=</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">dockerfile</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="s2">&quot;Dockerfile&quot;</span>
            <span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Building Docker image `</span><span class="si">%s</span><span class="s2">`.&quot;</span><span class="p">,</span> <span class="n">user_image_name</span><span class="p">)</span>
            <span class="n">image_name_or_digest</span> <span class="o">=</span> <span class="n">image_builder</span><span class="o">.</span><span class="n">build</span><span class="p">(</span>
                <span class="n">image_name</span><span class="o">=</span><span class="n">user_image_name</span><span class="p">,</span>
                <span class="n">build_context</span><span class="o">=</span><span class="n">build_context</span><span class="p">,</span>
                <span class="n">docker_build_options</span><span class="o">=</span><span class="n">build_config</span><span class="o">.</span><span class="n">build_options</span>
                <span class="ow">or</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">build_options</span><span class="p">,</span>
                <span class="n">container_registry</span><span class="o">=</span><span class="n">container_registry</span> <span class="k">if</span> <span class="n">push</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">elif</span> <span class="ow">not</span> <span class="n">requires_zenml_build</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">parent_image</span> <span class="o">==</span> <span class="n">DEFAULT_DOCKER_PARENT_IMAGE</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Unable to run a ZenML pipeline with the given Docker &quot;</span>
                    <span class="s2">&quot;settings: No Dockerfile or custom parent image &quot;</span>
                    <span class="s2">&quot;specified and no files will be copied or requirements &quot;</span>
                    <span class="s2">&quot;installed.&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># The parent image will be used directly to run the pipeline and</span>
                <span class="c1"># needs to be tagged/pushed</span>
                <span class="n">docker_utils</span><span class="o">.</span><span class="n">tag_image</span><span class="p">(</span><span class="n">parent_image</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">target_image_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">container_registry</span><span class="p">:</span>
                    <span class="n">image_name_or_digest</span> <span class="o">=</span> <span class="n">container_registry</span><span class="o">.</span><span class="n">push_image</span><span class="p">(</span>
                        <span class="n">target_image_name</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">image_name_or_digest</span> <span class="o">=</span> <span class="n">target_image_name</span>

        <span class="k">if</span> <span class="n">requires_zenml_build</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Building Docker image `</span><span class="si">%s</span><span class="s2">`.&quot;</span><span class="p">,</span> <span class="n">target_image_name</span><span class="p">)</span>
            <span class="n">build_config</span> <span class="o">=</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">build_config</span> <span class="ow">or</span> <span class="n">DockerBuildConfig</span><span class="p">()</span>

            <span class="c1"># Leave the build context empty if we don&#39;t want to include any files</span>
            <span class="n">build_context_root</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">source_utils</span><span class="o">.</span><span class="n">get_source_root</span><span class="p">()</span> <span class="k">if</span> <span class="n">include_files</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="p">)</span>
            <span class="n">dockerignore</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">build_config</span><span class="o">.</span><span class="n">dockerignore</span> <span class="ow">or</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">dockerignore</span>
            <span class="p">)</span>
            <span class="n">build_context</span> <span class="o">=</span> <span class="n">build_context_class</span><span class="p">(</span>
                <span class="n">root</span><span class="o">=</span><span class="n">build_context_root</span><span class="p">,</span>
                <span class="n">dockerignore_file</span><span class="o">=</span><span class="n">dockerignore</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">requirements_files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gather_requirements_files</span><span class="p">(</span>
                <span class="n">docker_settings</span><span class="o">=</span><span class="n">docker_settings</span><span class="p">,</span>
                <span class="n">stack</span><span class="o">=</span><span class="n">stack</span><span class="p">,</span>
                <span class="n">code_repository</span><span class="o">=</span><span class="n">code_repository</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_add_requirements_files</span><span class="p">(</span>
                <span class="n">requirements_files</span><span class="o">=</span><span class="n">requirements_files</span><span class="p">,</span>
                <span class="n">build_context</span><span class="o">=</span><span class="n">build_context</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">requirements</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="n">file_content</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">file_content</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">requirements_files</span>
                <span class="p">)</span>
                <span class="ow">or</span> <span class="kc">None</span>
            <span class="p">)</span>

            <span class="n">apt_packages</span> <span class="o">=</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">apt_packages</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">install_stack_requirements</span><span class="p">:</span>
                <span class="n">apt_packages</span> <span class="o">+=</span> <span class="n">stack</span><span class="o">.</span><span class="n">apt_packages</span>

            <span class="c1"># include apt packages from all required integrations</span>
            <span class="k">for</span> <span class="n">integration</span> <span class="ow">in</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">required_integrations</span><span class="p">:</span>
                <span class="c1"># get the integration</span>
                <span class="n">integration_cls</span> <span class="o">=</span> <span class="n">integration_registry</span><span class="o">.</span><span class="n">integrations</span><span class="p">[</span>
                    <span class="n">integration</span>
                <span class="p">]</span>
                <span class="n">apt_packages</span> <span class="o">+=</span> <span class="n">integration_cls</span><span class="o">.</span><span class="n">APT_PACKAGES</span>

            <span class="k">if</span> <span class="n">apt_packages</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;Including apt packages: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">p</span><span class="si">}</span><span class="s2">`&quot;</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">apt_packages</span><span class="p">),</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">parent_image</span> <span class="o">==</span> <span class="n">DEFAULT_DOCKER_PARENT_IMAGE</span><span class="p">:</span>
                <span class="c1"># The default parent image is static and doesn&#39;t require a pull</span>
                <span class="c1"># each time</span>
                <span class="n">pull_parent_image</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">elif</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">dockerfile</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">container_registry</span><span class="p">:</span>
                <span class="c1"># We built a custom parent image and there was no container</span>
                <span class="c1"># registry in the stack to push to, this is a local image</span>
                <span class="n">pull_parent_image</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">image_builder</span><span class="o">.</span><span class="n">is_building_locally</span><span class="p">:</span>
                <span class="c1"># Remote image builders always need to pull the image</span>
                <span class="n">pull_parent_image</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># If the image is local, we don&#39;t need to pull it. Otherwise</span>
                <span class="c1"># we play it safe and always pull in case the user pushed a new</span>
                <span class="c1"># image for the given name and tag</span>
                <span class="n">pull_parent_image</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">docker_utils</span><span class="o">.</span><span class="n">is_local_image</span><span class="p">(</span>
                    <span class="n">parent_image</span>
                <span class="p">)</span>

            <span class="n">build_options</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;pull&quot;</span><span class="p">:</span> <span class="n">pull_parent_image</span><span class="p">,</span>
                <span class="s2">&quot;rm&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="o">**</span><span class="n">build_config</span><span class="o">.</span><span class="n">build_options</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">dockerfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_zenml_pipeline_dockerfile</span><span class="p">(</span>
                <span class="n">parent_image</span><span class="o">=</span><span class="n">parent_image</span><span class="p">,</span>
                <span class="n">docker_settings</span><span class="o">=</span><span class="n">docker_settings</span><span class="p">,</span>
                <span class="n">requirements_files</span><span class="o">=</span><span class="n">requirements_files</span><span class="p">,</span>
                <span class="n">apt_packages</span><span class="o">=</span><span class="n">apt_packages</span><span class="p">,</span>
                <span class="n">entrypoint</span><span class="o">=</span><span class="n">entrypoint</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">build_context</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span><span class="n">destination</span><span class="o">=</span><span class="s2">&quot;Dockerfile&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">dockerfile</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">extra_files</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">destination</span><span class="p">,</span> <span class="n">source</span> <span class="ow">in</span> <span class="n">extra_files</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">build_context</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span>
                        <span class="n">destination</span><span class="o">=</span><span class="n">destination</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span>
                    <span class="p">)</span>

            <span class="n">image_name_or_digest</span> <span class="o">=</span> <span class="n">image_builder</span><span class="o">.</span><span class="n">build</span><span class="p">(</span>
                <span class="n">image_name</span><span class="o">=</span><span class="n">target_image_name</span><span class="p">,</span>
                <span class="n">build_context</span><span class="o">=</span><span class="n">build_context</span><span class="p">,</span>
                <span class="n">docker_build_options</span><span class="o">=</span><span class="n">build_options</span><span class="p">,</span>
                <span class="n">container_registry</span><span class="o">=</span><span class="n">container_registry</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">image_name_or_digest</span><span class="p">,</span> <span class="n">dockerfile</span><span class="p">,</span> <span class="n">requirements</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_target_image_name</span><span class="p">(</span>
        <span class="n">docker_settings</span><span class="p">:</span> <span class="s2">&quot;DockerSettings&quot;</span><span class="p">,</span>
        <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">container_registry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;BaseContainerRegistry&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the target image name.</span>

<span class="sd">        If a container registry is given, the image name will include the</span>
<span class="sd">        registry URI</span>

<span class="sd">        Args:</span>
<span class="sd">            docker_settings: The settings for the image build.</span>
<span class="sd">            tag: The tag to use for the image.</span>
<span class="sd">            container_registry: Optional container registry to which this</span>
<span class="sd">                image will be pushed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The docker image name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">repository</span> <span class="o">=</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">target_repository</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">repository</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">container_registry</span><span class="p">:</span>
                <span class="n">repository</span> <span class="o">=</span> <span class="n">container_registry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">default_repository</span>

        <span class="n">repository</span> <span class="o">=</span> <span class="n">repository</span> <span class="ow">or</span> <span class="n">DEFAULT_ZENML_DOCKER_REPOSITORY</span>

        <span class="n">target_image_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">repository</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">container_registry</span><span class="p">:</span>
            <span class="n">target_image_name</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">container_registry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">uri</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">target_image_name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">target_image_name</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_add_requirements_files</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">requirements_files</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]],</span>
        <span class="n">build_context</span><span class="p">:</span> <span class="s2">&quot;BuildContext&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds requirements files to the build context.</span>

<span class="sd">        Args:</span>
<span class="sd">            requirements_files: List of tuples</span>
<span class="sd">                (filename, file_content, pip_options).</span>
<span class="sd">            build_context: Build context to add the requirements files to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">filename</span><span class="p">,</span> <span class="n">file_content</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">requirements_files</span><span class="p">:</span>
            <span class="n">build_context</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">file_content</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">gather_requirements_files</span><span class="p">(</span>
        <span class="n">docker_settings</span><span class="p">:</span> <span class="n">DockerSettings</span><span class="p">,</span>
        <span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">,</span>
        <span class="n">code_repository</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;BaseCodeRepository&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">log</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gathers and/or generates pip requirements files.</span>

<span class="sd">        This method is called in `PipelineDockerImageBuilder.build_docker_image`</span>
<span class="sd">        but it is also called by other parts of the codebase, e.g. the</span>
<span class="sd">        `AzureMLStepOperator`, which needs to upload the requirements files to</span>
<span class="sd">        AzureML where the step image is then built.</span>

<span class="sd">        Args:</span>
<span class="sd">            docker_settings: Docker settings that specifies which</span>
<span class="sd">                requirements to install.</span>
<span class="sd">            stack: The stack on which the pipeline will run.</span>
<span class="sd">            code_repository: The code repository from which files will be</span>
<span class="sd">                downloaded.</span>
<span class="sd">            log: If True, will log the requirements.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: If the command to export the local python packages</span>
<span class="sd">                failed.</span>
<span class="sd">            FileNotFoundError: If the specified requirements file does not</span>
<span class="sd">                exist.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of tuples (filename, file_content, pip_options) of all</span>
<span class="sd">            requirements files.</span>
<span class="sd">            The files will be in the following order:</span>
<span class="sd">            - Packages installed in the local Python environment</span>
<span class="sd">            - Requirements defined by stack integrations</span>
<span class="sd">            - Requirements defined by user integrations</span>
<span class="sd">            - User-defined requirements</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">requirements_files</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Generate requirements file for the local environment if configured</span>
        <span class="k">if</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">replicate_local_python_environment</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
                <span class="n">docker_settings</span><span class="o">.</span><span class="n">replicate_local_python_environment</span><span class="p">,</span>
                <span class="n">PythonEnvironmentExportMethod</span><span class="p">,</span>
            <span class="p">):</span>
                <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">docker_settings</span><span class="o">.</span><span class="n">replicate_local_python_environment</span><span class="o">.</span><span class="n">command</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="n">docker_settings</span><span class="o">.</span><span class="n">replicate_local_python_environment</span>
                <span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">local_requirements</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">check_output</span><span class="p">(</span>
                    <span class="n">command</span><span class="p">,</span>
                    <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># nosec</span>
                <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
            <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="s2">&quot;Unable to export local python packages.&quot;</span>
                <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

            <span class="n">requirements_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">(</span><span class="s2">&quot;.zenml_local_requirements&quot;</span><span class="p">,</span> <span class="n">local_requirements</span><span class="p">,</span> <span class="p">[])</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">log</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;- Including python packages from local environment&quot;</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">install_stack_requirements</span><span class="p">:</span>
            <span class="n">stack_requirements</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">requirements</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">code_repository</span><span class="p">:</span>
                <span class="n">stack_requirements</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">code_repository</span><span class="o">.</span><span class="n">requirements</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">stack_requirements</span><span class="p">:</span>
                <span class="n">stack_requirements_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">stack_requirements</span><span class="p">)</span>
                <span class="n">stack_requirements_file</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">stack_requirements_list</span><span class="p">)</span>
                <span class="n">requirements_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">(</span>
                        <span class="s2">&quot;.zenml_stack_integration_requirements&quot;</span><span class="p">,</span>
                        <span class="n">stack_requirements_file</span><span class="p">,</span>
                        <span class="p">[],</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">log</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="s2">&quot;- Including stack requirements: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s2">`&quot;</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">stack_requirements_list</span><span class="p">),</span>
                    <span class="p">)</span>

        <span class="c1"># Generate requirements file for all required integrations</span>
        <span class="n">integration_requirements</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
            <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span>
                <span class="n">integration_registry</span><span class="o">.</span><span class="n">select_integration_requirements</span><span class="p">(</span>
                    <span class="n">integration_name</span><span class="o">=</span><span class="n">integration</span><span class="p">,</span>
                    <span class="n">target_os</span><span class="o">=</span><span class="n">OperatingSystemType</span><span class="o">.</span><span class="n">LINUX</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">integration</span> <span class="ow">in</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">required_integrations</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">integration_requirements</span><span class="p">:</span>
            <span class="n">integration_requirements_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">integration_requirements</span><span class="p">)</span>
            <span class="n">integration_requirements_file</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">integration_requirements_list</span>
            <span class="p">)</span>
            <span class="n">requirements_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="s2">&quot;.zenml_integration_requirements&quot;</span><span class="p">,</span>
                    <span class="n">integration_requirements_file</span><span class="p">,</span>
                    <span class="p">[],</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">log</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;- Including integration requirements: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s2">`&quot;</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">integration_requirements_list</span><span class="p">),</span>
                <span class="p">)</span>

        <span class="c1"># Generate/Read requirements file for user-defined requirements</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">requirements</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">requirements</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">user_requirements</span> <span class="o">=</span> <span class="n">io_utils</span><span class="o">.</span><span class="n">read_file_contents_as_string</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Requirements file </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span>
                <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
            <span class="k">if</span> <span class="n">log</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;- Including user-defined requirements from file `</span><span class="si">%s</span><span class="s2">`&quot;</span><span class="p">,</span>
                    <span class="n">path</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">requirements</span><span class="p">,</span> <span class="n">List</span><span class="p">):</span>
            <span class="n">user_requirements</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">requirements</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">log</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;- Including user-defined requirements: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s2">`&quot;</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">requirements</span><span class="p">),</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">user_requirements</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">user_requirements</span><span class="p">:</span>
            <span class="n">requirements_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">(</span><span class="s2">&quot;.zenml_user_requirements&quot;</span><span class="p">,</span> <span class="n">user_requirements</span><span class="p">,</span> <span class="p">[])</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">requirements_files</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_generate_zenml_pipeline_dockerfile</span><span class="p">(</span>
        <span class="n">parent_image</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">docker_settings</span><span class="p">:</span> <span class="n">DockerSettings</span><span class="p">,</span>
        <span class="n">requirements_files</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">(),</span>
        <span class="n">apt_packages</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
        <span class="n">entrypoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates a Dockerfile.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent_image: The image to use as parent for the Dockerfile.</span>
<span class="sd">            docker_settings: Docker settings for this image build.</span>
<span class="sd">            requirements_files: List of tuples that contain three items:</span>
<span class="sd">                - the name of a requirements file,</span>
<span class="sd">                - the content of that file,</span>
<span class="sd">                - options that should be passed to pip when installing the</span>
<span class="sd">                    requirements file.</span>
<span class="sd">            apt_packages: APT packages to install.</span>
<span class="sd">            entrypoint: The default entrypoint command that gets executed when</span>
<span class="sd">                running a container of an image created by this Dockerfile.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If an unsupported python package installer was</span>
<span class="sd">                configured.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The generated Dockerfile.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;FROM </span><span class="si">{</span><span class="n">parent_image</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;WORKDIR </span><span class="si">{</span><span class="n">DOCKER_IMAGE_WORKDIR</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>

        <span class="c1"># Set color logging to whatever is locally configured</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;ENV </span><span class="si">{</span><span class="n">ENV_ZENML_LOGGING_COLORS_DISABLED</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">handle_bool_env_var</span><span class="p">(</span><span class="n">ENV_ZENML_LOGGING_COLORS_DISABLED</span><span class="p">,</span><span class="w"> </span><span class="kc">False</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ENV </span><span class="si">{</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">apt_packages</span><span class="p">:</span>
            <span class="n">apt_packages</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">p</span><span class="si">}</span><span class="s2">&#39;&quot;</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">apt_packages</span><span class="p">)</span>

            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="s2">&quot;RUN apt-get update &amp;&amp; apt-get install -y &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;--no-install-recommends </span><span class="si">{</span><span class="n">apt_packages</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">docker_settings</span><span class="o">.</span><span class="n">python_package_installer</span>
            <span class="o">==</span> <span class="n">PythonPackageInstaller</span><span class="o">.</span><span class="n">PIP</span>
        <span class="p">):</span>
            <span class="n">install_command</span> <span class="o">=</span> <span class="s2">&quot;pip install&quot;</span>
            <span class="n">default_installer_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">PIP_DEFAULT_ARGS</span>
        <span class="k">elif</span> <span class="p">(</span>
            <span class="n">docker_settings</span><span class="o">.</span><span class="n">python_package_installer</span>
            <span class="o">==</span> <span class="n">PythonPackageInstaller</span><span class="o">.</span><span class="n">UV</span>
        <span class="p">):</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;RUN pip install uv&quot;</span><span class="p">)</span>
            <span class="n">install_command</span> <span class="o">=</span> <span class="s2">&quot;uv pip install&quot;</span>
            <span class="n">default_installer_args</span> <span class="o">=</span> <span class="n">UV_DEFAULT_ARGS</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsupported python package installer.&quot;</span><span class="p">)</span>

        <span class="n">installer_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="n">default_installer_args</span><span class="p">,</span>
            <span class="o">**</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">python_package_installer_args</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">installer_args_string</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">installer_args</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">file</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">options</span> <span class="ow">in</span> <span class="n">requirements_files</span><span class="p">:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;COPY </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2"> .&quot;</span><span class="p">)</span>
            <span class="n">option_string</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>

            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;RUN </span><span class="si">{</span><span class="n">install_command</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">installer_args_string</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">option_string</span><span class="si">}</span><span class="s2"> -r </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ENV </span><span class="si">{</span><span class="n">ENV_ZENML_ENABLE_REPO_INIT_WARNINGS</span><span class="si">}</span><span class="s2">=False&quot;</span><span class="p">)</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;ENV </span><span class="si">{</span><span class="n">ENV_ZENML_CONFIG_PATH</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">DOCKER_IMAGE_ZENML_CONFIG_PATH</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;COPY . .&quot;</span><span class="p">)</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;RUN chmod -R a+rw .&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">user</span><span class="p">:</span>
            <span class="c1"># Change file ownership to specified user</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;RUN chown -R </span><span class="si">{</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">user</span><span class="si">}</span><span class="s2"> .&quot;</span><span class="p">)</span>
            <span class="c1"># Switch back to specified user for subsequent instructions</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;USER </span><span class="si">{</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">user</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">entrypoint</span><span class="p">:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ENTRYPOINT </span><span class="si">{</span><span class="n">entrypoint</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.pipeline_docker_image_builder.PipelineDockerImageBuilder.build_docker_image" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_docker_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">docker_settings</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">stack</span><span class="p">,</span> <span class="n">include_files</span><span class="p">,</span> <span class="n">download_files</span><span class="p">,</span> <span class="n">entrypoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">extra_files</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">code_repository</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Builds (and optionally pushes) a Docker image to run a pipeline.</p>
<p>Use the image name returned by this method whenever you need to uniquely
reference the pushed image in order to pull or run it.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>docker_settings</code></td>
        <td><code>DockerSettings</code></td>
        <td><p>The settings for the image build.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>tag</code></td>
        <td><code>str</code></td>
        <td><p>The tag to use for the image.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>stack</code></td>
        <td><code>Stack</code></td>
        <td><p>The stack on which the pipeline will be deployed.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>include_files</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to include files in the build context.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>download_files</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to download files in the build context.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>entrypoint</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Entrypoint to use for the final image. If left empty,
no entrypoint will be included in the image.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>extra_files</code></td>
        <td><code>Optional[Dict[str, str]]</code></td>
        <td><p>Extra files to add to the build context. Keys are the
path inside the build context, values are either the file
content or a file path.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>code_repository</code></td>
        <td><code>Optional[BaseCodeRepository]</code></td>
        <td><p>The code repository from which files will be
downloaded.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>A tuple (image_digest, dockerfile, requirements)</code></td>
      <td><ul>
<li>The Docker image repo digest or local name, depending on whether
the image was pushed or is just stored locally.</li>
<li>Dockerfile will contain the contents of the Dockerfile used to
build the image.</li>
<li>Requirements is a string with a single pip requirement per line.</li>
</ul></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If the stack does not contain an image builder.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If no Dockerfile and/or custom parent image is
specified and the Docker configuration doesn't require an
image build.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the specified Dockerfile does not exist.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/pipeline_docker_image_builder.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">build_docker_image</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">docker_settings</span><span class="p">:</span> <span class="s2">&quot;DockerSettings&quot;</span><span class="p">,</span>
    <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">,</span>
    <span class="n">include_files</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">download_files</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">entrypoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">extra_files</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">code_repository</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;BaseCodeRepository&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Builds (and optionally pushes) a Docker image to run a pipeline.</span>

<span class="sd">    Use the image name returned by this method whenever you need to uniquely</span>
<span class="sd">    reference the pushed image in order to pull or run it.</span>

<span class="sd">    Args:</span>
<span class="sd">        docker_settings: The settings for the image build.</span>
<span class="sd">        tag: The tag to use for the image.</span>
<span class="sd">        stack: The stack on which the pipeline will be deployed.</span>
<span class="sd">        include_files: Whether to include files in the build context.</span>
<span class="sd">        download_files: Whether to download files in the build context.</span>
<span class="sd">        entrypoint: Entrypoint to use for the final image. If left empty,</span>
<span class="sd">            no entrypoint will be included in the image.</span>
<span class="sd">        extra_files: Extra files to add to the build context. Keys are the</span>
<span class="sd">            path inside the build context, values are either the file</span>
<span class="sd">            content or a file path.</span>
<span class="sd">        code_repository: The code repository from which files will be</span>
<span class="sd">            downloaded.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A tuple (image_digest, dockerfile, requirements):</span>
<span class="sd">        - The Docker image repo digest or local name, depending on whether</span>
<span class="sd">        the image was pushed or is just stored locally.</span>
<span class="sd">        - Dockerfile will contain the contents of the Dockerfile used to</span>
<span class="sd">        build the image.</span>
<span class="sd">        - Requirements is a string with a single pip requirement per line.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the stack does not contain an image builder.</span>
<span class="sd">        ValueError: If no Dockerfile and/or custom parent image is</span>
<span class="sd">            specified and the Docker configuration doesn&#39;t require an</span>
<span class="sd">            image build.</span>
<span class="sd">        ValueError: If the specified Dockerfile does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">requirements</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">dockerfile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">skip_build</span><span class="p">:</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="n">docker_settings</span><span class="o">.</span><span class="n">parent_image</span>
        <span class="p">)</span>  <span class="c1"># checked via validator already</span>

        <span class="c1"># Should we tag this here and push it to the container registry of</span>
        <span class="c1"># the stack to make sure it&#39;s always accessible when running the</span>
        <span class="c1"># pipeline?</span>
        <span class="k">return</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">parent_image</span><span class="p">,</span> <span class="n">dockerfile</span><span class="p">,</span> <span class="n">requirements</span>

    <span class="k">if</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">dockerfile</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span>
        <span class="n">docker_settings</span><span class="o">.</span><span class="n">dockerfile</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Dockerfile at path &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">dockerfile</span><span class="p">)</span><span class="si">}</span><span class="s2"> not found.&quot;</span>
        <span class="p">)</span>

    <span class="n">stack</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
    <span class="n">image_builder</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">image_builder</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">image_builder</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Unable to build Docker images without an image builder in the &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;stack `</span><span class="si">{</span><span class="n">stack</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">`.&quot;</span>
        <span class="p">)</span>

    <span class="n">container_registry</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">container_registry</span>

    <span class="n">build_context_class</span> <span class="o">=</span> <span class="n">image_builder</span><span class="o">.</span><span class="n">build_context_class</span>
    <span class="n">target_image_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_target_image_name</span><span class="p">(</span>
        <span class="n">docker_settings</span><span class="o">=</span><span class="n">docker_settings</span><span class="p">,</span>
        <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">,</span>
        <span class="n">container_registry</span><span class="o">=</span><span class="n">container_registry</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">requires_zenml_build</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">docker_settings</span><span class="o">.</span><span class="n">requirements</span><span class="p">,</span>
            <span class="n">docker_settings</span><span class="o">.</span><span class="n">required_integrations</span><span class="p">,</span>
            <span class="n">docker_settings</span><span class="o">.</span><span class="n">required_hub_plugins</span><span class="p">,</span>
            <span class="n">docker_settings</span><span class="o">.</span><span class="n">replicate_local_python_environment</span><span class="p">,</span>
            <span class="n">docker_settings</span><span class="o">.</span><span class="n">install_stack_requirements</span><span class="p">,</span>
            <span class="n">docker_settings</span><span class="o">.</span><span class="n">apt_packages</span><span class="p">,</span>
            <span class="n">docker_settings</span><span class="o">.</span><span class="n">environment</span><span class="p">,</span>
            <span class="n">include_files</span><span class="p">,</span>
            <span class="n">download_files</span><span class="p">,</span>
            <span class="n">entrypoint</span><span class="p">,</span>
            <span class="n">extra_files</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Fallback to the value defined on the stack component if the</span>
    <span class="c1"># pipeline configuration doesn&#39;t have a configured value</span>
    <span class="n">parent_image</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">docker_settings</span><span class="o">.</span><span class="n">parent_image</span> <span class="ow">or</span> <span class="n">DEFAULT_DOCKER_PARENT_IMAGE</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">dockerfile</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">parent_image</span> <span class="o">!=</span> <span class="n">DEFAULT_DOCKER_PARENT_IMAGE</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;You&#39;ve specified both a Dockerfile and a custom parent &quot;</span>
                <span class="s2">&quot;image, ignoring the parent image.&quot;</span>
            <span class="p">)</span>

        <span class="n">push</span> <span class="o">=</span> <span class="p">(</span>
            <span class="ow">not</span> <span class="n">image_builder</span><span class="o">.</span><span class="n">is_building_locally</span>
            <span class="ow">or</span> <span class="ow">not</span> <span class="n">requires_zenml_build</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">requires_zenml_build</span><span class="p">:</span>
            <span class="c1"># We will build an additional image on top of this one later</span>
            <span class="c1"># to include user files and/or install requirements. The image</span>
            <span class="c1"># we build now will be used as the parent for the next build.</span>
            <span class="n">repository</span> <span class="o">=</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">target_repository</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">repository</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">container_registry</span><span class="p">:</span>
                    <span class="n">repository</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">container_registry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">default_repository</span>
                    <span class="p">)</span>

            <span class="n">repository</span> <span class="o">=</span> <span class="n">repository</span> <span class="ow">or</span> <span class="n">DEFAULT_ZENML_DOCKER_REPOSITORY</span>
            <span class="n">user_image_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">repository</span><span class="si">}</span><span class="s2">:&quot;</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">-intermediate-build&quot;</span>
            <span class="k">if</span> <span class="n">push</span> <span class="ow">and</span> <span class="n">container_registry</span><span class="p">:</span>
                <span class="n">user_image_name</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">container_registry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">uri</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">user_image_name</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="n">parent_image</span> <span class="o">=</span> <span class="n">user_image_name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># The image we&#39;ll build from the custom Dockerfile will be</span>
            <span class="c1"># used directly, so we tag it with the requested target name.</span>
            <span class="n">user_image_name</span> <span class="o">=</span> <span class="n">target_image_name</span>

        <span class="n">build_config</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">docker_settings</span><span class="o">.</span><span class="n">parent_image_build_config</span>
            <span class="ow">or</span> <span class="n">DockerBuildConfig</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">build_context</span> <span class="o">=</span> <span class="n">build_context_class</span><span class="p">(</span>
            <span class="n">root</span><span class="o">=</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">build_context_root</span><span class="p">,</span>
            <span class="n">dockerignore_file</span><span class="o">=</span><span class="n">build_config</span><span class="o">.</span><span class="n">dockerignore</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">build_context</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span>
            <span class="n">source</span><span class="o">=</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">dockerfile</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="s2">&quot;Dockerfile&quot;</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Building Docker image `</span><span class="si">%s</span><span class="s2">`.&quot;</span><span class="p">,</span> <span class="n">user_image_name</span><span class="p">)</span>
        <span class="n">image_name_or_digest</span> <span class="o">=</span> <span class="n">image_builder</span><span class="o">.</span><span class="n">build</span><span class="p">(</span>
            <span class="n">image_name</span><span class="o">=</span><span class="n">user_image_name</span><span class="p">,</span>
            <span class="n">build_context</span><span class="o">=</span><span class="n">build_context</span><span class="p">,</span>
            <span class="n">docker_build_options</span><span class="o">=</span><span class="n">build_config</span><span class="o">.</span><span class="n">build_options</span>
            <span class="ow">or</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">build_options</span><span class="p">,</span>
            <span class="n">container_registry</span><span class="o">=</span><span class="n">container_registry</span> <span class="k">if</span> <span class="n">push</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">elif</span> <span class="ow">not</span> <span class="n">requires_zenml_build</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">parent_image</span> <span class="o">==</span> <span class="n">DEFAULT_DOCKER_PARENT_IMAGE</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Unable to run a ZenML pipeline with the given Docker &quot;</span>
                <span class="s2">&quot;settings: No Dockerfile or custom parent image &quot;</span>
                <span class="s2">&quot;specified and no files will be copied or requirements &quot;</span>
                <span class="s2">&quot;installed.&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># The parent image will be used directly to run the pipeline and</span>
            <span class="c1"># needs to be tagged/pushed</span>
            <span class="n">docker_utils</span><span class="o">.</span><span class="n">tag_image</span><span class="p">(</span><span class="n">parent_image</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">target_image_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">container_registry</span><span class="p">:</span>
                <span class="n">image_name_or_digest</span> <span class="o">=</span> <span class="n">container_registry</span><span class="o">.</span><span class="n">push_image</span><span class="p">(</span>
                    <span class="n">target_image_name</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">image_name_or_digest</span> <span class="o">=</span> <span class="n">target_image_name</span>

    <span class="k">if</span> <span class="n">requires_zenml_build</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Building Docker image `</span><span class="si">%s</span><span class="s2">`.&quot;</span><span class="p">,</span> <span class="n">target_image_name</span><span class="p">)</span>
        <span class="n">build_config</span> <span class="o">=</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">build_config</span> <span class="ow">or</span> <span class="n">DockerBuildConfig</span><span class="p">()</span>

        <span class="c1"># Leave the build context empty if we don&#39;t want to include any files</span>
        <span class="n">build_context_root</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">source_utils</span><span class="o">.</span><span class="n">get_source_root</span><span class="p">()</span> <span class="k">if</span> <span class="n">include_files</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="n">dockerignore</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">build_config</span><span class="o">.</span><span class="n">dockerignore</span> <span class="ow">or</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">dockerignore</span>
        <span class="p">)</span>
        <span class="n">build_context</span> <span class="o">=</span> <span class="n">build_context_class</span><span class="p">(</span>
            <span class="n">root</span><span class="o">=</span><span class="n">build_context_root</span><span class="p">,</span>
            <span class="n">dockerignore_file</span><span class="o">=</span><span class="n">dockerignore</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">requirements_files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gather_requirements_files</span><span class="p">(</span>
            <span class="n">docker_settings</span><span class="o">=</span><span class="n">docker_settings</span><span class="p">,</span>
            <span class="n">stack</span><span class="o">=</span><span class="n">stack</span><span class="p">,</span>
            <span class="n">code_repository</span><span class="o">=</span><span class="n">code_repository</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_add_requirements_files</span><span class="p">(</span>
            <span class="n">requirements_files</span><span class="o">=</span><span class="n">requirements_files</span><span class="p">,</span>
            <span class="n">build_context</span><span class="o">=</span><span class="n">build_context</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">requirements</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">file_content</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">file_content</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">requirements_files</span>
            <span class="p">)</span>
            <span class="ow">or</span> <span class="kc">None</span>
        <span class="p">)</span>

        <span class="n">apt_packages</span> <span class="o">=</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">apt_packages</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">install_stack_requirements</span><span class="p">:</span>
            <span class="n">apt_packages</span> <span class="o">+=</span> <span class="n">stack</span><span class="o">.</span><span class="n">apt_packages</span>

        <span class="c1"># include apt packages from all required integrations</span>
        <span class="k">for</span> <span class="n">integration</span> <span class="ow">in</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">required_integrations</span><span class="p">:</span>
            <span class="c1"># get the integration</span>
            <span class="n">integration_cls</span> <span class="o">=</span> <span class="n">integration_registry</span><span class="o">.</span><span class="n">integrations</span><span class="p">[</span>
                <span class="n">integration</span>
            <span class="p">]</span>
            <span class="n">apt_packages</span> <span class="o">+=</span> <span class="n">integration_cls</span><span class="o">.</span><span class="n">APT_PACKAGES</span>

        <span class="k">if</span> <span class="n">apt_packages</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Including apt packages: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">p</span><span class="si">}</span><span class="s2">`&quot;</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">apt_packages</span><span class="p">),</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">parent_image</span> <span class="o">==</span> <span class="n">DEFAULT_DOCKER_PARENT_IMAGE</span><span class="p">:</span>
            <span class="c1"># The default parent image is static and doesn&#39;t require a pull</span>
            <span class="c1"># each time</span>
            <span class="n">pull_parent_image</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">dockerfile</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">container_registry</span><span class="p">:</span>
            <span class="c1"># We built a custom parent image and there was no container</span>
            <span class="c1"># registry in the stack to push to, this is a local image</span>
            <span class="n">pull_parent_image</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">image_builder</span><span class="o">.</span><span class="n">is_building_locally</span><span class="p">:</span>
            <span class="c1"># Remote image builders always need to pull the image</span>
            <span class="n">pull_parent_image</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># If the image is local, we don&#39;t need to pull it. Otherwise</span>
            <span class="c1"># we play it safe and always pull in case the user pushed a new</span>
            <span class="c1"># image for the given name and tag</span>
            <span class="n">pull_parent_image</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">docker_utils</span><span class="o">.</span><span class="n">is_local_image</span><span class="p">(</span>
                <span class="n">parent_image</span>
            <span class="p">)</span>

        <span class="n">build_options</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;pull&quot;</span><span class="p">:</span> <span class="n">pull_parent_image</span><span class="p">,</span>
            <span class="s2">&quot;rm&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="o">**</span><span class="n">build_config</span><span class="o">.</span><span class="n">build_options</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">dockerfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_zenml_pipeline_dockerfile</span><span class="p">(</span>
            <span class="n">parent_image</span><span class="o">=</span><span class="n">parent_image</span><span class="p">,</span>
            <span class="n">docker_settings</span><span class="o">=</span><span class="n">docker_settings</span><span class="p">,</span>
            <span class="n">requirements_files</span><span class="o">=</span><span class="n">requirements_files</span><span class="p">,</span>
            <span class="n">apt_packages</span><span class="o">=</span><span class="n">apt_packages</span><span class="p">,</span>
            <span class="n">entrypoint</span><span class="o">=</span><span class="n">entrypoint</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">build_context</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span><span class="n">destination</span><span class="o">=</span><span class="s2">&quot;Dockerfile&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">dockerfile</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">extra_files</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">destination</span><span class="p">,</span> <span class="n">source</span> <span class="ow">in</span> <span class="n">extra_files</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">build_context</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span>
                    <span class="n">destination</span><span class="o">=</span><span class="n">destination</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span>
                <span class="p">)</span>

        <span class="n">image_name_or_digest</span> <span class="o">=</span> <span class="n">image_builder</span><span class="o">.</span><span class="n">build</span><span class="p">(</span>
            <span class="n">image_name</span><span class="o">=</span><span class="n">target_image_name</span><span class="p">,</span>
            <span class="n">build_context</span><span class="o">=</span><span class="n">build_context</span><span class="p">,</span>
            <span class="n">docker_build_options</span><span class="o">=</span><span class="n">build_options</span><span class="p">,</span>
            <span class="n">container_registry</span><span class="o">=</span><span class="n">container_registry</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">image_name_or_digest</span><span class="p">,</span> <span class="n">dockerfile</span><span class="p">,</span> <span class="n">requirements</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.pipeline_docker_image_builder.PipelineDockerImageBuilder.gather_requirements_files" class="doc doc-heading">
<code class="highlight language-python"><span class="n">gather_requirements_files</span><span class="p">(</span><span class="n">docker_settings</span><span class="p">,</span> <span class="n">stack</span><span class="p">,</span> <span class="n">code_repository</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Gathers and/or generates pip requirements files.</p>
<p>This method is called in <code>PipelineDockerImageBuilder.build_docker_image</code>
but it is also called by other parts of the codebase, e.g. the
<code>AzureMLStepOperator</code>, which needs to upload the requirements files to
AzureML where the step image is then built.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>docker_settings</code></td>
        <td><code>DockerSettings</code></td>
        <td><p>Docker settings that specifies which
requirements to install.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>stack</code></td>
        <td><code>Stack</code></td>
        <td><p>The stack on which the pipeline will run.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>code_repository</code></td>
        <td><code>Optional[BaseCodeRepository]</code></td>
        <td><p>The code repository from which files will be
downloaded.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>log</code></td>
        <td><code>bool</code></td>
        <td><p>If True, will log the requirements.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If the command to export the local python packages
failed.</p></td>
      </tr>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>If the specified requirements file does not
exist.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List of tuples (filename, file_content, pip_options) of all
requirements files.
The files will be in the following order</code></td>
      <td><ul>
<li>Packages installed in the local Python environment</li>
<li>Requirements defined by stack integrations</li>
<li>Requirements defined by user integrations</li>
<li>User-defined requirements</li>
</ul></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/pipeline_docker_image_builder.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">gather_requirements_files</span><span class="p">(</span>
    <span class="n">docker_settings</span><span class="p">:</span> <span class="n">DockerSettings</span><span class="p">,</span>
    <span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span><span class="p">,</span>
    <span class="n">code_repository</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;BaseCodeRepository&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gathers and/or generates pip requirements files.</span>

<span class="sd">    This method is called in `PipelineDockerImageBuilder.build_docker_image`</span>
<span class="sd">    but it is also called by other parts of the codebase, e.g. the</span>
<span class="sd">    `AzureMLStepOperator`, which needs to upload the requirements files to</span>
<span class="sd">    AzureML where the step image is then built.</span>

<span class="sd">    Args:</span>
<span class="sd">        docker_settings: Docker settings that specifies which</span>
<span class="sd">            requirements to install.</span>
<span class="sd">        stack: The stack on which the pipeline will run.</span>
<span class="sd">        code_repository: The code repository from which files will be</span>
<span class="sd">            downloaded.</span>
<span class="sd">        log: If True, will log the requirements.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the command to export the local python packages</span>
<span class="sd">            failed.</span>
<span class="sd">        FileNotFoundError: If the specified requirements file does not</span>
<span class="sd">            exist.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of tuples (filename, file_content, pip_options) of all</span>
<span class="sd">        requirements files.</span>
<span class="sd">        The files will be in the following order:</span>
<span class="sd">        - Packages installed in the local Python environment</span>
<span class="sd">        - Requirements defined by stack integrations</span>
<span class="sd">        - Requirements defined by user integrations</span>
<span class="sd">        - User-defined requirements</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">requirements_files</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Generate requirements file for the local environment if configured</span>
    <span class="k">if</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">replicate_local_python_environment</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">docker_settings</span><span class="o">.</span><span class="n">replicate_local_python_environment</span><span class="p">,</span>
            <span class="n">PythonEnvironmentExportMethod</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">docker_settings</span><span class="o">.</span><span class="n">replicate_local_python_environment</span><span class="o">.</span><span class="n">command</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">docker_settings</span><span class="o">.</span><span class="n">replicate_local_python_environment</span>
            <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">local_requirements</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">check_output</span><span class="p">(</span>
                <span class="n">command</span><span class="p">,</span>
                <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># nosec</span>
            <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;Unable to export local python packages.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

        <span class="n">requirements_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">(</span><span class="s2">&quot;.zenml_local_requirements&quot;</span><span class="p">,</span> <span class="n">local_requirements</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">log</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;- Including python packages from local environment&quot;</span>
            <span class="p">)</span>

    <span class="k">if</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">install_stack_requirements</span><span class="p">:</span>
        <span class="n">stack_requirements</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">requirements</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">code_repository</span><span class="p">:</span>
            <span class="n">stack_requirements</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">code_repository</span><span class="o">.</span><span class="n">requirements</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">stack_requirements</span><span class="p">:</span>
            <span class="n">stack_requirements_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">stack_requirements</span><span class="p">)</span>
            <span class="n">stack_requirements_file</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">stack_requirements_list</span><span class="p">)</span>
            <span class="n">requirements_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="s2">&quot;.zenml_stack_integration_requirements&quot;</span><span class="p">,</span>
                    <span class="n">stack_requirements_file</span><span class="p">,</span>
                    <span class="p">[],</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">log</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;- Including stack requirements: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s2">`&quot;</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">stack_requirements_list</span><span class="p">),</span>
                <span class="p">)</span>

    <span class="c1"># Generate requirements file for all required integrations</span>
    <span class="n">integration_requirements</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
        <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span>
            <span class="n">integration_registry</span><span class="o">.</span><span class="n">select_integration_requirements</span><span class="p">(</span>
                <span class="n">integration_name</span><span class="o">=</span><span class="n">integration</span><span class="p">,</span>
                <span class="n">target_os</span><span class="o">=</span><span class="n">OperatingSystemType</span><span class="o">.</span><span class="n">LINUX</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">integration</span> <span class="ow">in</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">required_integrations</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">integration_requirements</span><span class="p">:</span>
        <span class="n">integration_requirements_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">integration_requirements</span><span class="p">)</span>
        <span class="n">integration_requirements_file</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">integration_requirements_list</span>
        <span class="p">)</span>
        <span class="n">requirements_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="s2">&quot;.zenml_integration_requirements&quot;</span><span class="p">,</span>
                <span class="n">integration_requirements_file</span><span class="p">,</span>
                <span class="p">[],</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">log</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;- Including integration requirements: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s2">`&quot;</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">integration_requirements_list</span><span class="p">),</span>
            <span class="p">)</span>

    <span class="c1"># Generate/Read requirements file for user-defined requirements</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">requirements</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">requirements</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">user_requirements</span> <span class="o">=</span> <span class="n">io_utils</span><span class="o">.</span><span class="n">read_file_contents_as_string</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Requirements file </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
        <span class="k">if</span> <span class="n">log</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;- Including user-defined requirements from file `</span><span class="si">%s</span><span class="s2">`&quot;</span><span class="p">,</span>
                <span class="n">path</span><span class="p">,</span>
            <span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">requirements</span><span class="p">,</span> <span class="n">List</span><span class="p">):</span>
        <span class="n">user_requirements</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">docker_settings</span><span class="o">.</span><span class="n">requirements</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">log</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;- Including user-defined requirements: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s2">`&quot;</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">docker_settings</span><span class="o">.</span><span class="n">requirements</span><span class="p">),</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">user_requirements</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">user_requirements</span><span class="p">:</span>
        <span class="n">requirements_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">(</span><span class="s2">&quot;.zenml_user_requirements&quot;</span><span class="p">,</span> <span class="n">user_requirements</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">requirements_files</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.proxy_utils" class="doc doc-heading">
        <code>proxy_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Proxy design pattern utils.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.proxy_utils.make_proxy_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">make_proxy_class</span><span class="p">(</span><span class="n">interface</span><span class="p">,</span> <span class="n">attribute</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Proxy class decorator.</p>
<p>Use this decorator to transform the decorated class into a proxy that
forwards all calls defined in the <code>interface</code> interface to the <code>attribute</code>
class attribute that implements the same interface.</p>
<p>This class is useful in cases where you need to have a base class that acts
as a proxy or facade for one or more other classes. Both the decorated class
and the class attribute must inherit from the same ABC interface for this to
work. Only regular methods are supported, not class methods or attributes.</p>
<p>Example: Let's say you have an interface called <code>BodyBuilder</code>, a base class
called <code>FatBob</code> and another class called <code>BigJim</code>. <code>BigJim</code> implements the
<code>BodyBuilder</code> interface, but <code>FatBob</code> does not. And let's say you want
<code>FatBob</code> to look as if it implements the <code>BodyBuilder</code> interface, but in
fact it just forwards all calls to <code>BigJim</code>. You could do this:</p>
<pre><code class="language-python">from abc import ABC, abstractmethod

class BodyBuilder(ABC):

    @abstractmethod
    def build_body(self):
        pass

class BigJim(BodyBuilder):

    def build_body(self):
        print(&quot;Looks fit!&quot;)

class FatBob(BodyBuilder)

    def __init__(self):
        self.big_jim = BigJim()

    def build_body(self):
        self.big_jim.build_body()

fat_bob = FatBob()
fat_bob.build_body()
</code></pre>
<p>But this leads to a lot of boilerplate code with bigger interfaces and
makes everything harder to maintain. This is where the proxy class
decorator comes in handy. Here's how to use it:</p>
<pre><code class="language-python">from zenml.utils.proxy_utils import make_proxy_class
from typing import Optional

@make_proxy_class(BodyBuilder, &quot;big_jim&quot;)
class FatBob(BodyBuilder)
    big_jim: Optional[BodyBuilder] = None

    def __init__(self):
        self.big_jim = BigJim()

fat_bob = FatBob()
fat_bob.build_body()
</code></pre>
<p>This is the same as implementing FatBob to call BigJim explicitly, but it
has the advantage that you don't need to write a lot of boilerplate code
of modify the FatBob class every time you change something in the
BodyBuilder interface.</p>
<p>This proxy decorator also allows to extend classes dynamically at runtime:
if the <code>attribute</code> class attribute is set to None, the proxy class
will assume that the interface is not implemented by the class and will
raise a NotImplementedError:</p>
<pre><code class="language-python">@make_proxy_class(BodyBuilder, &quot;big_jim&quot;)
class FatBob(BodyBuilder)
    big_jim: Optional[BodyBuilder] = None

    def __init__(self):
        self.big_jim = None

fat_bob = FatBob()

# Raises NotImplementedError, class not extended yet:
fat_bob.build_body()

fat_bob.big_jim = BigJim()
# Now it works:
fat_bob.build_body()
</code></pre>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>interface</code></td>
        <td><code>Type[abc.ABC]</code></td>
        <td><p>The interface to implement.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>attribute</code></td>
        <td><code>str</code></td>
        <td><p>The attribute of the base class to forward calls to.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Callable[[~C], ~C]</code></td>
      <td><p>The proxy class.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/proxy_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">make_proxy_class</span><span class="p">(</span><span class="n">interface</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">ABC</span><span class="p">],</span> <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">C</span><span class="p">],</span> <span class="n">C</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Proxy class decorator.</span>

<span class="sd">    Use this decorator to transform the decorated class into a proxy that</span>
<span class="sd">    forwards all calls defined in the `interface` interface to the `attribute`</span>
<span class="sd">    class attribute that implements the same interface.</span>

<span class="sd">    This class is useful in cases where you need to have a base class that acts</span>
<span class="sd">    as a proxy or facade for one or more other classes. Both the decorated class</span>
<span class="sd">    and the class attribute must inherit from the same ABC interface for this to</span>
<span class="sd">    work. Only regular methods are supported, not class methods or attributes.</span>

<span class="sd">    Example: Let&#39;s say you have an interface called `BodyBuilder`, a base class</span>
<span class="sd">    called `FatBob` and another class called `BigJim`. `BigJim` implements the</span>
<span class="sd">    `BodyBuilder` interface, but `FatBob` does not. And let&#39;s say you want</span>
<span class="sd">    `FatBob` to look as if it implements the `BodyBuilder` interface, but in</span>
<span class="sd">    fact it just forwards all calls to `BigJim`. You could do this:</span>

<span class="sd">    ```python</span>
<span class="sd">    from abc import ABC, abstractmethod</span>

<span class="sd">    class BodyBuilder(ABC):</span>

<span class="sd">        @abstractmethod</span>
<span class="sd">        def build_body(self):</span>
<span class="sd">            pass</span>

<span class="sd">    class BigJim(BodyBuilder):</span>

<span class="sd">        def build_body(self):</span>
<span class="sd">            print(&quot;Looks fit!&quot;)</span>

<span class="sd">    class FatBob(BodyBuilder)</span>

<span class="sd">        def __init__(self):</span>
<span class="sd">            self.big_jim = BigJim()</span>

<span class="sd">        def build_body(self):</span>
<span class="sd">            self.big_jim.build_body()</span>

<span class="sd">    fat_bob = FatBob()</span>
<span class="sd">    fat_bob.build_body()</span>
<span class="sd">    ```</span>

<span class="sd">    But this leads to a lot of boilerplate code with bigger interfaces and</span>
<span class="sd">    makes everything harder to maintain. This is where the proxy class</span>
<span class="sd">    decorator comes in handy. Here&#39;s how to use it:</span>

<span class="sd">    ```python</span>
<span class="sd">    from zenml.utils.proxy_utils import make_proxy_class</span>
<span class="sd">    from typing import Optional</span>

<span class="sd">    @make_proxy_class(BodyBuilder, &quot;big_jim&quot;)</span>
<span class="sd">    class FatBob(BodyBuilder)</span>
<span class="sd">        big_jim: Optional[BodyBuilder] = None</span>

<span class="sd">        def __init__(self):</span>
<span class="sd">            self.big_jim = BigJim()</span>

<span class="sd">    fat_bob = FatBob()</span>
<span class="sd">    fat_bob.build_body()</span>
<span class="sd">    ```</span>

<span class="sd">    This is the same as implementing FatBob to call BigJim explicitly, but it</span>
<span class="sd">    has the advantage that you don&#39;t need to write a lot of boilerplate code</span>
<span class="sd">    of modify the FatBob class every time you change something in the</span>
<span class="sd">    BodyBuilder interface.</span>

<span class="sd">    This proxy decorator also allows to extend classes dynamically at runtime:</span>
<span class="sd">    if the `attribute` class attribute is set to None, the proxy class</span>
<span class="sd">    will assume that the interface is not implemented by the class and will</span>
<span class="sd">    raise a NotImplementedError:</span>

<span class="sd">    ```python</span>
<span class="sd">    @make_proxy_class(BodyBuilder, &quot;big_jim&quot;)</span>
<span class="sd">    class FatBob(BodyBuilder)</span>
<span class="sd">        big_jim: Optional[BodyBuilder] = None</span>

<span class="sd">        def __init__(self):</span>
<span class="sd">            self.big_jim = None</span>

<span class="sd">    fat_bob = FatBob()</span>

<span class="sd">    # Raises NotImplementedError, class not extended yet:</span>
<span class="sd">    fat_bob.build_body()</span>

<span class="sd">    fat_bob.big_jim = BigJim()</span>
<span class="sd">    # Now it works:</span>
<span class="sd">    fat_bob.build_body()</span>
<span class="sd">    ```</span>

<span class="sd">    Args:</span>
<span class="sd">        interface: The interface to implement.</span>
<span class="sd">        attribute: The attribute of the base class to forward calls to.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The proxy class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">make_proxy_method</span><span class="p">(</span><span class="bp">cls</span><span class="p">:</span> <span class="n">C</span><span class="p">,</span> <span class="n">_method</span><span class="p">:</span> <span class="n">F</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">F</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Proxy method decorator.</span>

<span class="sd">        Used to transform a method into a proxy that forwards all calls to the</span>
<span class="sd">        given class attribute.</span>

<span class="sd">        Args:</span>
<span class="sd">            cls: The class to use as the base.</span>
<span class="sd">            _method: The method to replace.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The proxy method.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nd">@wraps</span><span class="p">(</span><span class="n">_method</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">proxy_method</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Proxy method.</span>

<span class="sd">            Args:</span>
<span class="sd">                *args: The arguments to pass to the method.</span>
<span class="sd">                **kw: The keyword arguments to pass to the method.</span>

<span class="sd">            Returns:</span>
<span class="sd">                The return value of the proxied method.</span>

<span class="sd">            Raises:</span>
<span class="sd">                TypeError: If the class does not have the attribute specified</span>
<span class="sd">                    in the decorator or if the attribute does not implement</span>
<span class="sd">                    the specified interface.</span>
<span class="sd">                NotImplementedError: If the attribute specified in the</span>
<span class="sd">                    decorator is None, i.e. the interface is not implemented.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="bp">self</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Class &#39;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39; does not have a &#39;</span><span class="si">{</span><span class="n">attribute</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;as specified in the &#39;make_proxy_class&#39; decorator.&quot;</span>
                <span class="p">)</span>
            <span class="n">proxied_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">proxied_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;This &#39;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39; instance does not implement the &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">interface</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39; interface.&quot;</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">proxied_obj</span><span class="p">,</span> <span class="n">interface</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Interface &#39;</span><span class="si">{</span><span class="n">interface</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39; must be implemented by &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;the &#39;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39; &#39;</span><span class="si">{</span><span class="n">attribute</span><span class="si">}</span><span class="s2">&#39; attribute.&quot;</span>
                <span class="p">)</span>
            <span class="n">proxied_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">proxied_obj</span><span class="p">,</span> <span class="n">_method</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">proxied_method</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">F</span><span class="p">,</span> <span class="n">proxy_method</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_inner_decorator</span><span class="p">(</span><span class="n">_cls</span><span class="p">:</span> <span class="n">C</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">C</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Inner proxy class decorator.</span>

<span class="sd">        Args:</span>
<span class="sd">            _cls: The class to decorate.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The decorated class.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the decorated class does not implement the specified</span>
<span class="sd">                interface.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">_cls</span><span class="p">,</span> <span class="n">interface</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Interface &#39;</span><span class="si">{</span><span class="n">interface</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39; must be implemented by &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;the &#39;</span><span class="si">{</span><span class="n">_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39; class.&quot;</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">method_name</span> <span class="ow">in</span> <span class="n">interface</span><span class="o">.</span><span class="n">__abstractmethods__</span><span class="p">:</span>
            <span class="n">original_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">_cls</span><span class="p">,</span> <span class="n">method_name</span><span class="p">)</span>
            <span class="n">method_proxy</span> <span class="o">=</span> <span class="n">make_proxy_method</span><span class="p">(</span><span class="n">_cls</span><span class="p">,</span> <span class="n">original_method</span><span class="p">)</span>
            <span class="c1"># Make sure the proxy method is not considered abstract.</span>
            <span class="n">method_proxy</span><span class="o">.</span><span class="n">__isabstractmethod__</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">_cls</span><span class="p">,</span> <span class="n">method_name</span><span class="p">,</span> <span class="n">method_proxy</span><span class="p">)</span>

        <span class="c1"># Remove the abstract methods in the interface from the decorated class.</span>
        <span class="n">_cls</span><span class="o">.</span><span class="n">__abstractmethods__</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span>
            <span class="n">method_name</span>
            <span class="k">for</span> <span class="n">method_name</span> <span class="ow">in</span> <span class="n">_cls</span><span class="o">.</span><span class="n">__abstractmethods__</span>
            <span class="k">if</span> <span class="n">method_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">interface</span><span class="o">.</span><span class="n">__abstractmethods__</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">_cls</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">_inner_decorator</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.pydantic_utils" class="doc doc-heading">
        <code>pydantic_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utilities for pydantic models.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h4 id="zenml.utils.pydantic_utils.TemplateGenerator" class="doc doc-heading">
        <code>
TemplateGenerator        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Class to generate templates for pydantic models or classes.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/pydantic_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">TemplateGenerator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class to generate templates for pydantic models or classes.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">instance_or_class</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initializes the template generator.</span>

<span class="sd">        Args:</span>
<span class="sd">            instance_or_class: The pydantic model or model class for which to</span>
<span class="sd">                generate a template.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instance_or_class</span> <span class="o">=</span> <span class="n">instance_or_class</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates the template.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The template dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_or_class</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
            <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_template_for_model</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">instance_or_class</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_template_for_model_class</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">instance_or_class</span>
            <span class="p">)</span>

        <span class="c1"># Convert to json in an intermediate step, so we can leverage Pydantic&#39;s</span>
        <span class="c1"># encoder to support types like UUID and datetime</span>
        <span class="n">json_string</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">pydantic_encoder</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_string</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_generate_template_for_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates a template for a pydantic model.</span>

<span class="sd">        Args:</span>
<span class="sd">            model: The model for which to generate the template.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The model template.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_template_for_model_class</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">model_fields_set</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="n">template</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_template_for_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">template</span>

    <span class="k">def</span> <span class="nf">_generate_template_for_model_class</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">model_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates a template for a pydantic model class.</span>

<span class="sd">        Args:</span>
<span class="sd">            model_class: The model class for which to generate the template.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The model class template.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">template</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">model_class</span><span class="o">.</span><span class="n">model_fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">annotation</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">annotation</span>

            <span class="k">if</span> <span class="n">annotation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_model_class</span><span class="p">(</span><span class="n">annotation</span><span class="p">):</span>
                    <span class="n">template</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_template_for_model_class</span><span class="p">(</span>
                        <span class="n">annotation</span>
                    <span class="p">)</span>

                <span class="k">elif</span> <span class="n">typing_utils</span><span class="o">.</span><span class="n">is_optional</span><span class="p">(</span>
                    <span class="n">annotation</span>
                <span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_model_class</span><span class="p">(</span>
                    <span class="n">typing_utils</span><span class="o">.</span><span class="n">get_args</span><span class="p">(</span><span class="n">annotation</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="p">):</span>
                    <span class="n">template</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_template_for_model_class</span><span class="p">(</span>
                        <span class="n">typing_utils</span><span class="o">.</span><span class="n">get_args</span><span class="p">(</span><span class="n">annotation</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">template</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">pydantic_repr</span><span class="o">.</span><span class="n">display_as_type</span><span class="p">(</span><span class="n">annotation</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">template</span>

    <span class="k">def</span> <span class="nf">_generate_template_for_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates a template for an arbitrary value.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: The value for which to generate the template.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The value template.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_template_for_value</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="k">elif</span> <span class="n">sequence_like</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_generate_template_for_value</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_template_for_model</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_is_model_class</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if the given value is a pydantic model class.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: The value to check.</span>

<span class="sd">        Returns:</span>
<span class="sd">            If the value is a pydantic model class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.pydantic_utils.TemplateGenerator.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance_or_class</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Initializes the template generator.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>instance_or_class</code></td>
        <td><code>Union[pydantic.main.BaseModel, Type[pydantic.main.BaseModel]]</code></td>
        <td><p>The pydantic model or model class for which to
generate a template.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/pydantic_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">instance_or_class</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes the template generator.</span>

<span class="sd">    Args:</span>
<span class="sd">        instance_or_class: The pydantic model or model class for which to</span>
<span class="sd">            generate a template.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">instance_or_class</span> <span class="o">=</span> <span class="n">instance_or_class</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.pydantic_utils.TemplateGenerator.run" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Generates the template.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>The template dictionary.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/pydantic_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates the template.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The template dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_or_class</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
        <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_template_for_model</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instance_or_class</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_template_for_model_class</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instance_or_class</span>
        <span class="p">)</span>

    <span class="c1"># Convert to json in an intermediate step, so we can leverage Pydantic&#39;s</span>
    <span class="c1"># encoder to support types like UUID and datetime</span>
    <span class="n">json_string</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">pydantic_encoder</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_string</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="zenml.utils.pydantic_utils.YAMLSerializationMixin" class="doc doc-heading">
        <code>
YAMLSerializationMixin            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Class to serialize/deserialize pydantic models to/from YAML.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/pydantic_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">YAMLSerializationMixin</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class to serialize/deserialize pydantic models to/from YAML.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">yaml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sort_keys</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;YAML string representation..</span>

<span class="sd">        Args:</span>
<span class="sd">            sort_keys: Whether to sort the keys in the YAML representation.</span>
<span class="sd">            **kwargs: Kwargs to pass to the pydantic model_dump(...) method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            YAML string representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dict_</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">),</span> <span class="n">sort_keys</span><span class="o">=</span><span class="n">sort_keys</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">dict_</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="n">sort_keys</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_yaml</span><span class="p">(</span><span class="bp">cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">M</span><span class="p">],</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">M</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates an instance from a YAML file.</span>

<span class="sd">        Args:</span>
<span class="sd">            path: Path to a YAML file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The model instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dict_</span> <span class="o">=</span> <span class="n">yaml_utils</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">dict_</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">
























  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.pydantic_utils.YAMLSerializationMixin.from_yaml" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_yaml</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Creates an instance from a YAML file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>path</code></td>
        <td><code>str</code></td>
        <td><p>Path to a YAML file.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>~M</code></td>
      <td><p>The model instance.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/pydantic_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_yaml</span><span class="p">(</span><span class="bp">cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">M</span><span class="p">],</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">M</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates an instance from a YAML file.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: Path to a YAML file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The model instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dict_</span> <span class="o">=</span> <span class="n">yaml_utils</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">dict_</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.pydantic_utils.YAMLSerializationMixin.yaml" class="doc doc-heading">
<code class="highlight language-python"><span class="n">yaml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>YAML string representation..</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>sort_keys</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to sort the keys in the YAML representation.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Kwargs to pass to the pydantic model_dump(...) method.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>YAML string representation.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/pydantic_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">yaml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sort_keys</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;YAML string representation..</span>

<span class="sd">    Args:</span>
<span class="sd">        sort_keys: Whether to sort the keys in the YAML representation.</span>
<span class="sd">        **kwargs: Kwargs to pass to the pydantic model_dump(...) method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        YAML string representation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dict_</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">),</span> <span class="n">sort_keys</span><span class="o">=</span><span class="n">sort_keys</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">dict_</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="n">sort_keys</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.pydantic_utils.before_validator_handler" class="doc doc-heading">
<code class="highlight language-python"><span class="n">before_validator_handler</span><span class="p">(</span><span class="n">method</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Decorator to handle the raw input data for pydantic model validators.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>method</code></td>
        <td><code>Callable[..., Any]</code></td>
        <td><p>the class method with the actual validation logic.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Callable[[Any, Any, Any], Any]</code></td>
      <td><p>the validator method</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/pydantic_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">before_validator_handler</span><span class="p">(</span>
    <span class="n">method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to handle the raw input data for pydantic model validators.</span>

<span class="sd">    Args:</span>
<span class="sd">        method: the class method with the actual validation logic.</span>

<span class="sd">    Returns:</span>
<span class="sd">        the validator method</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">before_validator</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">],</span> <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">validation_info</span><span class="p">:</span> <span class="n">ValidationInfo</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wrapper method to handle the raw data.</span>

<span class="sd">        Args:</span>
<span class="sd">            cls: the class handler</span>
<span class="sd">            data: the raw input data</span>
<span class="sd">            validation_info: the context of the validation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            the validated data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">model_validator_data_handler</span><span class="p">(</span>
            <span class="n">raw_data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">base_class</span><span class="o">=</span><span class="bp">cls</span><span class="p">,</span> <span class="n">validation_info</span><span class="o">=</span><span class="n">validation_info</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">method</span><span class="p">(</span><span class="bp">cls</span><span class="o">=</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">before_validator</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.pydantic_utils.has_validators" class="doc doc-heading">
<code class="highlight language-python"><span class="n">has_validators</span><span class="p">(</span><span class="n">pydantic_class</span><span class="p">,</span> <span class="n">field_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Function to check if a Pydantic model or a pydantic field has validators.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pydantic_class</code></td>
        <td><code>Type[pydantic.main.BaseModel]</code></td>
        <td><p>The class defining the pydantic model.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>field_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Optional, field info. If specified, this function will focus
on a singular field within the class. If not specified, it will
check model validators.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Whether the specified field or class has a validator or not.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/pydantic_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">has_validators</span><span class="p">(</span>
    <span class="n">pydantic_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">],</span>
    <span class="n">field_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Function to check if a Pydantic model or a pydantic field has validators.</span>

<span class="sd">    Args:</span>
<span class="sd">        pydantic_class: The class defining the pydantic model.</span>
<span class="sd">        field_name: Optional, field info. If specified, this function will focus</span>
<span class="sd">            on a singular field within the class. If not specified, it will</span>
<span class="sd">            check model validators.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Whether the specified field or class has a validator or not.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># If field is not specified check model validators</span>
    <span class="k">if</span> <span class="n">field_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">pydantic_class</span><span class="o">.</span><span class="n">__pydantic_decorators__</span><span class="o">.</span><span class="n">model_validators</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="c1"># Else, check field validators</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># 1. Field validators can be defined through @field_validator decorators</span>
        <span class="n">f_validators</span> <span class="o">=</span> <span class="n">pydantic_class</span><span class="o">.</span><span class="n">__pydantic_decorators__</span><span class="o">.</span><span class="n">field_validators</span>

        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">f_v</span> <span class="ow">in</span> <span class="n">f_validators</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">f_v</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="c1"># 2. Field validators can be defined through the Annotation[.....]</span>
        <span class="n">field_info</span> <span class="o">=</span> <span class="n">pydantic_class</span><span class="o">.</span><span class="n">model_fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">metadata</span> <span class="o">:=</span> <span class="n">field_info</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span>
                <span class="nb">isinstance</span><span class="p">(</span>
                    <span class="n">m</span><span class="p">,</span>
                    <span class="p">(</span>
                        <span class="n">AfterValidator</span><span class="p">,</span>
                        <span class="n">BeforeValidator</span><span class="p">,</span>
                        <span class="n">PlainValidator</span><span class="p">,</span>
                        <span class="n">WrapValidator</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">metadata</span>
            <span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.pydantic_utils.model_validator_data_handler" class="doc doc-heading">
<code class="highlight language-python"><span class="n">model_validator_data_handler</span><span class="p">(</span><span class="n">raw_data</span><span class="p">,</span> <span class="n">base_class</span><span class="p">,</span> <span class="n">validation_info</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Utility function to parse raw input data of varying types to a dict.</p>
<p>With the change to pydantic v2, validators which operate with "before"
(or previously known as the "pre" parameter) are getting "Any" types of raw
input instead of a "Dict[str, Any]" as before. Depending on the use-case,
this can create conflicts after the migration and this function will be
used as a helper function to handle different types of raw input data.</p>
<p>A code snippet to showcase how the behavior changes. The "before" validator
prints the type of the input:</p>
<pre><code>class Base(BaseModel):
    a: int = 3

class MyClass(Base):
    @model_validator(mode="before")
    @classmethod
    def before_validator(cls, data: Any) -&gt; Any:
        print(type(data))
        return {}

one = MyClass() # prints "&lt;class 'dict'&gt;"
MyClass.model_validate(one)  # prints NOTHING, it is already validated
MyClass.model_validate("asdf")  # prints "&lt;class 'str'&gt;", fails without the modified return.
MyClass.model_validate(RandomClass())  # prints "&lt;class 'RandomClass'&gt;", fails without the modified return.
MyClass.model_validate(Base())  # prints "&lt;class 'Base'&gt;", fails without the modified return.
MyClass.model_validate_json(json.dumps("aria"))  # prints "&lt;class 'str'&gt;", fails without the modified return.
MyClass.model_validate_json(json.dumps([1]))  # prints "&lt;class 'list'&gt;", fails without the modified return.
MyClass.model_validate_json(one.model_dump_json())  # prints "&lt;class 'dict'&gt;"
</code></pre>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>raw_data</code></td>
        <td><code>Any</code></td>
        <td><p>The raw data passed to the validator, can be "Any" type.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>base_class</code></td>
        <td><code>Type[pydantic.main.BaseModel]</code></td>
        <td><p>The class that the validator belongs to</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>validation_info</code></td>
        <td><code>ValidationInfo</code></td>
        <td><p>Extra information about the validation process.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>if the type of the data is not processable.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>in case of an unknown validation mode.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A dictionary which will be passed to the eventual validator of pydantic.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/pydantic_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">model_validator_data_handler</span><span class="p">(</span>
    <span class="n">raw_data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">base_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">],</span>
    <span class="n">validation_info</span><span class="p">:</span> <span class="n">ValidationInfo</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Utility function to parse raw input data of varying types to a dict.</span>

<span class="sd">    With the change to pydantic v2, validators which operate with &quot;before&quot;</span>
<span class="sd">    (or previously known as the &quot;pre&quot; parameter) are getting &quot;Any&quot; types of raw</span>
<span class="sd">    input instead of a &quot;Dict[str, Any]&quot; as before. Depending on the use-case,</span>
<span class="sd">    this can create conflicts after the migration and this function will be</span>
<span class="sd">    used as a helper function to handle different types of raw input data.</span>

<span class="sd">    A code snippet to showcase how the behavior changes. The &quot;before&quot; validator</span>
<span class="sd">    prints the type of the input:</span>

<span class="sd">        class Base(BaseModel):</span>
<span class="sd">            a: int = 3</span>

<span class="sd">        class MyClass(Base):</span>
<span class="sd">            @model_validator(mode=&quot;before&quot;)</span>
<span class="sd">            @classmethod</span>
<span class="sd">            def before_validator(cls, data: Any) -&gt; Any:</span>
<span class="sd">                print(type(data))</span>
<span class="sd">                return {}</span>

<span class="sd">        one = MyClass() # prints &quot;&lt;class &#39;dict&#39;&gt;&quot;</span>
<span class="sd">        MyClass.model_validate(one)  # prints NOTHING, it is already validated</span>
<span class="sd">        MyClass.model_validate(&quot;asdf&quot;)  # prints &quot;&lt;class &#39;str&#39;&gt;&quot;, fails without the modified return.</span>
<span class="sd">        MyClass.model_validate(RandomClass())  # prints &quot;&lt;class &#39;RandomClass&#39;&gt;&quot;, fails without the modified return.</span>
<span class="sd">        MyClass.model_validate(Base())  # prints &quot;&lt;class &#39;Base&#39;&gt;&quot;, fails without the modified return.</span>
<span class="sd">        MyClass.model_validate_json(json.dumps(&quot;aria&quot;))  # prints &quot;&lt;class &#39;str&#39;&gt;&quot;, fails without the modified return.</span>
<span class="sd">        MyClass.model_validate_json(json.dumps([1]))  # prints &quot;&lt;class &#39;list&#39;&gt;&quot;, fails without the modified return.</span>
<span class="sd">        MyClass.model_validate_json(one.model_dump_json())  # prints &quot;&lt;class &#39;dict&#39;&gt;&quot;</span>

<span class="sd">    Args:</span>
<span class="sd">        raw_data: The raw data passed to the validator, can be &quot;Any&quot; type.</span>
<span class="sd">        base_class: The class that the validator belongs to</span>
<span class="sd">        validation_info: Extra information about the validation process.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: if the type of the data is not processable.</span>
<span class="sd">        ValueError: in case of an unknown validation mode.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dictionary which will be passed to the eventual validator of pydantic.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">validation_info</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;python&quot;</span><span class="p">:</span>
        <span class="c1"># This is mode is only active if people validate objects using pythonic</span>
        <span class="c1"># raw data such as MyClass(...) or MyClass.model_validate()</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">raw_data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="c1"># In most cases, this is the behavior as the raw input is a dict</span>
            <span class="k">return</span> <span class="n">raw_data</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">raw_data</span><span class="p">,</span> <span class="n">base_class</span><span class="p">):</span>
            <span class="c1"># In some cases, we pass the same object type to the validation</span>
            <span class="c1"># in such cases, it is critical we keep the original structure of</span>
            <span class="c1"># fields that are already set.</span>
            <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">base_class</span><span class="p">,</span> <span class="n">raw_data</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="c1"># There are a few occurrences where the annotation of the field is</span>
            <span class="c1"># denoted by a subclass, and we use the instance of its super class</span>
            <span class="c1"># as the raw input. In such cases we will use the same approach as</span>
            <span class="c1"># before, while raising a debug message.</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;During the validation of a `</span><span class="si">{</span><span class="n">base_class</span><span class="si">}</span><span class="s2">` object, an instance&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;of `</span><span class="si">{</span><span class="n">raw_data</span><span class="o">.</span><span class="vm">__class__</span><span class="si">}</span><span class="s2">` (super class of `</span><span class="si">{</span><span class="n">base_class</span><span class="si">}</span><span class="s2">`) &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;has been passed as raw input. This might lead to unexpected &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;behavior in case `</span><span class="si">{</span><span class="n">base_class</span><span class="si">}</span><span class="s2">` have features which can not&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;be extracted from an instance of a `</span><span class="si">{</span><span class="n">raw_data</span><span class="o">.</span><span class="vm">__class__</span><span class="si">}</span><span class="s2">`.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">raw_data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="c1"># If the raw input is a raw string, we can try to use the `json`</span>
            <span class="c1"># module to parse it. The resulting data needs to be a proper</span>
            <span class="c1"># dict for us to pass it to the validation process.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">json_data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">json_data</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The resulting json data is not a dict!&quot;</span><span class="p">)</span>

            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">JSONDecodeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="s2">&quot;The raw json input string can not be converted to a &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;dict: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;Unsupported type of raw input data for the `python` validation&quot;</span>
                <span class="s2">&quot;mode of the pydantic class. Please consider changing the way &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;you are creating using the `</span><span class="si">{</span><span class="n">base_class</span><span class="si">}</span><span class="s2">` or instead use&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">base_class</span><span class="si">}</span><span class="s2">.model_validate_json()`.&quot;</span>
            <span class="p">)</span>

    <span class="k">elif</span> <span class="n">validation_info</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
        <span class="c1"># This is mode is only active if people validate objects using json</span>
        <span class="c1"># input data such as MyClass.model_validate_json()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">raw_data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">raw_data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The resulting JSON data </span><span class="si">{</span><span class="n">raw_data</span><span class="si">}</span><span class="s2"> is not a dict, therefore&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;can not be used by the validation process.&quot;</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Unknown validation mode</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown validation mode. </span><span class="si">{</span><span class="n">validation_info</span><span class="o">.</span><span class="n">mode</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.pydantic_utils.update_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_model</span><span class="p">(</span><span class="n">original</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exclude_none</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Updates a pydantic model.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>original</code></td>
        <td><code>~M</code></td>
        <td><p>The model to update.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>update</code></td>
        <td><code>Union[BaseModel, Dict[str, Any]]</code></td>
        <td><p>The update values.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>recursive</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code>, dictionary values will be updated recursively.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>exclude_none</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code>, <code>None</code> values in the update will be removed.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>~M</code></td>
      <td><p>The updated model.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/pydantic_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_model</span><span class="p">(</span>
    <span class="n">original</span><span class="p">:</span> <span class="n">M</span><span class="p">,</span>
    <span class="n">update</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;BaseModel&quot;</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
    <span class="n">recursive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">exclude_none</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">M</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a pydantic model.</span>

<span class="sd">    Args:</span>
<span class="sd">        original: The model to update.</span>
<span class="sd">        update: The update values.</span>
<span class="sd">        recursive: If `True`, dictionary values will be updated recursively.</span>
<span class="sd">        exclude_none: If `True`, `None` values in the update will be removed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The updated model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">Dict</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">exclude_none</span><span class="p">:</span>
            <span class="n">update_dict</span> <span class="o">=</span> <span class="n">dict_utils</span><span class="o">.</span><span class="n">remove_none_values</span><span class="p">(</span>
                <span class="n">update</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">update_dict</span> <span class="o">=</span> <span class="n">update</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">update_dict</span> <span class="o">=</span> <span class="n">update</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span>
            <span class="n">exclude_unset</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exclude_none</span><span class="o">=</span><span class="n">exclude_none</span>
        <span class="p">)</span>

    <span class="n">original_dict</span> <span class="o">=</span> <span class="n">original</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">exclude_unset</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">recursive</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">dict_utils</span><span class="o">.</span><span class="n">recursive_update</span><span class="p">(</span><span class="n">original_dict</span><span class="p">,</span> <span class="n">update_dict</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">original_dict</span><span class="p">,</span> <span class="o">**</span><span class="n">update_dict</span><span class="p">}</span>

    <span class="k">return</span> <span class="n">original</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.pydantic_utils.validate_function_args" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_function_args</span><span class="p">(</span><span class="n">__func</span><span class="p">,</span> <span class="n">__config</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Validates arguments passed to a function.</p>
<p>This function validates that all arguments to call the function exist and
that the types match.</p>
<p>It raises a pydantic.ValidationError if the validation fails.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>__func</code></td>
        <td><code>Callable[..., Any]</code></td>
        <td><p>The function for which the arguments are passed.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>__config</code></td>
        <td><code>Optional[pydantic.config.ConfigDict]</code></td>
        <td><p>The pydantic config for the underlying model that is created
to validate the types of the arguments.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>*args</code></td>
        <td><code>Any</code></td>
        <td><p>Function arguments.</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Function keyword arguments.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>The validated arguments.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/pydantic_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">validate_function_args</span><span class="p">(</span>
    <span class="n">__func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">__config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ConfigDict</span><span class="p">],</span>
    <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validates arguments passed to a function.</span>

<span class="sd">    This function validates that all arguments to call the function exist and</span>
<span class="sd">    that the types match.</span>

<span class="sd">    It raises a pydantic.ValidationError if the validation fails.</span>

<span class="sd">    Args:</span>
<span class="sd">        __func: The function for which the arguments are passed.</span>
<span class="sd">        __config: The pydantic config for the underlying model that is created</span>
<span class="sd">            to validate the types of the arguments.</span>
<span class="sd">        *args: Function arguments.</span>
<span class="sd">        **kwargs: Function keyword arguments.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The validated arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">__func</span><span class="p">)</span>

    <span class="n">validated_args</span> <span class="o">=</span> <span class="p">()</span>
    <span class="n">validated_kwargs</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">nonlocal</span> <span class="n">validated_args</span>
        <span class="k">nonlocal</span> <span class="n">validated_kwargs</span>

        <span class="n">validated_args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="n">validated_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>

    <span class="c1"># We create a dummy function with the original function signature to run</span>
    <span class="c1"># pydantic validation without actually running the function code</span>
    <span class="n">f</span><span class="o">.</span><span class="n">__signature__</span> <span class="o">=</span> <span class="n">signature</span>  <span class="c1"># type: ignore[attr-defined]</span>
    <span class="n">f</span><span class="o">.</span><span class="vm">__annotations__</span> <span class="o">=</span> <span class="n">__func</span><span class="o">.</span><span class="vm">__annotations__</span>

    <span class="n">validated_function</span> <span class="o">=</span> <span class="n">validate_call</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">__config</span><span class="p">,</span> <span class="n">validate_return</span><span class="o">=</span><span class="kc">False</span><span class="p">)(</span>
        <span class="n">f</span>
    <span class="p">)</span>

    <span class="c1"># This raises a pydantic.ValidatonError in case the arguments are not valid</span>
    <span class="n">validated_function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">signature</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="o">*</span><span class="n">validated_args</span><span class="p">,</span> <span class="o">**</span><span class="n">validated_kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">arguments</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.secret_utils" class="doc doc-heading">
        <code>secret_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utility functions for secrets and secret references.</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-class">



<h4 id="zenml.utils.secret_utils.SecretReference" class="doc doc-heading">
        <code>
SecretReference            (<span title="tuple">tuple</span>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Class representing a secret reference.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The secret name.</p></td>
      </tr>
      <tr>
        <td><code>key</code></td>
        <td><code>str</code></td>
        <td><p>The secret key.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/secret_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SecretReference</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class representing a secret reference.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name: The secret name.</span>
<span class="sd">        key: The secret key.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">key</span><span class="p">:</span> <span class="nb">str</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">











  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.secret_utils.SecretReference.__getnewargs__" class="doc doc-heading">
<code class="highlight language-python"><span class="n">__getnewargs__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Return self as a plain tuple.  Used by copy and pickle.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/secret_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">__getnewargs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="s1">&#39;Return self as a plain tuple.  Used by copy and pickle.&#39;</span>
    <span class="k">return</span> <span class="n">_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.secret_utils.SecretReference.__new__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__new__</span><span class="p">(</span><span class="n">_cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Create new instance of SecretReference(name, key)</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.secret_utils.SecretReference.__repr__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Return a nicely formatted representation string</p>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/secret_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="s1">&#39;Return a nicely formatted representation string&#39;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="n">repr_fmt</span> <span class="o">%</span> <span class="bp">self</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.secret_utils.ClearTextField" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ClearTextField</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Marks a pydantic field to prevent secret references.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>*args</code></td>
        <td><code>Any</code></td>
        <td><p>Positional arguments which will be forwarded
to <code>pydantic.Field(...)</code>.</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Keyword arguments which will be forwarded to
<code>pydantic.Field(...)</code>.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>Pydantic field info.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/secret_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ClearTextField</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Marks a pydantic field to prevent secret references.</span>

<span class="sd">    Args:</span>
<span class="sd">        *args: Positional arguments which will be forwarded</span>
<span class="sd">            to `pydantic.Field(...)`.</span>
<span class="sd">        **kwargs: Keyword arguments which will be forwarded to</span>
<span class="sd">            `pydantic.Field(...)`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Pydantic field info.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">json_schema_extra</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;json_schema_extra&quot;</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">json_schema_extra</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">PYDANTIC_CLEAR_TEXT_FIELD_MARKER</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">Field</span><span class="p">(</span><span class="n">json_schema_extra</span><span class="o">=</span><span class="n">json_schema_extra</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>  <span class="c1"># type: ignore[pydantic-field]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.secret_utils.SecretField" class="doc doc-heading">
<code class="highlight language-python"><span class="n">SecretField</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Marks a pydantic field as something containing sensitive information.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>*args</code></td>
        <td><code>Any</code></td>
        <td><p>Positional arguments which will be forwarded
to <code>pydantic.Field(...)</code>.</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Keyword arguments which will be forwarded to
<code>pydantic.Field(...)</code>.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>Pydantic field info.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/secret_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">SecretField</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Marks a pydantic field as something containing sensitive information.</span>

<span class="sd">    Args:</span>
<span class="sd">        *args: Positional arguments which will be forwarded</span>
<span class="sd">            to `pydantic.Field(...)`.</span>
<span class="sd">        **kwargs: Keyword arguments which will be forwarded to</span>
<span class="sd">            `pydantic.Field(...)`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Pydantic field info.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">json_schema_extra</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;json_schema_extra&quot;</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">json_schema_extra</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">PYDANTIC_SENSITIVE_FIELD_MARKER</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">Field</span><span class="p">(</span><span class="n">json_schema_extra</span><span class="o">=</span><span class="n">json_schema_extra</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>  <span class="c1"># type: ignore[pydantic-field]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.secret_utils.is_clear_text_field" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_clear_text_field</span><span class="p">(</span><span class="n">field</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Returns whether a pydantic field prevents secret references or not.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>field</code></td>
        <td><code>FieldInfo</code></td>
        <td><p>The field to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p><code>True</code> if the field prevents secret references, <code>False</code> otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/secret_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_clear_text_field</span><span class="p">(</span><span class="n">field</span><span class="p">:</span> <span class="s2">&quot;FieldInfo&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns whether a pydantic field prevents secret references or not.</span>

<span class="sd">    Args:</span>
<span class="sd">        field: The field to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        `True` if the field prevents secret references, `False` otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">json_schema_extra</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">json_schema_extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">marker</span> <span class="o">:=</span> <span class="n">field</span><span class="o">.</span><span class="n">json_schema_extra</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">PYDANTIC_CLEAR_TEXT_FIELD_MARKER</span>
            <span class="p">):</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">marker</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The parameter `</span><span class="si">{</span><span class="n">PYDANTIC_CLEAR_TEXT_FIELD_MARKER</span><span class="si">}</span><span class="s2">` in the &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;field definition can only be a boolean value.&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">marker</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The &#39;json_schema_extra&#39; of the field &#39;</span><span class="si">{</span><span class="n">field</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39; is &quot;</span>
                <span class="s2">&quot;not defined as a dict. This might lead to unexpected &quot;</span>
                <span class="s2">&quot;behavior as we are checking it is a clear text field. &quot;</span>
                <span class="s2">&quot;Returning &#39;False&#39; as default...&quot;</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.secret_utils.is_secret_field" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_secret_field</span><span class="p">(</span><span class="n">field</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Returns whether a pydantic field contains sensitive information or not.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>field</code></td>
        <td><code>FieldInfo</code></td>
        <td><p>The field to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p><code>True</code> if the field contains sensitive information, <code>False</code> otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/secret_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_secret_field</span><span class="p">(</span><span class="n">field</span><span class="p">:</span> <span class="s2">&quot;FieldInfo&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns whether a pydantic field contains sensitive information or not.</span>

<span class="sd">    Args:</span>
<span class="sd">        field: The field to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        `True` if the field contains sensitive information, `False` otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">json_schema_extra</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">json_schema_extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">marker</span> <span class="o">:=</span> <span class="n">field</span><span class="o">.</span><span class="n">json_schema_extra</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">PYDANTIC_SENSITIVE_FIELD_MARKER</span>
            <span class="p">):</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">marker</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The parameter `</span><span class="si">{</span><span class="n">PYDANTIC_SENSITIVE_FIELD_MARKER</span><span class="si">}</span><span class="s2">` in the &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;field definition can only be a boolean value.&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">marker</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The &#39;json_schema_extra&#39; of the field &#39;</span><span class="si">{</span><span class="n">field</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39; is &quot;</span>
                <span class="s2">&quot;not defined as a dict. This might lead to unexpected &quot;</span>
                <span class="s2">&quot;behavior as we are checking it is a secret text field. &quot;</span>
                <span class="s2">&quot;Returning &#39;False&#39; as default...&quot;</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.secret_utils.is_secret_reference" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_secret_reference</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks whether any value is a secret reference.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>value</code></td>
        <td><code>Any</code></td>
        <td><p>The value to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p><code>True</code> if the value is a secret reference, <code>False</code> otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/secret_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_secret_reference</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks whether any value is a secret reference.</span>

<span class="sd">    Args:</span>
<span class="sd">        value: The value to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        `True` if the value is a secret reference, `False` otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">_secret_reference_expression</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.secret_utils.parse_secret_reference" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_secret_reference</span><span class="p">(</span><span class="n">reference</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Parses a secret reference.</p>
<p>This function assumes the input string is a valid secret reference and
<strong>does not</strong> perform any additional checks. If you pass an invalid secret
reference here, this will most likely crash.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>reference</code></td>
        <td><code>str</code></td>
        <td><p>The string representing a <strong>valid</strong> secret reference.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>SecretReference</code></td>
      <td><p>The parsed secret reference.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/secret_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_secret_reference</span><span class="p">(</span><span class="n">reference</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SecretReference</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parses a secret reference.</span>

<span class="sd">    This function assumes the input string is a valid secret reference and</span>
<span class="sd">    **does not** perform any additional checks. If you pass an invalid secret</span>
<span class="sd">    reference here, this will most likely crash.</span>

<span class="sd">    Args:</span>
<span class="sd">        reference: The string representing a **valid** secret reference.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The parsed secret reference.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">reference</span> <span class="o">=</span> <span class="n">reference</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
    <span class="n">reference</span> <span class="o">=</span> <span class="n">reference</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

    <span class="n">secret_name</span><span class="p">,</span> <span class="n">secret_key</span> <span class="o">=</span> <span class="n">reference</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">secret_name</span><span class="p">,</span> <span class="n">secret_key</span> <span class="o">=</span> <span class="n">secret_name</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">secret_key</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">SecretReference</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">secret_name</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">secret_key</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.settings_utils" class="doc doc-heading">
        <code>settings_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utility functions for ZenML settings.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.settings_utils.get_flavor_setting_key" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_flavor_setting_key</span><span class="p">(</span><span class="n">flavor</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Gets the setting key for a flavor.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>flavor</code></td>
        <td><code>Flavor</code></td>
        <td><p>The flavor for which to get the key.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The setting key for the flavor.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/settings_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_flavor_setting_key</span><span class="p">(</span><span class="n">flavor</span><span class="p">:</span> <span class="s2">&quot;Flavor&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the setting key for a flavor.</span>

<span class="sd">    Args:</span>
<span class="sd">        flavor: The flavor for which to get the key.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The setting key for the flavor.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">flavor</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">flavor</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.settings_utils.get_general_settings" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_general_settings</span><span class="p">()</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Returns all general settings.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Type[BaseSettings]]</code></td>
      <td><p>Dictionary mapping general settings keys to their type.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/settings_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_general_settings</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseSettings&quot;</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns all general settings.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dictionary mapping general settings keys to their type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">zenml.config</span> <span class="kn">import</span> <span class="n">DockerSettings</span><span class="p">,</span> <span class="n">ResourceSettings</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="n">DOCKER_SETTINGS_KEY</span><span class="p">:</span> <span class="n">DockerSettings</span><span class="p">,</span>
        <span class="n">RESOURCE_SETTINGS_KEY</span><span class="p">:</span> <span class="n">ResourceSettings</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.settings_utils.get_stack_component_for_settings_key" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_stack_component_for_settings_key</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">stack</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Gets the stack component of a stack for a given settings key.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>key</code></td>
        <td><code>str</code></td>
        <td><p>The settings key for which to get the component.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>stack</code></td>
        <td><code>Stack</code></td>
        <td><p>The stack from which to get the component.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the key is invalid or the stack does not contain a
component of the correct flavor.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>StackComponent</code></td>
      <td><p>The stack component.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/settings_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_stack_component_for_settings_key</span><span class="p">(</span>
    <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">stack</span><span class="p">:</span> <span class="s2">&quot;Stack&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;StackComponent&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the stack component of a stack for a given settings key.</span>

<span class="sd">    Args:</span>
<span class="sd">        key: The settings key for which to get the component.</span>
<span class="sd">        stack: The stack from which to get the component.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the key is invalid or the stack does not contain a</span>
<span class="sd">            component of the correct flavor.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The stack component.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_stack_component_setting_key</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Settings key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> does not refer to a stack component.&quot;</span>
        <span class="p">)</span>

    <span class="n">component_type</span><span class="p">,</span> <span class="n">flavor</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">stack_component</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">StackComponentType</span><span class="p">(</span><span class="n">component_type</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">stack_component</span> <span class="ow">or</span> <span class="n">stack_component</span><span class="o">.</span><span class="n">flavor</span> <span class="o">!=</span> <span class="n">flavor</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Component of type </span><span class="si">{</span><span class="n">component_type</span><span class="si">}</span><span class="s2"> in stack </span><span class="si">{</span><span class="n">stack</span><span class="si">}</span><span class="s2"> is not &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;of the flavor </span><span class="si">{</span><span class="n">flavor</span><span class="si">}</span><span class="s2"> specified by the settings key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">stack_component</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.settings_utils.get_stack_component_setting_key" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_stack_component_setting_key</span><span class="p">(</span><span class="n">stack_component</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Gets the setting key for a stack component.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>stack_component</code></td>
        <td><code>StackComponent</code></td>
        <td><p>The stack component for which to get the key.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The setting key for the stack component.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/settings_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_stack_component_setting_key</span><span class="p">(</span><span class="n">stack_component</span><span class="p">:</span> <span class="s2">&quot;StackComponent&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the setting key for a stack component.</span>

<span class="sd">    Args:</span>
<span class="sd">        stack_component: The stack component for which to get the key.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The setting key for the stack component.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">stack_component</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">stack_component</span><span class="o">.</span><span class="n">flavor</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.settings_utils.is_general_setting_key" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_general_setting_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks whether the key refers to a general setting.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>key</code></td>
        <td><code>str</code></td>
        <td><p>The key to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>If the key refers to a general setting.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/settings_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_general_setting_key</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks whether the key refers to a general setting.</span>

<span class="sd">    Args:</span>
<span class="sd">        key: The key to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        If the key refers to a general setting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">get_general_settings</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.settings_utils.is_stack_component_setting_key" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_stack_component_setting_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks whether a settings key refers to a stack component.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>key</code></td>
        <td><code>str</code></td>
        <td><p>The key to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>If the key refers to a stack component.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/settings_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_stack_component_setting_key</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks whether a settings key refers to a stack component.</span>

<span class="sd">    Args:</span>
<span class="sd">        key: The key to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        If the key refers to a stack component.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">STACK_COMPONENT_REGEX</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.settings_utils.is_valid_setting_key" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_valid_setting_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks whether a settings key is valid.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>key</code></td>
        <td><code>str</code></td>
        <td><p>The key to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>If the key is valid.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/settings_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_valid_setting_key</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks whether a settings key is valid.</span>

<span class="sd">    Args:</span>
<span class="sd">        key: The key to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        If the key is valid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">is_general_setting_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">or</span> <span class="n">is_stack_component_setting_key</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.settings_utils.validate_setting_keys" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_setting_keys</span><span class="p">(</span><span class="n">setting_keys</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Validates settings keys.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>setting_keys</code></td>
        <td><code>Sequence[str]</code></td>
        <td><p>The keys to validate.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If any key is invalid.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/settings_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">validate_setting_keys</span><span class="p">(</span><span class="n">setting_keys</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validates settings keys.</span>

<span class="sd">    Args:</span>
<span class="sd">        setting_keys: The keys to validate.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If any key is invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">setting_keys</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid_setting_key</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid setting key `</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">`. Setting keys can either refer &quot;</span>
                <span class="s2">&quot;to general settings (available keys: &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">get_general_settings</span><span class="p">())</span><span class="si">}</span><span class="s2">) or stack component specific &quot;</span>
                <span class="s2">&quot;settings. Stack component specific keys are of the format &quot;</span>
                <span class="s2">&quot;`&lt;STACK_COMPONENT_TYPE&gt;.&lt;STACK_COMPONENT_FLAVOR&gt;`.&quot;</span>
            <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.singleton" class="doc doc-heading">
        <code>singleton</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utility class to turn classes into singleton classes.</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="zenml.utils.singleton.SingletonMetaClass" class="doc doc-heading">
        <code>
SingletonMetaClass            (<span title="type">type</span>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Singleton metaclass.</p>
<p>Use this metaclass to make any class into a singleton class:</p>
<pre><code class="language-python">class OneRing(metaclass=SingletonMetaClass):
    def __init__(self, owner):
        self._owner = owner

    @property
    def owner(self):
        return self._owner

the_one_ring = OneRing('Sauron')
the_lost_ring = OneRing('Frodo')
print(the_lost_ring.owner)  # Sauron
OneRing._clear() # ring destroyed
</code></pre>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/singleton.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SingletonMetaClass</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Singleton metaclass.</span>

<span class="sd">    Use this metaclass to make any class into a singleton class:</span>

<span class="sd">    ```python</span>
<span class="sd">    class OneRing(metaclass=SingletonMetaClass):</span>
<span class="sd">        def __init__(self, owner):</span>
<span class="sd">            self._owner = owner</span>

<span class="sd">        @property</span>
<span class="sd">        def owner(self):</span>
<span class="sd">            return self._owner</span>

<span class="sd">    the_one_ring = OneRing(&#39;Sauron&#39;)</span>
<span class="sd">    the_lost_ring = OneRing(&#39;Frodo&#39;)</span>
<span class="sd">    print(the_lost_ring.owner)  # Sauron</span>
<span class="sd">    OneRing._clear() # ring destroyed</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a singleton class.</span>

<span class="sd">        Args:</span>
<span class="sd">            *args: Additional arguments.</span>
<span class="sd">            **kwargs: Additional keyword arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">__singleton_instance</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;SingletonMetaClass&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SingletonMetaClass&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create or return the singleton instance.</span>

<span class="sd">        Args:</span>
<span class="sd">            *args: Additional arguments.</span>
<span class="sd">            **kwargs: Additional keyword arguments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The singleton instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__singleton_instance</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">__singleton_instance</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
                <span class="s2">&quot;SingletonMetaClass&quot;</span><span class="p">,</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__singleton_instance</span>

    <span class="k">def</span> <span class="nf">_clear</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the singleton instance.&quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">__singleton_instance</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_exists</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the singleton instance exists.</span>

<span class="sd">        Returns:</span>
<span class="sd">            `True` if the singleton instance exists, `False` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__singleton_instance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.singleton.SingletonMetaClass.__call__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__call__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Create or return the singleton instance.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>*args</code></td>
        <td><code>Any</code></td>
        <td><p>Additional arguments.</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>SingletonMetaClass</code></td>
      <td><p>The singleton instance.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/singleton.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SingletonMetaClass&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create or return the singleton instance.</span>

<span class="sd">    Args:</span>
<span class="sd">        *args: Additional arguments.</span>
<span class="sd">        **kwargs: Additional keyword arguments.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The singleton instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__singleton_instance</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">__singleton_instance</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
            <span class="s2">&quot;SingletonMetaClass&quot;</span><span class="p">,</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__singleton_instance</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.singleton.SingletonMetaClass.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Initialize a singleton class.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>*args</code></td>
        <td><code>Any</code></td>
        <td><p>Additional arguments.</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/singleton.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize a singleton class.</span>

<span class="sd">    Args:</span>
<span class="sd">        *args: Additional arguments.</span>
<span class="sd">        **kwargs: Additional keyword arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">__singleton_instance</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;SingletonMetaClass&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.source_code_utils" class="doc doc-heading">
        <code>source_code_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utilities for getting the source code of objects.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.source_code_utils.get_hashed_source_code" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_hashed_source_code</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Returns a hash of the objects source code.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>value</code></td>
        <td><code>Any</code></td>
        <td><p>object to get source from.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Hash of source code.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If unable to compute the hash.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/source_code_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_hashed_source_code</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a hash of the objects source code.</span>

<span class="sd">    Args:</span>
<span class="sd">        value: object to get source from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Hash of source code.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If unable to compute the hash.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">source_code</span> <span class="o">=</span> <span class="n">get_source_code</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to compute the hash of source code of object: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">source_code</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.source_code_utils.get_source_code" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_source_code</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Returns the source code of an object.</p>
<p>If executing within a IPython kernel environment, then this monkey-patches
<code>inspect</code> module temporarily with a workaround to get source from the cell.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>value</code></td>
        <td><code>Any</code></td>
        <td><p>object to get source from.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Source code of object.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/source_code_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_source_code</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the source code of an object.</span>

<span class="sd">    If executing within a IPython kernel environment, then this monkey-patches</span>
<span class="sd">    `inspect` module temporarily with a workaround to get source from the cell.</span>

<span class="sd">    Args:</span>
<span class="sd">        value: object to get source from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Source code of object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">Environment</span><span class="o">.</span><span class="n">in_notebook</span><span class="p">():</span>
        <span class="c1"># Monkey patch inspect.getfile temporarily to make getsource work.</span>
        <span class="c1"># Source: https://stackoverflow.com/questions/51566497/</span>
        <span class="k">def</span> <span class="nf">_new_getfile</span><span class="p">(</span>
            <span class="nb">object</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
            <span class="n">_old_getfile</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span>
                <span class="p">[</span>
                    <span class="n">Union</span><span class="p">[</span>
                        <span class="n">ModuleType</span><span class="p">,</span>
                        <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span>
                        <span class="n">MethodType</span><span class="p">,</span>
                        <span class="n">FunctionType</span><span class="p">,</span>
                        <span class="n">TracebackType</span><span class="p">,</span>
                        <span class="n">FrameType</span><span class="p">,</span>
                        <span class="n">CodeType</span><span class="p">,</span>
                        <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
                    <span class="p">]</span>
                <span class="p">],</span>
                <span class="nb">str</span><span class="p">,</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">_old_getfile</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>

            <span class="c1"># Lookup by parent module (as in current inspect)</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="s2">&quot;__module__&quot;</span><span class="p">):</span>
                <span class="n">object_</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">object</span><span class="o">.</span><span class="vm">__module__</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">object_</span><span class="p">,</span> <span class="s2">&quot;__file__&quot;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">object_</span><span class="o">.</span><span class="vm">__file__</span>  <span class="c1"># type: ignore[union-attr]</span>

            <span class="c1"># If parent module is __main__, lookup by methods</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">inspect</span><span class="o">.</span><span class="n">isfunction</span><span class="p">(</span><span class="n">member</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="nb">object</span><span class="o">.</span><span class="vm">__qualname__</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">member</span><span class="o">.</span><span class="vm">__name__</span>
                    <span class="o">==</span> <span class="n">member</span><span class="o">.</span><span class="vm">__qualname__</span>
                <span class="p">):</span>
                    <span class="k">return</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="n">member</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Source for </span><span class="si">{</span><span class="nb">object</span><span class="si">!r}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>

        <span class="c1"># Monkey patch, compute source, then revert monkey patch.</span>
        <span class="n">_old_getfile</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span>
        <span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span> <span class="o">=</span> <span class="n">_new_getfile</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">src</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getsource</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span> <span class="o">=</span> <span class="n">_old_getfile</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Use standard inspect if running outside a notebook</span>
        <span class="n">src</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getsource</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">src</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.source_utils" class="doc doc-heading">
        <code>source_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utilities for loading/resolving objects.</p>



  <div class="doc doc-children">














  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.source_utils.get_resolved_notebook_sources" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_resolved_notebook_sources</span><span class="p">()</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Get all notebook sources that were resolved in this process.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, str]</code></td>
      <td><p>Dictionary mapping the import path of notebook sources to the code
of their notebook cell.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/source_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_resolved_notebook_sources</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get all notebook sources that were resolved in this process.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dictionary mapping the import path of notebook sources to the code</span>
<span class="sd">        of their notebook cell.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_resolved_notebook_sources</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.source_utils.get_source_root" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_source_root</span><span class="p">()</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Get the source root.</p>
<p>The source root will be determined in the following order:
- The manually specified custom source root if it was set.
- The ZenML repository directory if one exists in the current working
  directory or any parent directories.
- The parent directory of the main module file.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The source root.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If the main module file can't be found.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/source_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_source_root</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the source root.</span>

<span class="sd">    The source root will be determined in the following order:</span>
<span class="sd">    - The manually specified custom source root if it was set.</span>
<span class="sd">    - The ZenML repository directory if one exists in the current working</span>
<span class="sd">      directory or any parent directories.</span>
<span class="sd">    - The parent directory of the main module file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The source root.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the main module file can&#39;t be found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">_CUSTOM_SOURCE_ROOT</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Using custom source root: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">_CUSTOM_SOURCE_ROOT</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_CUSTOM_SOURCE_ROOT</span>

    <span class="kn">from</span> <span class="nn">zenml.client</span> <span class="kn">import</span> <span class="n">Client</span>

    <span class="n">repo_root</span> <span class="o">=</span> <span class="n">Client</span><span class="o">.</span><span class="n">find_repository</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">repo_root</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Using repository root as source root: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">repo_root</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">repo_root</span><span class="o">.</span><span class="n">resolve</span><span class="p">())</span>

    <span class="n">main_module</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;__main__&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">main_module</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Unable to determine source root because the main module could not &quot;</span>
            <span class="s2">&quot;be found.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">main_module</span><span class="p">,</span> <span class="s2">&quot;__file__&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">main_module</span><span class="o">.</span><span class="vm">__file__</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Unable to determine source root because the main module does not &quot;</span>
            <span class="s2">&quot;have an associated file. This could be because you&#39;re running in &quot;</span>
            <span class="s2">&quot;an interactive Python environment. If you are trying to run from &quot;</span>
            <span class="s2">&quot;within a Jupyter notebook, please run `zenml init` from the root &quot;</span>
            <span class="s2">&quot;where your notebook is located and restart your notebook server.   &quot;</span>
        <span class="p">)</span>

    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">main_module</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Using main module parent directory as source root: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.source_utils.get_source_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_source_type</span><span class="p">(</span><span class="n">module</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Get the type of a source.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>module</code></td>
        <td><code>module</code></td>
        <td><p>The module for which to get the source type.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>SourceType</code></td>
      <td><p>The source type.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/source_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_source_type</span><span class="p">(</span><span class="n">module</span><span class="p">:</span> <span class="n">ModuleType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SourceType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the type of a source.</span>

<span class="sd">    Args:</span>
<span class="sd">        module: The module for which to get the source type.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The source type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">module</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">in</span> <span class="n">_notebook_modules</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">SourceType</span><span class="o">.</span><span class="n">NOTEBOOK</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">module</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span> <span class="ow">and</span> <span class="n">Environment</span><span class="o">.</span><span class="n">in_notebook</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">SourceType</span><span class="o">.</span><span class="n">NOTEBOOK</span>

        <span class="k">return</span> <span class="n">SourceType</span><span class="o">.</span><span class="n">BUILTIN</span>

    <span class="k">if</span> <span class="n">is_internal_module</span><span class="p">(</span><span class="n">module_name</span><span class="o">=</span><span class="n">module</span><span class="o">.</span><span class="vm">__name__</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">SourceType</span><span class="o">.</span><span class="n">INTERNAL</span>

    <span class="k">if</span> <span class="n">is_distribution_package_file</span><span class="p">(</span>
        <span class="n">file_path</span><span class="o">=</span><span class="n">file_path</span><span class="p">,</span> <span class="n">module_name</span><span class="o">=</span><span class="n">module</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="p">):</span>
        <span class="k">return</span> <span class="n">SourceType</span><span class="o">.</span><span class="n">DISTRIBUTION_PACKAGE</span>

    <span class="k">if</span> <span class="n">is_standard_lib_file</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">file_path</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">SourceType</span><span class="o">.</span><span class="n">BUILTIN</span>

    <span class="c1"># Make sure to check for distribution packages before this to catch the</span>
    <span class="c1"># case when a virtual environment is inside our source root</span>
    <span class="k">if</span> <span class="n">is_user_file</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">file_path</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">SourceType</span><span class="o">.</span><span class="n">USER</span>

    <span class="k">return</span> <span class="n">SourceType</span><span class="o">.</span><span class="n">UNKNOWN</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.source_utils.is_distribution_package_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_distribution_package_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">module_name</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks if a file/module belongs to a distribution package.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>file_path</code></td>
        <td><code>str</code></td>
        <td><p>The file path to check.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>module_name</code></td>
        <td><code>str</code></td>
        <td><p>The module name.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if the file/module belongs to a distribution package, False
otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/source_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_distribution_package_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">module_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if a file/module belongs to a distribution package.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_path: The file path to check.</span>
<span class="sd">        module_name: The module name.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the file/module belongs to a distribution package, False</span>
<span class="sd">        otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">absolute_file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">site</span><span class="o">.</span><span class="n">getsitepackages</span><span class="p">()</span> <span class="o">+</span> <span class="p">[</span><span class="n">site</span><span class="o">.</span><span class="n">getusersitepackages</span><span class="p">()]:</span>
        <span class="k">if</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span> <span class="ow">in</span> <span class="n">absolute_file_path</span><span class="o">.</span><span class="n">parents</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="c1"># TODO: The previous check does not detect editable installs because</span>
    <span class="c1"># the site packages dir only contains a reference to the source files,</span>
    <span class="c1"># not the actual files. That means currently editable installs get a</span>
    <span class="c1"># source type UNKNOWN which might or might not lead to issues.</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.source_utils.is_internal_module" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_internal_module</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks if a module is internal (=part of the zenml package).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>module_name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the module to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if the module is internal, False otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/source_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_internal_module</span><span class="p">(</span><span class="n">module_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if a module is internal (=part of the zenml package).</span>

<span class="sd">    Args:</span>
<span class="sd">        module_name: Name of the module to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the module is internal, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">module_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;zenml&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.source_utils.is_standard_lib_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_standard_lib_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks if a file belongs to the Python standard library.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>file_path</code></td>
        <td><code>str</code></td>
        <td><p>The file path to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if the file belongs to the Python standard library, False
otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/source_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_standard_lib_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if a file belongs to the Python standard library.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_path: The file path to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the file belongs to the Python standard library, False</span>
<span class="sd">        otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">stdlib_root</span> <span class="o">=</span> <span class="n">get_python_lib</span><span class="p">(</span><span class="n">standard_lib</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Standard library root: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">stdlib_root</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">stdlib_root</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parents</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.source_utils.is_user_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_user_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks if a file is a user file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>file_path</code></td>
        <td><code>str</code></td>
        <td><p>The file path to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if the file is a user file, False otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/source_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_user_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if a file is a user file.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_path: The file path to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the file is a user file, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">source_root</span> <span class="o">=</span> <span class="n">get_source_root</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">source_root</span><span class="p">)</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parents</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.source_utils.load" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load</span><span class="p">(</span><span class="n">source</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Load a source or import path.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>Union[zenml.config.source.Source, str]</code></td>
        <td><p>The source to load.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>The loaded object.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/source_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="n">source</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Source</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a source or import path.</span>

<span class="sd">    Args:</span>
<span class="sd">        source: The source to load.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The loaded object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">Source</span><span class="o">.</span><span class="n">from_import_path</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

    <span class="c1"># The types of some objects don&#39;t exist in the `builtin` module</span>
    <span class="c1"># so we need to manually handle it here</span>
    <span class="k">if</span> <span class="n">source</span><span class="o">.</span><span class="n">import_path</span> <span class="o">==</span> <span class="n">NoneTypeSource</span><span class="o">.</span><span class="n">import_path</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">NoneType</span>
    <span class="k">elif</span> <span class="n">source</span><span class="o">.</span><span class="n">import_path</span> <span class="o">==</span> <span class="n">FunctionTypeSource</span><span class="o">.</span><span class="n">import_path</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">FunctionType</span>
    <span class="k">elif</span> <span class="n">source</span><span class="o">.</span><span class="n">import_path</span> <span class="o">==</span> <span class="n">BuiltinFunctionTypeSource</span><span class="o">.</span><span class="n">import_path</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">BuiltinFunctionType</span>

    <span class="n">import_root</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">source</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">SourceType</span><span class="o">.</span><span class="n">CODE_REPOSITORY</span><span class="p">:</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">CodeRepositorySource</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">source</span><span class="p">))</span>
        <span class="n">_warn_about_potential_source_loading_issues</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>
        <span class="n">import_root</span> <span class="o">=</span> <span class="n">get_source_root</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">source</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">SourceType</span><span class="o">.</span><span class="n">DISTRIBUTION_PACKAGE</span><span class="p">:</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">DistributionPackageSource</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">source</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">source</span><span class="o">.</span><span class="n">version</span><span class="p">:</span>
            <span class="n">current_package_version</span> <span class="o">=</span> <span class="n">_get_package_version</span><span class="p">(</span>
                <span class="n">package_name</span><span class="o">=</span><span class="n">source</span><span class="o">.</span><span class="n">package_name</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">current_package_version</span> <span class="o">!=</span> <span class="n">source</span><span class="o">.</span><span class="n">version</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;The currently installed version `</span><span class="si">%s</span><span class="s2">` of package `</span><span class="si">%s</span><span class="s2">` &quot;</span>
                    <span class="s2">&quot;does not match the source version `</span><span class="si">%s</span><span class="s2">`. This might lead &quot;</span>
                    <span class="s2">&quot;to unexpected behavior when using the source object `</span><span class="si">%s</span><span class="s2">`.&quot;</span><span class="p">,</span>
                    <span class="n">current_package_version</span><span class="p">,</span>
                    <span class="n">source</span><span class="o">.</span><span class="n">package_name</span><span class="p">,</span>
                    <span class="n">source</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
                    <span class="n">source</span><span class="o">.</span><span class="n">import_path</span><span class="p">,</span>
                <span class="p">)</span>
    <span class="k">elif</span> <span class="n">source</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">SourceType</span><span class="o">.</span><span class="n">NOTEBOOK</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">Environment</span><span class="o">.</span><span class="n">in_notebook</span><span class="p">():</span>
            <span class="c1"># If we&#39;re in a notebook, we don&#39;t need to do anything as the</span>
            <span class="c1"># loading from the __main__ module should work just fine.</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">notebook_source</span> <span class="o">=</span> <span class="n">NotebookSource</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">source</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">_try_to_load_notebook_source</span><span class="p">(</span><span class="n">notebook_source</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">source</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">SourceType</span><span class="o">.</span><span class="n">USER</span><span class="p">,</span> <span class="n">SourceType</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">}:</span>
        <span class="c1"># Unknown source might also refer to a user file, include source</span>
        <span class="c1"># root in python path just to be sure</span>
        <span class="n">import_root</span> <span class="o">=</span> <span class="n">get_source_root</span><span class="p">()</span>

    <span class="n">module</span> <span class="o">=</span> <span class="n">_load_module</span><span class="p">(</span><span class="n">module_name</span><span class="o">=</span><span class="n">source</span><span class="o">.</span><span class="n">module</span><span class="p">,</span> <span class="n">import_root</span><span class="o">=</span><span class="n">import_root</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">source</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">source</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">module</span>

    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.source_utils.load_and_validate_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_and_validate_class</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">expected_class</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Loads a source class and validates its class.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>Union[str, zenml.config.source.Source]</code></td>
        <td><p>The source.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>expected_class</code></td>
        <td><code>Type[Any]</code></td>
        <td><p>The class that the source should resolve to.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If the source does not resolve to the expected class.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[Any]</code></td>
      <td><p>The resolved source class.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/source_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">load_and_validate_class</span><span class="p">(</span>
    <span class="n">source</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Source</span><span class="p">],</span> <span class="n">expected_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Loads a source class and validates its class.</span>

<span class="sd">    Args:</span>
<span class="sd">        source: The source.</span>
<span class="sd">        expected_class: The class that the source should resolve to.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If the source does not resolve to the expected class.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The resolved source class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">expected_class</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Error while loading `</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2">`. Expected class &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expected_class</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">, got </span><span class="si">{</span><span class="n">obj</span><span class="si">}</span><span class="s2"> instead.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.source_utils.prepend_python_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">prepend_python_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Context manager to temporarily prepend a path to the python path.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>path</code></td>
        <td><code>str</code></td>
        <td><p>Path that will be prepended to sys.path for the duration of
the context manager.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Yields:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Iterator[NoneType]</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/source_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@contextlib</span><span class="o">.</span><span class="n">contextmanager</span>
<span class="k">def</span> <span class="nf">prepend_python_path</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Context manager to temporarily prepend a path to the python path.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: Path that will be prepended to sys.path for the duration of</span>
<span class="sd">            the context manager.</span>

<span class="sd">    Yields:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
        <span class="k">yield</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.source_utils.resolve" class="doc doc-heading">
<code class="highlight language-python"><span class="n">resolve</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">skip_validation</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Resolve an object.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>obj</code></td>
        <td><code>Union[Type[Any], Callable[..., Any], module, function, builtin_function_or_method]</code></td>
        <td><p>The object to resolve.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>skip_validation</code></td>
        <td><code>bool</code></td>
        <td><p>If True, the validation that the object exist in the
module is skipped.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If the object can't be resolved.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Source</code></td>
      <td><p>The source of the resolved object.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/source_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">resolve</span><span class="p">(</span>
    <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span>
        <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span>
        <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">ModuleType</span><span class="p">,</span>
        <span class="n">FunctionType</span><span class="p">,</span>
        <span class="n">BuiltinFunctionType</span><span class="p">,</span>
        <span class="n">NoneType</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">skip_validation</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Source</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Resolve an object.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj: The object to resolve.</span>
<span class="sd">        skip_validation: If True, the validation that the object exist in the</span>
<span class="sd">            module is skipped.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the object can&#39;t be resolved.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The source of the resolved object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># The types of some objects don&#39;t exist in the `builtin` module</span>
    <span class="c1"># so we need to manually handle it here</span>
    <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="n">NoneType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">NoneTypeSource</span>
    <span class="k">elif</span> <span class="n">obj</span> <span class="ow">is</span> <span class="n">FunctionType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">FunctionTypeSource</span>
    <span class="k">elif</span> <span class="n">obj</span> <span class="ow">is</span> <span class="n">BuiltinFunctionType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">BuiltinFunctionTypeSource</span>
    <span class="k">elif</span> <span class="n">source</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">ZENML_SOURCE_ATTRIBUTE_NAME</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">Source</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">source</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">ModuleType</span><span class="p">):</span>
        <span class="n">module</span> <span class="o">=</span> <span class="n">obj</span>
        <span class="n">attribute_name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">module</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="vm">__module__</span><span class="p">]</span>
        <span class="n">attribute_name</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__name__</span>  <span class="c1"># type: ignore[union-attr]</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="ow">not</span> <span class="p">(</span><span class="n">skip_validation</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;_DOCS_BUILDING_MODE&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
        <span class="ow">and</span> <span class="n">attribute_name</span>
        <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">attribute_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">obj</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to resolve object `</span><span class="si">{</span><span class="n">obj</span><span class="si">}</span><span class="s2">`. For the resolving to work, the &quot;</span>
            <span class="s2">&quot;class or function must be defined as top-level code (= it must &quot;</span>
            <span class="s2">&quot;get defined when importing the module) and not inside a function/&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;if-condition. Please make sure that your `</span><span class="si">{</span><span class="n">module</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">` &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;module has a top-level attribute `</span><span class="si">{</span><span class="n">attribute_name</span><span class="si">}</span><span class="s2">` that &quot;</span>
            <span class="s2">&quot;holds the object you want to resolve.&quot;</span>
        <span class="p">)</span>

    <span class="n">module_name</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="k">if</span> <span class="n">module_name</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
        <span class="n">module_name</span> <span class="o">=</span> <span class="n">_resolve_module</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>

    <span class="n">source_type</span> <span class="o">=</span> <span class="n">get_source_type</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="n">module</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">source_type</span> <span class="o">==</span> <span class="n">SourceType</span><span class="o">.</span><span class="n">USER</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">zenml.utils</span> <span class="kn">import</span> <span class="n">code_repository_utils</span>

        <span class="n">local_repo_context</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">code_repository_utils</span><span class="o">.</span><span class="n">find_active_code_repository</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">local_repo_context</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">local_repo_context</span><span class="o">.</span><span class="n">has_local_changes</span><span class="p">:</span>
            <span class="n">module_name</span> <span class="o">=</span> <span class="n">_resolve_module</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>

            <span class="n">source_root</span> <span class="o">=</span> <span class="n">get_source_root</span><span class="p">()</span>
            <span class="n">subdir</span> <span class="o">=</span> <span class="n">PurePath</span><span class="p">(</span><span class="n">source_root</span><span class="p">)</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">local_repo_context</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">CodeRepositorySource</span><span class="p">(</span>
                <span class="n">repository_id</span><span class="o">=</span><span class="n">local_repo_context</span><span class="o">.</span><span class="n">code_repository_id</span><span class="p">,</span>
                <span class="n">commit</span><span class="o">=</span><span class="n">local_repo_context</span><span class="o">.</span><span class="n">current_commit</span><span class="p">,</span>
                <span class="n">subdirectory</span><span class="o">=</span><span class="n">subdir</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span>
                <span class="n">module</span><span class="o">=</span><span class="n">module_name</span><span class="p">,</span>
                <span class="n">attribute</span><span class="o">=</span><span class="n">attribute_name</span><span class="p">,</span>
                <span class="nb">type</span><span class="o">=</span><span class="n">SourceType</span><span class="o">.</span><span class="n">CODE_REPOSITORY</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">module_name</span> <span class="o">=</span> <span class="n">_resolve_module</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">source_type</span> <span class="o">==</span> <span class="n">SourceType</span><span class="o">.</span><span class="n">DISTRIBUTION_PACKAGE</span><span class="p">:</span>
        <span class="n">package_name</span> <span class="o">=</span> <span class="n">_get_package_for_module</span><span class="p">(</span><span class="n">module_name</span><span class="o">=</span><span class="n">module_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">package_name</span><span class="p">:</span>
            <span class="n">package_version</span> <span class="o">=</span> <span class="n">_get_package_version</span><span class="p">(</span><span class="n">package_name</span><span class="o">=</span><span class="n">package_name</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">DistributionPackageSource</span><span class="p">(</span>
                <span class="n">module</span><span class="o">=</span><span class="n">module_name</span><span class="p">,</span>
                <span class="n">attribute</span><span class="o">=</span><span class="n">attribute_name</span><span class="p">,</span>
                <span class="n">package_name</span><span class="o">=</span><span class="n">package_name</span><span class="p">,</span>
                <span class="n">version</span><span class="o">=</span><span class="n">package_version</span><span class="p">,</span>
                <span class="nb">type</span><span class="o">=</span><span class="n">source_type</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Fallback to an unknown source if we can&#39;t find the package</span>
            <span class="n">source_type</span> <span class="o">=</span> <span class="n">SourceType</span><span class="o">.</span><span class="n">UNKNOWN</span>
    <span class="k">elif</span> <span class="n">source_type</span> <span class="o">==</span> <span class="n">SourceType</span><span class="o">.</span><span class="n">NOTEBOOK</span><span class="p">:</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">NotebookSource</span><span class="p">(</span>
            <span class="n">module</span><span class="o">=</span><span class="s2">&quot;__main__&quot;</span><span class="p">,</span>
            <span class="n">attribute</span><span class="o">=</span><span class="n">attribute_name</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">source_type</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">module_name</span> <span class="ow">in</span> <span class="n">_notebook_modules</span><span class="p">:</span>
            <span class="n">source</span><span class="o">.</span><span class="n">replacement_module</span> <span class="o">=</span> <span class="n">module_name</span>
            <span class="n">source</span><span class="o">.</span><span class="n">artifact_store_id</span> <span class="o">=</span> <span class="n">_notebook_modules</span><span class="p">[</span><span class="n">module_name</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">cell_code</span> <span class="o">:=</span> <span class="n">notebook_utils</span><span class="o">.</span><span class="n">load_notebook_cell_code</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="n">replacement_module</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">notebook_utils</span><span class="o">.</span><span class="n">compute_cell_replacement_module_name</span><span class="p">(</span>
                    <span class="n">cell_code</span><span class="o">=</span><span class="n">cell_code</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">source</span><span class="o">.</span><span class="n">replacement_module</span> <span class="o">=</span> <span class="n">replacement_module</span>
            <span class="n">_resolved_notebook_sources</span><span class="p">[</span><span class="n">source</span><span class="o">.</span><span class="n">import_path</span><span class="p">]</span> <span class="o">=</span> <span class="n">cell_code</span>

        <span class="k">return</span> <span class="n">source</span>

    <span class="k">return</span> <span class="n">Source</span><span class="p">(</span>
        <span class="n">module</span><span class="o">=</span><span class="n">module_name</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="n">attribute_name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">source_type</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.source_utils.set_custom_source_root" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_custom_source_root</span><span class="p">(</span><span class="n">source_root</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Sets a custom source root.</p>
<p>If set this has the highest priority and will always be used as the source
root.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source_root</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The source root to use.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/source_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_custom_source_root</span><span class="p">(</span><span class="n">source_root</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets a custom source root.</span>

<span class="sd">    If set this has the highest priority and will always be used as the source</span>
<span class="sd">    root.</span>

<span class="sd">    Args:</span>
<span class="sd">        source_root: The source root to use.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Setting custom source root: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">source_root</span><span class="p">)</span>
    <span class="k">global</span> <span class="n">_CUSTOM_SOURCE_ROOT</span>
    <span class="n">_CUSTOM_SOURCE_ROOT</span> <span class="o">=</span> <span class="n">source_root</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.source_utils.validate_source_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_source_class</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">expected_class</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Validates that a source resolves to a certain class.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>Union[zenml.config.source.Source, str]</code></td>
        <td><p>The source to validate.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>expected_class</code></td>
        <td><code>Type[Any]</code></td>
        <td><p>The class that the source should resolve to.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if the source resolves to the expected class, False otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/source_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">validate_source_class</span><span class="p">(</span>
    <span class="n">source</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Source</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">expected_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validates that a source resolves to a certain class.</span>

<span class="sd">    Args:</span>
<span class="sd">        source: The source to validate.</span>
<span class="sd">        expected_class: The class that the source should resolve to.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the source resolves to the expected class, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">expected_class</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.string_utils" class="doc doc-heading">
        <code>string_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utils for strings.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.string_utils.b64_decode" class="doc doc-heading">
<code class="highlight language-python"><span class="n">b64_decode</span><span class="p">(</span><span class="n">input_</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Returns a decoded string of the base 64 encoded input string.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>input_</code></td>
        <td><code>str</code></td>
        <td><p>Base64 encoded string.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Decoded string.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/string_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">b64_decode</span><span class="p">(</span><span class="n">input_</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a decoded string of the base 64 encoded input string.</span>

<span class="sd">    Args:</span>
<span class="sd">        input_: Base64 encoded string.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Decoded string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">encoded_bytes</span> <span class="o">=</span> <span class="n">input_</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
    <span class="n">decoded_bytes</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">encoded_bytes</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">decoded_bytes</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.string_utils.b64_encode" class="doc doc-heading">
<code class="highlight language-python"><span class="n">b64_encode</span><span class="p">(</span><span class="n">input_</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Returns a base 64 encoded string of the input string.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>input_</code></td>
        <td><code>str</code></td>
        <td><p>The input to encode.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Base64 encoded string.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/string_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">b64_encode</span><span class="p">(</span><span class="n">input_</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a base 64 encoded string of the input string.</span>

<span class="sd">    Args:</span>
<span class="sd">        input_: The input to encode.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Base64 encoded string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">input_bytes</span> <span class="o">=</span> <span class="n">input_</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
    <span class="n">encoded_bytes</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">input_bytes</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">encoded_bytes</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.string_utils.format_name_template" class="doc doc-heading">
<code class="highlight language-python"><span class="n">format_name_template</span><span class="p">(</span><span class="n">name_template</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Formats a name template with the given arguments.</p>
<p>By default, ZenML support Date and Time placeholders.
E.g. <code>my_run_{date}_{time}</code> will be formatted as <code>my_run_1970_01_01_00_00_00</code>.
Extra placeholders need to be explicitly passed in as kwargs.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name_template</code></td>
        <td><code>str</code></td>
        <td><p>The name template to format.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>str</code></td>
        <td><p>The arguments to replace in the template.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The formatted name template.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/string_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">format_name_template</span><span class="p">(</span>
    <span class="n">name_template</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Formats a name template with the given arguments.</span>

<span class="sd">    By default, ZenML support Date and Time placeholders.</span>
<span class="sd">    E.g. `my_run_{date}_{time}` will be formatted as `my_run_1970_01_01_00_00_00`.</span>
<span class="sd">    Extra placeholders need to be explicitly passed in as kwargs.</span>

<span class="sd">    Args:</span>
<span class="sd">        name_template: The name template to format.</span>
<span class="sd">        **kwargs: The arguments to replace in the template.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The formatted name template.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="s2">&quot;date&quot;</span><span class="p">,</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y_%m_</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="s2">&quot;time&quot;</span><span class="p">,</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H_%M_%S_</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">name_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.string_utils.get_human_readable_filesize" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_human_readable_filesize</span><span class="p">(</span><span class="n">bytes_</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Convert a file size in bytes into a human-readable string.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>bytes_</code></td>
        <td><code>int</code></td>
        <td><p>The number of bytes to convert.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>A human-readable string.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/string_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_human_readable_filesize</span><span class="p">(</span><span class="n">bytes_</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a file size in bytes into a human-readable string.</span>

<span class="sd">    Args:</span>
<span class="sd">        bytes_: The number of bytes to convert.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A human-readable string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">size</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">bytes_</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">unit</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;KiB&quot;</span><span class="p">,</span> <span class="s2">&quot;MiB&quot;</span><span class="p">,</span> <span class="s2">&quot;GiB&quot;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">&lt;</span> <span class="mf">1024.0</span> <span class="ow">or</span> <span class="n">unit</span> <span class="o">==</span> <span class="s2">&quot;GiB&quot;</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="n">size</span> <span class="o">/=</span> <span class="mf">1024.0</span>

    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">size</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">unit</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.string_utils.get_human_readable_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_human_readable_time</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Convert seconds into a human-readable string.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>seconds</code></td>
        <td><code>float</code></td>
        <td><p>The number of seconds to convert.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>A human-readable string.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/string_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_human_readable_time</span><span class="p">(</span><span class="n">seconds</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert seconds into a human-readable string.</span>

<span class="sd">    Args:</span>
<span class="sd">        seconds: The number of seconds to convert.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A human-readable string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;-&quot;</span> <span class="k">if</span> <span class="n">seconds</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
    <span class="n">seconds</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
    <span class="n">int_seconds</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
    <span class="n">days</span><span class="p">,</span> <span class="n">int_seconds</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">int_seconds</span><span class="p">,</span> <span class="mi">86400</span><span class="p">)</span>
    <span class="n">hours</span><span class="p">,</span> <span class="n">int_seconds</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">int_seconds</span><span class="p">,</span> <span class="mi">3600</span><span class="p">)</span>
    <span class="n">minutes</span><span class="p">,</span> <span class="n">int_seconds</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">int_seconds</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">days</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">time_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">days</span><span class="si">}</span><span class="s2">d</span><span class="si">{</span><span class="n">hours</span><span class="si">}</span><span class="s2">h</span><span class="si">{</span><span class="n">minutes</span><span class="si">}</span><span class="s2">m</span><span class="si">{</span><span class="n">int_seconds</span><span class="si">}</span><span class="s2">s&quot;</span>
    <span class="k">elif</span> <span class="n">hours</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">time_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">hours</span><span class="si">}</span><span class="s2">h</span><span class="si">{</span><span class="n">minutes</span><span class="si">}</span><span class="s2">m</span><span class="si">{</span><span class="n">int_seconds</span><span class="si">}</span><span class="s2">s&quot;</span>
    <span class="k">elif</span> <span class="n">minutes</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">time_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">minutes</span><span class="si">}</span><span class="s2">m</span><span class="si">{</span><span class="n">int_seconds</span><span class="si">}</span><span class="s2">s&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">time_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">seconds</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">s&quot;</span>

    <span class="k">return</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">time_string</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.string_utils.random_str" class="doc doc-heading">
<code class="highlight language-python"><span class="n">random_str</span><span class="p">(</span><span class="n">length</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Generate a random human readable string of given length.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>length</code></td>
        <td><code>int</code></td>
        <td><p>Length of string</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Random human-readable string.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/string_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">random_str</span><span class="p">(</span><span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate a random human readable string of given length.</span>

<span class="sd">    Args:</span>
<span class="sd">        length: Length of string</span>

<span class="sd">    Returns:</span>
<span class="sd">        Random human-readable string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">()</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">ascii_letters</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">length</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.string_utils.substitute_string" class="doc doc-heading">
<code class="highlight language-python"><span class="n">substitute_string</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">substitution_func</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Recursively substitute strings in objects.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>value</code></td>
        <td><code>~V</code></td>
        <td><p>An object in which the strings should be recursively substituted.
This can be a pydantic model, dict, set, list, tuple or any
primitive type.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>substitution_func</code></td>
        <td><code>Callable[[str], str]</code></td>
        <td><p>The function that does the actual string
substitution.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>~V</code></td>
      <td><p>The object with the substitution function applied to all string values.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/string_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">substitute_string</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">V</span><span class="p">,</span> <span class="n">substitution_func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">V</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Recursively substitute strings in objects.</span>

<span class="sd">    Args:</span>
<span class="sd">        value: An object in which the strings should be recursively substituted.</span>
<span class="sd">            This can be a pydantic model, dict, set, list, tuple or any</span>
<span class="sd">            primitive type.</span>
<span class="sd">        substitution_func: The function that does the actual string</span>
<span class="sd">            substitution.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The object with the substitution function applied to all string values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">substitute_</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span>
        <span class="n">substitute_string</span><span class="p">,</span> <span class="n">substitution_func</span><span class="o">=</span><span class="n">substitution_func</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
        <span class="n">model_values</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">():</span>
            <span class="n">new_value</span> <span class="o">=</span> <span class="n">substitute_</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">model_fields_set</span> <span class="ow">and</span> <span class="n">new_value</span> <span class="o">==</span> <span class="nb">getattr</span><span class="p">(</span>
                <span class="n">value</span><span class="p">,</span> <span class="n">k</span>
            <span class="p">):</span>
                <span class="c1"># This is a default value on the model and was not set</span>
                <span class="c1"># explicitly. In this case, we don&#39;t include it in the model</span>
                <span class="c1"># values to keep the `exclude_unset` behavior the same</span>
                <span class="k">continue</span>

            <span class="n">model_values</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_value</span>

        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">V</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">model_values</span><span class="p">))</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Dict</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span>
            <span class="n">V</span><span class="p">,</span> <span class="p">{</span><span class="n">substitute_</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">substitute_</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">set</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">V</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)(</span><span class="n">substitute_</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="p">))</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">V</span><span class="p">,</span> <span class="n">substitution_func</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">value</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.string_utils.validate_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_name</span><span class="p">(</span><span class="n">model</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Validator to ensure that the given name has only allowed characters.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>model</code></td>
        <td><code>BaseModel</code></td>
        <td><p>The model to validate.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the name has invalid characters.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/string_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">validate_name</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validator to ensure that the given name has only allowed characters.</span>

<span class="sd">    Args:</span>
<span class="sd">        model: The model to validate.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the name has invalid characters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cls_name</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="k">if</span> <span class="n">cls_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;Base&quot;</span><span class="p">):</span>
        <span class="n">type_</span> <span class="o">=</span> <span class="n">cls_name</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">cls_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;Request&quot;</span><span class="p">):</span>
        <span class="n">type_</span> <span class="o">=</span> <span class="n">cls_name</span><span class="p">[:</span><span class="o">-</span><span class="mi">7</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">type_</span> <span class="o">=</span> <span class="n">cls_name</span>

    <span class="k">if</span> <span class="n">name</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">BANNED_NAME_CHARACTERS</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">diff</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The name `</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">` of the `</span><span class="si">{</span><span class="n">type_</span><span class="si">}</span><span class="s2">` contains &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;the following forbidden characters: `</span><span class="si">{</span><span class="n">diff</span><span class="si">}</span><span class="s2">`.&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The class `</span><span class="si">{</span><span class="n">cls_name</span><span class="si">}</span><span class="s2">` has no attribute `name` &quot;</span>
            <span class="s2">&quot;or it is set to `None`. Cannot validate the name.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.typed_model" class="doc doc-heading">
        <code>typed_model</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utility classes for adding type information to Pydantic models.</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="zenml.utils.typed_model.BaseTypedModel" class="doc doc-heading">
        <code>
BaseTypedModel            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Typed Pydantic model base class.</p>
<p>Use this class as a base class instead of BaseModel to automatically
add a <code>type</code> literal attribute to the model that stores the name of the
class.</p>
<p>This can be useful when serializing models to JSON and then de-serializing
them as part of a submodel union field, e.g.:</p>
<pre><code class="language-python">
class BluePill(BaseTypedModel):
    ...

class RedPill(BaseTypedModel):
    ...

class TheMatrix(BaseTypedModel):
    choice: Union[BluePill, RedPill] = Field(..., discriminator='type')

matrix = TheMatrix(choice=RedPill())
d = matrix.dict()
new_matrix = TheMatrix.model_validate(d)
assert isinstance(new_matrix.choice, RedPill)
</code></pre>
<p>It can also facilitate de-serializing objects when their type isn't known:</p>
<pre><code class="language-python">matrix = TheMatrix(choice=RedPill())
d = matrix.dict()
new_matrix = BaseTypedModel.from_dict(d)
assert isinstance(new_matrix.choice, RedPill)
</code></pre>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/typed_model.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">BaseTypedModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">BaseTypedModelMeta</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Typed Pydantic model base class.</span>

<span class="sd">    Use this class as a base class instead of BaseModel to automatically</span>
<span class="sd">    add a `type` literal attribute to the model that stores the name of the</span>
<span class="sd">    class.</span>

<span class="sd">    This can be useful when serializing models to JSON and then de-serializing</span>
<span class="sd">    them as part of a submodel union field, e.g.:</span>

<span class="sd">    ```python</span>

<span class="sd">    class BluePill(BaseTypedModel):</span>
<span class="sd">        ...</span>

<span class="sd">    class RedPill(BaseTypedModel):</span>
<span class="sd">        ...</span>

<span class="sd">    class TheMatrix(BaseTypedModel):</span>
<span class="sd">        choice: Union[BluePill, RedPill] = Field(..., discriminator=&#39;type&#39;)</span>

<span class="sd">    matrix = TheMatrix(choice=RedPill())</span>
<span class="sd">    d = matrix.dict()</span>
<span class="sd">    new_matrix = TheMatrix.model_validate(d)</span>
<span class="sd">    assert isinstance(new_matrix.choice, RedPill)</span>
<span class="sd">    ```</span>

<span class="sd">    It can also facilitate de-serializing objects when their type isn&#39;t known:</span>

<span class="sd">    ```python</span>
<span class="sd">    matrix = TheMatrix(choice=RedPill())</span>
<span class="sd">    d = matrix.dict()</span>
<span class="sd">    new_matrix = BaseTypedModel.from_dict(d)</span>
<span class="sd">    assert isinstance(new_matrix.choice, RedPill)</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">model_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BaseTypedModel&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Instantiate a Pydantic model from a serialized JSON-able dict representation.</span>

<span class="sd">        Args:</span>
<span class="sd">            model_dict: the model attributes serialized as JSON-able dict.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A BaseTypedModel created from the serialized representation.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: if the model_dict contains an invalid type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model_type</span> <span class="o">=</span> <span class="n">model_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">model_type</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;`type` information is missing from the serialized model dict.&quot;</span>
            <span class="p">)</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="n">source_utils</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">BaseTypedModel</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Class `</span><span class="si">{</span><span class="bp">cls</span><span class="si">}</span><span class="s2">` is not a ZenML BaseTypedModel subclass.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">model_dict</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">json_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BaseTypedModel&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Instantiate a Pydantic model from a serialized JSON representation.</span>

<span class="sd">        Args:</span>
<span class="sd">            json_str: the model attributes serialized as JSON.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A BaseTypedModel created from the serialized representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">model_dict</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">
























  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.typed_model.BaseTypedModel.from_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">model_dict</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Instantiate a Pydantic model from a serialized JSON-able dict representation.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>model_dict</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>the model attributes serialized as JSON-able dict.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>BaseTypedModel</code></td>
      <td><p>A BaseTypedModel created from the serialized representation.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>if the model_dict contains an invalid type.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/typed_model.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">model_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BaseTypedModel&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Instantiate a Pydantic model from a serialized JSON-able dict representation.</span>

<span class="sd">    Args:</span>
<span class="sd">        model_dict: the model attributes serialized as JSON-able dict.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A BaseTypedModel created from the serialized representation.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: if the model_dict contains an invalid type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model_type</span> <span class="o">=</span> <span class="n">model_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">model_type</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;`type` information is missing from the serialized model dict.&quot;</span>
        <span class="p">)</span>
    <span class="bp">cls</span> <span class="o">=</span> <span class="n">source_utils</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_type</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">BaseTypedModel</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Class `</span><span class="si">{</span><span class="bp">cls</span><span class="si">}</span><span class="s2">` is not a ZenML BaseTypedModel subclass.&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">model_dict</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.typed_model.BaseTypedModel.from_json" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_json</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Instantiate a Pydantic model from a serialized JSON representation.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>json_str</code></td>
        <td><code>str</code></td>
        <td><p>the model attributes serialized as JSON.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>BaseTypedModel</code></td>
      <td><p>A BaseTypedModel created from the serialized representation.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/typed_model.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">json_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BaseTypedModel&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Instantiate a Pydantic model from a serialized JSON representation.</span>

<span class="sd">    Args:</span>
<span class="sd">        json_str: the model attributes serialized as JSON.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A BaseTypedModel created from the serialized representation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">model_dict</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="zenml.utils.typed_model.BaseTypedModelMeta" class="doc doc-heading">
        <code>
BaseTypedModelMeta            (<span title="pydantic._internal._model_construction.ModelMetaclass">ModelMetaclass</span>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Metaclass responsible for adding type information to Pydantic models.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/typed_model.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">BaseTypedModelMeta</span><span class="p">(</span><span class="n">ModelMetaclass</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Metaclass responsible for adding type information to Pydantic models.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span>
        <span class="n">mcs</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">bases</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span> <span class="n">dct</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BaseTypedModelMeta&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a Pydantic BaseModel class.</span>

<span class="sd">        This includes a hidden attribute that reflects the full class</span>
<span class="sd">        identifier.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: The name of the class.</span>
<span class="sd">            bases: The base classes of the class.</span>
<span class="sd">            dct: The class dictionary.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A Pydantic BaseModel class that includes a hidden attribute that</span>
<span class="sd">            reflects the full class identifier.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the class is not a Pydantic BaseModel class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;type&quot;</span> <span class="ow">in</span> <span class="n">dct</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;`type` is a reserved attribute name for BaseTypedModel &quot;</span>
                <span class="s2">&quot;subclasses&quot;</span>
            <span class="p">)</span>
        <span class="n">type_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;__module__&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;__qualname__&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">type_ann</span> <span class="o">=</span> <span class="n">Literal</span><span class="p">[</span><span class="n">type_name</span><span class="p">]</span>  <span class="c1"># type: ignore[valid-type]</span>
        <span class="nb">type</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">type_name</span><span class="p">)</span>
        <span class="n">dct</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;__annotations__&quot;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">())[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">type_ann</span>
        <span class="n">dct</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
            <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseTypedModel&quot;</span><span class="p">],</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">mcs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">dct</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.typed_model.BaseTypedModelMeta.__new__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__new__</span><span class="p">(</span><span class="n">mcs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">dct</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Creates a Pydantic BaseModel class.</p>
<p>This includes a hidden attribute that reflects the full class
identifier.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the class.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>bases</code></td>
        <td><code>Tuple[Type[Any], ...]</code></td>
        <td><p>The base classes of the class.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>dct</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>The class dictionary.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>BaseTypedModelMeta</code></td>
      <td><p>A Pydantic BaseModel class that includes a hidden attribute that
reflects the full class identifier.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If the class is not a Pydantic BaseModel class.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/typed_model.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span>
    <span class="n">mcs</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">bases</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span> <span class="n">dct</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BaseTypedModelMeta&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a Pydantic BaseModel class.</span>

<span class="sd">    This includes a hidden attribute that reflects the full class</span>
<span class="sd">    identifier.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: The name of the class.</span>
<span class="sd">        bases: The base classes of the class.</span>
<span class="sd">        dct: The class dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A Pydantic BaseModel class that includes a hidden attribute that</span>
<span class="sd">        reflects the full class identifier.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If the class is not a Pydantic BaseModel class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;type&quot;</span> <span class="ow">in</span> <span class="n">dct</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="s2">&quot;`type` is a reserved attribute name for BaseTypedModel &quot;</span>
            <span class="s2">&quot;subclasses&quot;</span>
        <span class="p">)</span>
    <span class="n">type_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;__module__&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;__qualname__&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">type_ann</span> <span class="o">=</span> <span class="n">Literal</span><span class="p">[</span><span class="n">type_name</span><span class="p">]</span>  <span class="c1"># type: ignore[valid-type]</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">type_name</span><span class="p">)</span>
    <span class="n">dct</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;__annotations__&quot;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">())[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">type_ann</span>
    <span class="n">dct</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span>
    <span class="bp">cls</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
        <span class="n">Type</span><span class="p">[</span><span class="s2">&quot;BaseTypedModel&quot;</span><span class="p">],</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">mcs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">dct</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.typing_utils" class="doc doc-heading">
        <code>typing_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Carried over version of some functions from the pydantic v1 typing module.</p>
<p>Check out the latest version here:
https://github.com/pydantic/pydantic/blob/v1.10.14/pydantic/typing.py</p>



  <div class="doc doc-children">











  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.typing_utils.all_literal_values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">all_literal_values</span><span class="p">(</span><span class="n">type_</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Fetches the literal values defined in a type in a recursive manner.</p>
<p>This method is used to retrieve all Literal values as Literal can be
used recursively (see https://www.python.org/dev/peps/pep-0586)
e.g. <code>Literal[Literal[Literal[1, 2, 3], "foo"], 5, None]</code></p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>type_</code></td>
        <td><code>Type[Any]</code></td>
        <td><p>type to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tuple[Any, ...]</code></td>
      <td><p>tuple of all the literal values defined in the type.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/typing_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">all_literal_values</span><span class="p">(</span><span class="n">type_</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fetches the literal values defined in a type in a recursive manner.</span>

<span class="sd">    This method is used to retrieve all Literal values as Literal can be</span>
<span class="sd">    used recursively (see https://www.python.org/dev/peps/pep-0586)</span>
<span class="sd">    e.g. `Literal[Literal[Literal[1, 2, 3], &quot;foo&quot;], 5, None]`</span>

<span class="sd">    Args:</span>
<span class="sd">        type_: type to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple of all the literal values defined in the type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_literal_type</span><span class="p">(</span><span class="n">type_</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">type_</span><span class="p">,)</span>

    <span class="n">values</span> <span class="o">=</span> <span class="n">literal_values</span><span class="p">(</span><span class="n">type_</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">all_literal_values</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.typing_utils.get_args" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_args</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Get type arguments with all substitutions performed.</p>
<p>For unions, basic simplifications used by Union constructor are performed.
Examples::
    get_args(Dict[str, int]) == (str, int)
    get_args(int) == ()
    get_args(Union[int, Union[T, int], str][int]) == (int, str)
    get_args(Union[int, Tuple[T, int]][str]) == (int, Tuple[str, int])
    get_args(Callable[[], T][int]) == ([], int)</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>tp</code></td>
        <td><code>Type[Any]</code></td>
        <td><p>the type to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tuple[Any, ...]</code></td>
      <td><p>Tuple of all the args.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/typing_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_args</span><span class="p">(</span><span class="n">tp</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get type arguments with all substitutions performed.</span>

<span class="sd">    For unions, basic simplifications used by Union constructor are performed.</span>
<span class="sd">    Examples::</span>
<span class="sd">        get_args(Dict[str, int]) == (str, int)</span>
<span class="sd">        get_args(int) == ()</span>
<span class="sd">        get_args(Union[int, Union[T, int], str][int]) == (int, str)</span>
<span class="sd">        get_args(Union[int, Tuple[T, int]][str]) == (int, Tuple[str, int])</span>
<span class="sd">        get_args(Callable[[], T][int]) == ([], int)</span>

<span class="sd">    Args:</span>
<span class="sd">        tp: the type to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tuple of all the args.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">in</span> <span class="n">AnnotatedTypeNames</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">tp</span><span class="o">.</span><span class="n">__args__</span> <span class="o">+</span> <span class="n">tp</span><span class="o">.</span><span class="n">__metadata__</span>  <span class="c1"># type: ignore[no-any-return]</span>
    <span class="c1"># the fallback is needed for the same reasons as `get_origin` (see above)</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">_typing_get_args</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span>
        <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">tp</span><span class="p">,</span> <span class="s2">&quot;__args__&quot;</span><span class="p">,</span> <span class="p">())</span>
        <span class="ow">or</span> <span class="n">_generic_get_args</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.typing_utils.get_origin" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_origin</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Fetches the origin of a given type.</p>
<p>We can't directly use <code>typing.get_origin</code> since we need a fallback to
support custom generic classes like <code>ConstrainedList</code>
It should be useless once https://github.com/cython/cython/issues/3537 is
solved and https://github.com/pydantic/pydantic/pull/1753 is merged.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>tp</code></td>
        <td><code>Type[Any]</code></td>
        <td><p>type to check</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[Type[Any]]</code></td>
      <td><p>the origin type of the provided type.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/typing_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_origin</span><span class="p">(</span><span class="n">tp</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fetches the origin of a given type.</span>

<span class="sd">    We can&#39;t directly use `typing.get_origin` since we need a fallback to</span>
<span class="sd">    support custom generic classes like `ConstrainedList`</span>
<span class="sd">    It should be useless once https://github.com/cython/cython/issues/3537 is</span>
<span class="sd">    solved and https://github.com/pydantic/pydantic/pull/1753 is merged.</span>

<span class="sd">    Args:</span>
<span class="sd">        tp: type to check</span>

<span class="sd">    Returns:</span>
<span class="sd">        the origin type of the provided type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">in</span> <span class="n">AnnotatedTypeNames</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Annotated</span><span class="p">)</span>  <span class="c1"># mypy complains about _SpecialForm</span>
    <span class="k">return</span> <span class="n">_typing_get_origin</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">tp</span><span class="p">,</span> <span class="s2">&quot;__origin__&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.typing_utils.is_literal_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_literal_type</span><span class="p">(</span><span class="n">type_</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks if the provided type is a literal type.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>type_</code></td>
        <td><code>Type[Any]</code></td>
        <td><p>type to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>boolean indicating whether the type is union type.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/typing_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_literal_type</span><span class="p">(</span><span class="n">type_</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if the provided type is a literal type.</span>

<span class="sd">    Args:</span>
<span class="sd">        type_: type to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        boolean indicating whether the type is union type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Literal</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">get_origin</span><span class="p">(</span><span class="n">type_</span><span class="p">)</span> <span class="ow">in</span> <span class="n">LITERAL_TYPES</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.typing_utils.is_none_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_none_type</span><span class="p">(</span><span class="n">type_</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks if the provided type is a none type.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>type_</code></td>
        <td><code>Any</code></td>
        <td><p>type to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>boolean indicating whether the type is a none type.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/typing_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_none_type</span><span class="p">(</span><span class="n">type_</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if the provided type is a none type.</span>

<span class="sd">    Args:</span>
<span class="sd">        type_: type to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        boolean indicating whether the type is a none type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">type_</span> <span class="ow">in</span> <span class="n">NONE_TYPES</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.typing_utils.is_optional" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_optional</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks whether a given annotation is typing.Optional.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>tp</code></td>
        <td><code>Type[Any]</code></td>
        <td><p>the type to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>boolean indicating if the type is typing.Optional.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/typing_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_optional</span><span class="p">(</span><span class="n">tp</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks whether a given annotation is typing.Optional.</span>

<span class="sd">    Args:</span>
<span class="sd">        tp: the type to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        boolean indicating if the type is typing.Optional.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">is_union</span><span class="p">(</span><span class="n">get_origin</span><span class="p">(</span><span class="n">tp</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="ow">in</span> <span class="n">get_args</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.typing_utils.is_union" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_union</span><span class="p">(</span><span class="n">type_</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks if the provided type is a union type.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>type_</code></td>
        <td><code>Optional[Type[Any]]</code></td>
        <td><p>type to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>boolean indicating whether the type is union type.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/typing_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_union</span><span class="p">(</span><span class="n">type_</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if the provided type is a union type.</span>

<span class="sd">    Args:</span>
<span class="sd">        type_: type to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        boolean indicating whether the type is union type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">types</span>

    <span class="k">return</span> <span class="n">type_</span> <span class="ow">is</span> <span class="n">Union</span> <span class="ow">or</span> <span class="n">type_</span> <span class="ow">is</span> <span class="n">types</span><span class="o">.</span><span class="n">UnionType</span>  <span class="c1"># type: ignore[comparison-overlap]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.typing_utils.literal_values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">literal_values</span><span class="p">(</span><span class="n">type_</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Fetches the literal values defined in a type.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>type_</code></td>
        <td><code>Type[Any]</code></td>
        <td><p>type to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tuple[Any, ...]</code></td>
      <td><p>tuple of the literal values.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/typing_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">literal_values</span><span class="p">(</span><span class="n">type_</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fetches the literal values defined in a type.</span>

<span class="sd">    Args:</span>
<span class="sd">        type_: type to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple of the literal values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">get_args</span><span class="p">(</span><span class="n">type_</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.uuid_utils" class="doc doc-heading">
        <code>uuid_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utility functions for handling UUIDs.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.uuid_utils.generate_uuid_from_string" class="doc doc-heading">
<code class="highlight language-python"><span class="n">generate_uuid_from_string</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Deterministically generates a UUID from a string seed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>value</code></td>
        <td><code>str</code></td>
        <td><p>The string from which to generate the UUID.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>UUID</code></td>
      <td><p>The generated UUID.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/uuid_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">generate_uuid_from_string</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UUID</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deterministically generates a UUID from a string seed.</span>

<span class="sd">    Args:</span>
<span class="sd">        value: The string from which to generate the UUID.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The generated UUID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">hash_</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>  <span class="c1"># nosec</span>
    <span class="n">hash_</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">UUID</span><span class="p">(</span><span class="nb">hex</span><span class="o">=</span><span class="n">hash_</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">(),</span> <span class="n">version</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.uuid_utils.is_valid_uuid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_valid_uuid</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks if a string is a valid UUID.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>value</code></td>
        <td><code>Any</code></td>
        <td><p>String to check.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>version</code></td>
        <td><code>int</code></td>
        <td><p>Version of UUID to check for.</p></td>
        <td><code>4</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if string is a valid UUID, False otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/uuid_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_valid_uuid</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if a string is a valid UUID.</span>

<span class="sd">    Args:</span>
<span class="sd">        value: String to check.</span>
<span class="sd">        version: Version of UUID to check for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if string is a valid UUID, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">UUID</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">UUID</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.uuid_utils.parse_name_or_uuid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_name_or_uuid</span><span class="p">(</span><span class="n">name_or_id</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Convert a "name or id" string value to a string or UUID.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name_or_id</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Name or id to convert.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Union[uuid.UUID, str]</code></td>
      <td><p>A UUID if name_or_id is a UUID, string otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/uuid_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_name_or_uuid</span><span class="p">(</span>
    <span class="n">name_or_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a &quot;name or id&quot; string value to a string or UUID.</span>

<span class="sd">    Args:</span>
<span class="sd">        name_or_id: Name or id to convert.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A UUID if name_or_id is a UUID, string otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name_or_id</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">UUID</span><span class="p">(</span><span class="n">name_or_id</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">name_or_id</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">name_or_id</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.visualization_utils" class="doc doc-heading">
        <code>visualization_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utility functions for dashboard visualizations.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.visualization_utils.format_csv_visualization_as_html" class="doc doc-heading">
<code class="highlight language-python"><span class="n">format_csv_visualization_as_html</span><span class="p">(</span><span class="n">csv_visualization</span><span class="p">,</span> <span class="n">max_rows</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">max_cols</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Formats a CSV visualization as an HTML table.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>csv_visualization</code></td>
        <td><code>str</code></td>
        <td><p>CSV visualization as a string.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>max_rows</code></td>
        <td><code>int</code></td>
        <td><p>Maximum number of rows to display. Remaining rows will be
replaced by an ellipsis in the middle of the table.</p></td>
        <td><code>10</code></td>
      </tr>
      <tr>
        <td><code>max_cols</code></td>
        <td><code>int</code></td>
        <td><p>Maximum number of columns to display. Remaining columns will
be replaced by an ellipsis at the end of each row.</p></td>
        <td><code>10</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>HTML table as a string.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/visualization_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">format_csv_visualization_as_html</span><span class="p">(</span>
    <span class="n">csv_visualization</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">max_rows</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">max_cols</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Formats a CSV visualization as an HTML table.</span>

<span class="sd">    Args:</span>
<span class="sd">        csv_visualization: CSV visualization as a string.</span>
<span class="sd">        max_rows: Maximum number of rows to display. Remaining rows will be</span>
<span class="sd">            replaced by an ellipsis in the middle of the table.</span>
<span class="sd">        max_cols: Maximum number of columns to display. Remaining columns will</span>
<span class="sd">            be replaced by an ellipsis at the end of each row.</span>

<span class="sd">    Returns:</span>
<span class="sd">        HTML table as a string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="n">csv_visualization</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
    <span class="n">html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="c1"># If there are fewer rows than the maximum, print all rows</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">max_rows</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="n">_format_csv_row_as_html</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">max_cols</span><span class="o">=</span><span class="n">max_cols</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Else, replace middle rows with ellipsis</span>
        <span class="n">half_max_rows</span> <span class="o">=</span> <span class="n">max_rows</span> <span class="o">//</span> <span class="mi">2</span>

        <span class="c1"># Print first half of rows</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">[:</span><span class="n">half_max_rows</span><span class="p">]:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="n">_format_csv_row_as_html</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">max_cols</span><span class="o">=</span><span class="n">max_cols</span><span class="p">)</span>

        <span class="c1"># Print ellipsis</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">max_rows</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s2">&quot;&lt;tr&gt;&lt;td&gt;...&lt;/td&gt;&lt;/tr&gt;&quot;</span>

        <span class="c1"># Print last half of rows</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">[</span><span class="o">-</span><span class="n">half_max_rows</span><span class="p">:]:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="n">_format_csv_row_as_html</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">max_cols</span><span class="o">=</span><span class="n">max_cols</span><span class="p">)</span>

    <span class="k">return</span> <span class="s2">&quot;&lt;table&gt;&quot;</span> <span class="o">+</span> <span class="n">html</span> <span class="o">+</span> <span class="s2">&quot;&lt;/table&gt;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.visualization_utils.visualize_artifact" class="doc doc-heading">
<code class="highlight language-python"><span class="n">visualize_artifact</span><span class="p">(</span><span class="n">artifact</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Visualize an artifact in notebook environments.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>artifact</code></td>
        <td><code>ArtifactVersionResponse</code></td>
        <td><p>The artifact to visualize.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>title</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Optional title to show before the visualizations.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>RuntimeError</code></td>
        <td><p>If not in a notebook environment.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/visualization_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">visualize_artifact</span><span class="p">(</span>
    <span class="n">artifact</span><span class="p">:</span> <span class="s2">&quot;ArtifactVersionResponse&quot;</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize an artifact in notebook environments.</span>

<span class="sd">    Args:</span>
<span class="sd">        artifact: The artifact to visualize.</span>
<span class="sd">        title: Optional title to show before the visualizations.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If not in a notebook environment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">Environment</span><span class="o">.</span><span class="n">in_notebook</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;The `output.visualize()` method is only available in Jupyter &quot;</span>
            <span class="s2">&quot;notebooks. In all other runtime environments, please open &quot;</span>
            <span class="s2">&quot;your ZenML dashboard using `zenml up` and view the &quot;</span>
            <span class="s2">&quot;visualizations by clicking on the respective artifacts in the &quot;</span>
            <span class="s2">&quot;pipeline run DAG instead.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">artifact</span><span class="o">.</span><span class="n">visualizations</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
        <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;### </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">artifact</span><span class="o">.</span><span class="n">visualizations</span><span class="p">)):</span>
        <span class="n">visualization</span> <span class="o">=</span> <span class="n">load_artifact_visualization</span><span class="p">(</span><span class="n">artifact</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">visualization</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">VisualizationType</span><span class="o">.</span><span class="n">IMAGE</span><span class="p">:</span>
            <span class="n">display</span><span class="p">(</span><span class="n">Image</span><span class="p">(</span><span class="n">visualization</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">visualization</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">VisualizationType</span><span class="o">.</span><span class="n">HTML</span><span class="p">:</span>
            <span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="n">visualization</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">visualization</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">VisualizationType</span><span class="o">.</span><span class="n">MARKDOWN</span><span class="p">:</span>
            <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="n">visualization</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">visualization</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">VisualizationType</span><span class="o">.</span><span class="n">CSV</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">visualization</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
            <span class="n">table</span> <span class="o">=</span> <span class="n">format_csv_visualization_as_html</span><span class="p">(</span><span class="n">visualization</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="n">table</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">display</span><span class="p">(</span><span class="n">visualization</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="zenml.utils.yaml_utils" class="doc doc-heading">
        <code>yaml_utils</code>



</h3>

    <div class="doc doc-contents ">

      <p>Utility functions to help with YAML files and data.</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="zenml.utils.yaml_utils.UUIDEncoder" class="doc doc-heading">
        <code>
UUIDEncoder            (<span title="json.encoder.JSONEncoder">JSONEncoder</span>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>JSON encoder for UUID objects.</p>

        <details class="quote">
          <summary>Source code in <code>zenml/utils/yaml_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">UUIDEncoder</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;JSON encoder for UUID objects.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Default UUID encoder for JSON.</span>

<span class="sd">        Args:</span>
<span class="sd">            obj: Object to encode.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Encoded object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">UUID</span><span class="p">):</span>
            <span class="c1"># if the obj is uuid, we simply return the value of uuid</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">hex</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="zenml.utils.yaml_utils.UUIDEncoder.default" class="doc doc-heading">
<code class="highlight language-python"><span class="n">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Default UUID encoder for JSON.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>obj</code></td>
        <td><code>Any</code></td>
        <td><p>Object to encode.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>Encoded object.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/yaml_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Default UUID encoder for JSON.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj: Object to encode.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Encoded object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">UUID</span><span class="p">):</span>
        <span class="c1"># if the obj is uuid, we simply return the value of uuid</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">hex</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.yaml_utils.append_yaml" class="doc doc-heading">
<code class="highlight language-python"><span class="n">append_yaml</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">contents</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Append contents to a YAML file at file_path.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>file_path</code></td>
        <td><code>str</code></td>
        <td><p>Path to YAML file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>contents</code></td>
        <td><code>Dict[Any, Any]</code></td>
        <td><p>Contents of YAML file as dict.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>if directory does not exist.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/yaml_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">append_yaml</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">contents</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append contents to a YAML file at file_path.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_path: Path to YAML file.</span>
<span class="sd">        contents: Contents of YAML file as dict.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: if directory does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">file_contents</span> <span class="o">=</span> <span class="n">read_yaml</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="n">file_contents</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">io_utils</span><span class="o">.</span><span class="n">is_remote</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
        <span class="n">dir_</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fileio</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">dir_</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Directory </span><span class="si">{</span><span class="n">dir_</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
    <span class="n">io_utils</span><span class="o">.</span><span class="n">write_file_contents_as_string</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">file_contents</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.yaml_utils.comment_out_yaml" class="doc doc-heading">
<code class="highlight language-python"><span class="n">comment_out_yaml</span><span class="p">(</span><span class="n">yaml_string</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Comments out a yaml string.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>yaml_string</code></td>
        <td><code>str</code></td>
        <td><p>The yaml string to comment out.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The commented out yaml string.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/yaml_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">comment_out_yaml</span><span class="p">(</span><span class="n">yaml_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Comments out a yaml string.</span>

<span class="sd">    Args:</span>
<span class="sd">        yaml_string: The yaml string to comment out.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The commented out yaml string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">yaml_string</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="n">keepends</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;# &quot;</span> <span class="o">+</span> <span class="n">line</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">]</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.yaml_utils.is_json_serializable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_json_serializable</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Checks whether an object is JSON serializable.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>obj</code></td>
        <td><code>Any</code></td>
        <td><p>The object to check.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Whether the object is JSON serializable using pydantics encoder class.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/yaml_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_json_serializable</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks whether an object is JSON serializable.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj: The object to check.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Whether the object is JSON serializable using pydantics encoder class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">zenml.utils.json_utils</span> <span class="kn">import</span> <span class="n">pydantic_encoder</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">pydantic_encoder</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.yaml_utils.is_yaml" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_yaml</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Returns True if file_path is YAML, else False.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>file_path</code></td>
        <td><code>str</code></td>
        <td><p>Path to YAML file.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if is yaml, else False.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/yaml_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_yaml</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns True if file_path is YAML, else False.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_path: Path to YAML file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if is yaml, else False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;yaml&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;yml&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.yaml_utils.read_json" class="doc doc-heading">
<code class="highlight language-python"><span class="n">read_json</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Read JSON on file path and returns contents as dict.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>file_path</code></td>
        <td><code>str</code></td>
        <td><p>Path to JSON file.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>Contents of the file in a dict.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>if file does not exist.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/yaml_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">read_json</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read JSON on file path and returns contents as dict.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_path: Path to JSON file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Contents of the file in a dict.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: if file does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fileio</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
        <span class="n">contents</span> <span class="o">=</span> <span class="n">io_utils</span><span class="o">.</span><span class="n">read_file_contents_as_string</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.yaml_utils.read_yaml" class="doc doc-heading">
<code class="highlight language-python"><span class="n">read_yaml</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Read YAML on file path and returns contents as dict.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>file_path</code></td>
        <td><code>str</code></td>
        <td><p>Path to YAML file.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>Contents of the file in a dict.</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>if file does not exist.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/yaml_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">read_yaml</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read YAML on file path and returns contents as dict.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_path: Path to YAML file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Contents of the file in a dict.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: if file does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fileio</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
        <span class="n">contents</span> <span class="o">=</span> <span class="n">io_utils</span><span class="o">.</span><span class="n">read_file_contents_as_string</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="c1"># TODO: [LOW] consider adding a default empty dict to be returned</span>
        <span class="c1">#   instead of None</span>
        <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.yaml_utils.write_json" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write_json</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">contents</span><span class="p">,</span> <span class="n">encoder</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Write contents as JSON format to file_path.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>file_path</code></td>
        <td><code>str</code></td>
        <td><p>Path to JSON file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>contents</code></td>
        <td><code>Any</code></td>
        <td><p>Contents of JSON file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>encoder</code></td>
        <td><code>Optional[Type[json.encoder.JSONEncoder]]</code></td>
        <td><p>Custom JSON encoder to use when saving json.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>if directory does not exist.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/yaml_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">write_json</span><span class="p">(</span>
    <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">contents</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">encoder</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Write contents as JSON format to file_path.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_path: Path to JSON file.</span>
<span class="sd">        contents: Contents of JSON file.</span>
<span class="sd">        encoder: Custom JSON encoder to use when saving json.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: if directory does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">io_utils</span><span class="o">.</span><span class="n">is_remote</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
        <span class="n">dir_</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fileio</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">dir_</span><span class="p">):</span>
            <span class="c1"># Check if it is a local path, if it doesn&#39;t exist, raise Exception.</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Directory </span><span class="si">{</span><span class="n">dir_</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
    <span class="n">io_utils</span><span class="o">.</span><span class="n">write_file_contents_as_string</span><span class="p">(</span>
        <span class="n">file_path</span><span class="p">,</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
            <span class="n">contents</span><span class="p">,</span>
            <span class="bp">cls</span><span class="o">=</span><span class="n">encoder</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="zenml.utils.yaml_utils.write_yaml" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write_yaml</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">contents</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Write contents as YAML format to file_path.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>file_path</code></td>
        <td><code>str</code></td>
        <td><p>Path to YAML file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>contents</code></td>
        <td><code>Union[Dict[Any, Any], List[Any]]</code></td>
        <td><p>Contents of YAML file as dict or list.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>sort_keys</code></td>
        <td><code>bool</code></td>
        <td><p>If <code>True</code>, keys are sorted alphabetically. If <code>False</code>,
the order in which the keys were inserted into the dict will
be preserved.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>if directory does not exist.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zenml/utils/yaml_utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">write_yaml</span><span class="p">(</span>
    <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">contents</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span>
    <span class="n">sort_keys</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Write contents as YAML format to file_path.</span>

<span class="sd">    Args:</span>
<span class="sd">        file_path: Path to YAML file.</span>
<span class="sd">        contents: Contents of YAML file as dict or list.</span>
<span class="sd">        sort_keys: If `True`, keys are sorted alphabetically. If `False`,</span>
<span class="sd">            the order in which the keys were inserted into the dict will</span>
<span class="sd">            be preserved.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: if directory does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">io_utils</span><span class="o">.</span><span class="n">is_remote</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
        <span class="n">dir_</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fileio</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">dir_</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Directory </span><span class="si">{</span><span class="n">dir_</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
    <span class="n">io_utils</span><span class="o">.</span><span class="n">write_file_contents_as_string</span><span class="p">(</span>
        <span class="n">file_path</span><span class="p">,</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="n">sort_keys</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>




  </div>

    </div>

  </div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../core-types/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Types" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Types
            </div>
          </div>
        </a>
      
      
        
        <a href="../core-zen_server/" class="md-footer__link md-footer__link--next" aria-label="Next: Zen Server" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Zen Server
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 ZenML GmbH – <a href="#__consent">Change cookie settings</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  
    
  




<h4>This website uses cookies</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        <label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>